[{"praise_nums": "1", "fav_nums": 0, "tags": "职场,技术面试,面试", "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">本文由 <a href=\"http://blog.jobbole.com\">伯乐在线</a> - <a href=\"http://www.jobbole.com/members/zhj318\">飞哥的咖啡</a> 翻译，<a href=\"http://www.jobbole.com/members/huanglimin\">黄利民</a> 校稿。未经许可，禁止转载！<br>英文出处：<a target=\"_blank\" href=\"https://zachholman.com/posts/startup-interviewing-is-fucked/\">Zach Holman</a>。欢迎加入<a target=\"_blank\" href=\"http://group.jobbole.com/category/feedback/trans-team/\">翻译组</a>。</div><p>硅谷充满了下面这种创业公司，它们疯狂崇拜在面试中能够答对几道编码难题的候选人，并认为雇佣这些人最终会带来双赢的局面：能够解决算法难题宣告着伴随着他们的加入，背后的 VC 公司一定能获得高利益回报。</p>\n<blockquote>\n<p class=\"Tweet-text e-entry-title\" dir=\"ltr\" lang=\"en\">创业公司：我们正在招募能够革新和改变世界的人！</p>\n<p>面试官：请把这个字符移动到此数组上。</p></blockquote>\n<p>大多数创业公司的用户基础为零，但它们仍有可能成功。尽管技术很少是创业公司成功的原因，但我们依然不切实际地将编程谜题作为招聘的最佳标准。</p>\n<h3>了解你的需求</h3>\n<p>面试中遇到的问题，与工作中遇到的问题，两者存在相当广泛的差距。因此人们总是好奇，创业公司是如何脱离初期的孵化阶段。</p>\n<p>我是一名产品工程师。我没有正式的 CS 背景，但我会做 Web 相关的东西，并且还很擅长。在过去的 10 个月中，我一直在不断地进行面试，从未如此近距离得面对视图、控制器、甚至模型。并不是每个公司都坚持使用编程谜题作为招聘的技术指标，但使用这种方法的公司，基本上都完全聚焦在解决现实世界中不存在的奇特算法问题。</p>\n<blockquote><p>面试官： 怎样写一个完成此操作的方法？</p>\n<p>我：在 Ruby 中写一行代码。</p>\n<p>面试官：OK，那如果现在你不能使用标准库呢？想象一下这是一个 200 GB的文件，你必须在 Ruby 的内存中完成所有操作。</p>\n<p>我：我 TM 为什么要这样做？</p></blockquote>\n<p>诚然，对于一些工作而言，合格的面试要求“完全正确的”算法。但看看周围，有多少小型、不到 50 人的创业公司在做着这样的工作？业内有个不为人知的秘密，<span style=\"color: #ff0000;\">就是大部分创业公司在头几年，做的都是“响当当的”CRUD（增删改查）应用程序，并且认为能够产生最大影响的全面、多样化的人才，往往能够身兼数职</span>。</p>\n<p>我喜欢的一些推文谈到了这一点：</p>\n<blockquote><p>16 年 1 月 27 日</p>\n<p><strong>Trek Glowacki</strong> @trek</p>\n<p>我一直在推特上追踪那些我们面试过，但最终被排除出局的面试者的职业生涯。原来我们几乎都错了。</p>\n<p><strong>Trek Glowacki</strong> @trek</p>\n<p>…我们有一个叫“酒吧大佬”的小组，主要由缺乏“CS 基础”的候选人组成。原来我们错过了这么多优秀的人才。</p></blockquote>\n<p>你更需要担心的是，你是否招错人了！</p>\n<h3 id=\"power-dynamics\">动力学</h3>\n<p>现在的趋势是，公司普遍采用编程谜题来招人，这往往让那些不擅长技术面试但其他方面优秀的人才，在面试中失利。</p>\n<p>基于算法的难题通常是这么来的：面试官陶醉在自我欣赏、自命不凡的氛围中，想出了一些他们认为能够体现聪明才智的东西。 （解决前面那种算法题的）可靠方法是，从一开始就采用递归思路来解决问题。（这对于面试官而言，是一种诱惑。）如果这行不通，请再次尝试一次通过，而不是在 O(n) 操作中尝试。此时，即使只节约了额外的 1 ms，也一定能向公司证明你的价值。</p>\n<p>从这个角度来看，你马上给未来的同事（应征者）传达了一个信息，“正确答案只有我知道，而我希望你能得到它”。这样会让他们更有压力，因为你向他暗示了存在着一个正确答案。</p>\n<p>在我的职业生涯中，我完成的每一个产品都没有所谓的正确答案。它更像是雕刻大理石雕像：你对想要呈现的东西有一个模糊的概念和理解，而你必须通过不断地削减、雕琢它，来最终获得一个可能的结果。你和你的队友在此过程中一起获得最终答案，而不是以一个先入为主的答案，来指导你的同事独自获得它。</p>\n<h3 id=\"collaborate\">合作</h3>\n<p>这就是为什么有时我在面试过程中，强烈地主张结对编程。拿出一个小时，用于减少 Bug 或一起想要获得的功能。今天没有发生什么有趣的事吗？这个 Bug 太“无聊”了吗？好吧，那你为什么要这样做呢？如果这是候选人在工作中会实际碰到的<strong>典型问题</strong>，那么你值得在面试中一试。此外，即使只是最简单的错误修复，你也可以从别人那里学到很多东西。</p>\n<p>一起做一些真正的东西。这样做<strong>完全能够改变你的动力</strong>，我一直是这样强调的。从前你独自努力地寻找一个只有你知道的秘密，但现在你们团队合作，钻研一个答案未知的难题。以前你们是独立对抗，而现在则是团队合作。这会让你的候选人放心，更容易施展技能。</p>\n<h3 id=\"no-one-has-any-idea-what-theyre-doing\">没有人知道他们在做什么</h3>\n<p>技术面试中还有很多疯狂的事，我听说过，并且也曾经历过。</p>\n<p>Max Howell 曾为软件开发者创造过热门的一个工具  (Homebrew)，你可能听说过他在 2015 年在谷歌面试时被拒。谷歌面试官认为他不是一个合格的开发人员，因为他没能在白板上写出（二叉树翻转）算法。</p>\n<p>去年，我参加了一场巨头创业公司的面试，争取工程主管的职位，而当时公司的高速发展导致了一些基本问题，使得数百名开发商的产品无法顺利出货。我和公司的 CEO 和 CTO 进行了一次很好的讨论，关于对整个流程、CI、部署和管理架构进行全面的改革。然而，当我进入非编程领导岗位的最后一轮面试时，内容则几乎完全是由初级开发者问我初级的 JavaScript 问题。我在这样的情况下退缩了。</p>\n<hr>\n<p>你看，我现在明白了，面试需要花费时间和精力，而大多数人只想回到做事的阶段。提出一个标准化问题可以让你以更少的精力做更多的事，并让你比较不同候选人的能力。</p>\n<p>但是，选择的候选人是否合适，这需要花费长时间来检验。大多数处于初期阶段的创业公司，对候选人（特别针对早期员工）所需要的技能集太过炫目和繁杂了。它们期望候选人懂得：产品、代码、营销、设计，会沟通，并且饱含热情。你不能像微软或苹果那样过滤掉其他人。它们是大公司，让我第一个提醒你：你并不是它们，你有不同的优先事项。</p>\n<p>在我看来，你需要做更多的工作，但它会让公司变得更好，并招揽到更优秀的人才。但是我又知道什么呢，反正我也没通过那些操蛋的面试！</p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"111585\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"111585votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"111585\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i>  收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i> 2 评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n<div id=\"author-bio\">\r\n\t\r\n\t<h3 class=\"widget-title\">\r\n\t关于作者：<a target=\"_blank\" href=\"http://www.jobbole.com/members/zhj318\">飞哥的咖啡</a>\r\n\t</h3>\r\n\t<div class=\"alignleft\">\r\n\t\t<a target=\"_blank\" href=\"http://www.jobbole.com/members/zhj318\">\r\n\t\t\t<img src=\"http://jbcdn2.b0.upaiyun.com/2016/09/9667abaa540914200edd449974fb5538.jpg\">\r\n\t\t</a>\r\n\t</div>\r\n\r\n    <div class=\"author-bio-info\">\r\n\r\n        <span class=\"author-bio-info-block\">\r\n            我见青山多妩媚，料青山见我应如是        </span>\r\n        <span class=\"author-bio-info-block\">\r\n            <a href=\"http://www.jobbole.com/members/zhj318\" target=\"_blank\"><i class=\"fa fa-user\"></i> 个人主页</a> ·\r\n            <a href=\"http://blog.jobbole.com/author/zhj318/\" target=\"_blank\"><i class=\"fa fa-file-text-o\"></i> 我的文章</a>\r\n\r\n             · <a title=\"声望值\" target=\"_blank\" href=\"http://www.jobbole.com/members/zhj318/reputation/\"><i class=\"fa fa-graduation-cap\"></i> 17</a> · <a title=\"QQ：574375911\" target=\"_blank\" href=\"#\"><i class=\"fa fa-qq\"></i></a>         </span>\r\n    </div>\r\n\t<div class=\"clear\"></div>\r\n</div>\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "publish_date": "2017/06/27", "comment_nums": "2", "remote_img_url": ["http://jbcdn2.b0.upaiyun.com/2017/04/b2be6a040296beff733db89b9cef0ab1.jpg"], "title": "创业公司操蛋的面试过程", "local_img_url": ["f"]},{"praise_nums": "1", "fav_nums": "1", "tags": "IT技术,Linux,Nmon", "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">原文出处： <a ref=\"nofollow\" target=\"_blank\" href=\"https://www.maketecheasier.com/monitor-linux-system-performance/\">Hitesh Jethva</a>   译文出处：<a target=\"_blank\" href=\"https://linux.cn/article-6886-1.html\">Linux 中国</a>   </div><p>Nmon（得名于 Nigel 的监控器）是IBM的员工 Nigel Griffiths 为 AIX 和 Linux 系统开发的一款计算机性能系统监控工具。Nmon 可以把操作系统的统计数据展示在屏幕上或者存储到一份数据文件里，来帮助了解计算机资源的使用情况、调整方向和系统瓶颈。这个系统基准测试工具只需要使用一条命令就能得到大量重要的性能数据。使用 Nmon 可以很轻松的监控系统的 CPU、内存、网络、硬盘、文件系统、NFS、高耗进程、资源和 IBM Power 系统的微分区的信息。</p>\n<h3 id=\"toc_1\">Nmon 安装</h3>\n<p>Nmon 默认是存在于 Ubuntu 的仓库中的。你可以通过下面的命令安装 Nmon：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59534c5aa5b75089013047\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nsudo apt-get install nmon</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59534c5aa5b75089013047-1\">1</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59534c5aa5b75089013047-1\"><span class=\"crayon-e\">sudo </span><span class=\"crayon-v\">apt</span><span class=\"crayon-o\">-</span><span class=\"crayon-e\">get </span><span class=\"crayon-e\">install </span><span class=\"crayon-v\">nmon</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0004 seconds] -->\r\n<p></p>\n<h3 id=\"toc_2\">怎么使用Nmon来监控Linux的性能</h3>\n<p>安装完成后，通过在终端输入<code>nmon</code> 命令来启动 Nmon</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59534c5aa5b7e608578745\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nnmon</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59534c5aa5b7e608578745-1\">1</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59534c5aa5b7e608578745-1\"><span class=\"crayon-v\">nmon</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0003 seconds] -->\r\n<p>你会看到下面的输出：</p>\n<p class=\"article_img\"><img class=\"aligncenter\" src=\"https://dn-linuxcn.qbox.me/data/attachment/album/201601/14/063604jy0wkkuvz8jnzss8.png\" alt=\"nmon-output\"></p>\n<p class=\"article_img_desc\" style=\"text-align: center\"><em>nmon-output</em></p>\n<p>从上面的截图可以看到 nmon 命令行工具完全是交互式运行的，你可以使用快捷键来轻松查看对应的统计数据。你可以使用下面的 nmon 快捷键来显示不同的系统统计数据：</p>\n<ul>\n<li><code>q</code> : 停止并退出 Nmon</li>\n<li><code>h</code> : 查看帮助</li>\n<li><code>c</code> : 查看 CPU 统计数据</li>\n<li><code>m</code> : 查看内存统计数据</li>\n<li><code>d</code> : 查看硬盘统计数据</li>\n<li><code>k</code> : 查看内核统计数据</li>\n<li><code>n</code> : 查看网络统计数据</li>\n<li><code>N</code> : 查看 NFS 统计数据</li>\n<li><code>j</code> : 查看文件系统统计数据</li>\n<li><code>t</code> : 查看高耗进程</li>\n<li><code>V</code> : 查看虚拟内存统计数据</li>\n<li><code>v</code> : 详细模式</li>\n</ul>\n<h3 id=\"toc_3\">核查 CPU 处理器</h3>\n<p>如果你想收集关于 CPU 性能相关的统计数据，你应该按下键盘上的<code>c</code>键，之后你将会看到下面的输出：</p>\n<p class=\"article_img\"><img class=\"aligncenter\" src=\"https://dn-linuxcn.qbox.me/data/attachment/album/201601/14/063605ko14d13jrd58ttow.png\" alt=\"nmon_cpu_output\"></p>\n<p class=\"article_img_desc\" style=\"text-align: center\"><em>nmon_cpu_output</em></p>\n<h3 id=\"toc_4\">核查高耗进程统计数据</h3>\n<p>如果想收集系统正在运行的高耗进程的统计数据，按键盘上的<code>t</code>键，之后你将会看到下面的输出：</p>\n<p class=\"article_img\"><img class=\"aligncenter\" src=\"https://dn-linuxcn.qbox.me/data/attachment/album/201601/14/063609idvjcvmdmm6v4zjz.jpg\" alt=\"nmon_process_output\"></p>\n<p class=\"article_img_desc\" style=\"text-align: center\"><em>nmon_process_output</em></p>\n<h3 id=\"toc_5\">核查网络统计数据</h3>\n<p>如果想收集 Linux 系统的网络统计数据，按下<code>n</code>键，你将会看到下面输出：</p>\n<p class=\"article_img\"><img class=\"aligncenter\" src=\"https://dn-linuxcn.qbox.me/data/attachment/album/201601/14/063610wib3m6qwjcnq3mmn.png\" alt=\"n_network_output\"></p>\n<p class=\"article_img_desc\" style=\"text-align: center\"><em>n_network_output</em></p>\n<h3 id=\"toc_6\">硬盘 I/O 图表</h3>\n<p>使用<code>d</code> 键获取硬盘相关的信息，你会看到下面输出：</p>\n<p class=\"article_img\"><img class=\"aligncenter\" src=\"https://dn-linuxcn.qbox.me/data/attachment/album/201601/14/063611o2ztlpsp8fj4ljn8.png\" alt=\"nmon_disk_output\"></p>\n<p class=\"article_img_desc\" style=\"text-align: center\"><em>nmon_disk_output</em></p>\n<h3 id=\"toc_7\">核查内核信息</h3>\n<p>Nmon 一个非常重要的快捷键是<code>k</code>键，用来显示系统内核相关的概要信息。按下<code>k</code>键之后，会看到下面输出：</p>\n<p class=\"article_img\"><img class=\"aligncenter\" src=\"https://dn-linuxcn.qbox.me/data/attachment/album/201601/14/063612l5s8m5cm1onslhzx.png\" alt=\"nmon_kernel_output\"></p>\n<p class=\"article_img_desc\" style=\"text-align: center\"><em>nmon_kernel_output</em></p>\n<h3 id=\"toc_8\">获取系统信息</h3>\n<p>对每个系统管理员来说一个非常有用的快捷键是<code>r</code>键，可以用来显示计算机的系统结构、操作系统版本号和 CPU 等不同资源的信息。按下<code>r</code>键之后会看到下面输出：</p>\n<p class=\"article_img\"><img class=\"aligncenter\" src=\"https://dn-linuxcn.qbox.me/data/attachment/album/201601/14/063614r71jjf5funtn7unv.png\" alt=\"nmon_system_output\"></p>\n<p class=\"article_img_desc\" style=\"text-align: center\"><em>nmon_system_output</em></p>\n<h3 id=\"toc_9\">总结</h3>\n<p>还有许多其他的工具做的和 Nmon 同样的工作，不过 Nmon 对一个 Linux 新手来说还是很友好的。如果你有什么问题，尽管评论。</p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"111587\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"111587votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"111587\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 1 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i>  评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "publish_date": "2017/06/27", "comment_nums": 0, "remote_img_url": ["https://dn-linuxcn.qbox.me/data/attachment/album/201601/14/063604jy0wkkuvz8jnzss8.png"], "title": "使用 Nmon 监控 Linux 的系统性能", "local_img_url": ["f"]},{"praise_nums": "1", "fav_nums": "1", "tags": "IT技术,Linux", "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">原文出处： <a ref=\"nofollow\" target=\"_blank\" href=\"https://www.tecmint.com/understand-linux-load-averages-and-monitor-performance/\">Aaron Kili </a>   译文出处：<a target=\"_blank\" href=\"https://linux.cn/article-8632-1.html\">Linux中国 / kylecao</a>   </div><p>在本文中，我们将解释 Linux 系统中最关键的管理任务之一——关于系统 / CPU 的负载和平均负载的性能监控。</p>\n<p>首先来看所有的类 UNIX 系统中两个重要的表述:</p>\n<ul>\n<li>系统负载 / CPU 负载 – 衡量 Linux 系统的 CPU 过载或利用率低的指标，即处于运算状态或等待状态的 CPU 核心数。</li>\n<li>平均负载 – 通过固定的时间周期如 1、5、15 分钟计算出的平均的系统负载。</li>\n</ul>\n<p>Linux 中，平均负载一般指在内核运行队列中被标记为运行或不可打断状态的进程的平均数。</p>\n<p>注意：</p>\n<ul>\n<li>几乎没有 Linux 或类 Unix 系统不为用户展示平均负载的值。</li>\n<li>完全空闲的 Linux 系统平均负载为 0，不包括空闲进程。</li>\n<li>绝大多数类 Unix 系统只统计运行和等待状态的进程。但是在 Linux 中，平均负载也包括处于不可打断的睡眠状态的进程——它们是在等待其它系统资源如磁盘 I/O 等的进程。</li>\n</ul>\n<h3 id=\"toc_1\">如何监测 Linux 系统平均负载</h3>\n<p>有诸多方式监测系统平均负载，如 <code>uptime</code>，它会展示系统运行时间、用户数量及平均负载：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59531edd77098636153397\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ uptime\r\n07:13:53 up 8 days, 19 min,  1 user,  load average: 1.98, 2.15, 2.21</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59531edd77098636153397-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59531edd77098636153397-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59531edd77098636153397-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">uptime</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59531edd77098636153397-2\"><span class=\"crayon-cn\">07</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">13</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">53</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">up</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">8</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">days</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">19</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">min</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">1</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">user</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\">  </span><span class=\"crayon-e\">load </span><span class=\"crayon-v\">average</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1.98</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2.15</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2.21</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0010 seconds] -->\r\n<p>平均负载的数字从左到右的含义依次为:</p>\n<ul>\n<li>最近 1 分钟的平均负载为 1.98</li>\n<li>最近 5 分钟的平均负载为 2.15</li>\n<li>最近 15 分钟的平均负载为 2.21</li>\n</ul>\n<p>高平均负载意味着系统是过载的：许多进程在等待 CPU 时间。</p>\n<p>下一节将介绍平均负载和 CPU 核数的关系。此外，常用的工具 <a href=\"https://www.tecmint.com/12-top-command-examples-in-linux/\">top</a> 和 <a href=\"https://linux.cn/article-6882-1.html\">glances</a> 可以实时显示 Linux 系统的运行状态：</p>\n<h4 id=\"toc_2\">Top命令</h4>\n<p></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59531edd770a2073942619\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ top</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59531edd770a2073942619-1\">1</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59531edd770a2073942619-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">top</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0003 seconds] -->\r\n<p>显示运行中的Linux进程：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59531edd770a7736951971\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-mixed-highlight\" title=\"含多种语言\"></span><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\ntop - 12:51:42 up  2:11,  1 user,  load average: 1.22, 1.12, 1.26\r\nTasks: 243 total,   1 running, 242 sleeping,   0 stopped,   0 zombie\r\n%Cpu(s): 17.4 us,  2.9 sy,  0.3 ni, 74.8 id,  4.6 wa,  0.0 hi,  0.0 si,  0.0 st\r\nKiB Mem :  8069036 total,   388060 free,  4381184 used,  3299792 buff/cache\r\nKiB Swap:  3906556 total,  3901876 free,     4680 used.  2807464 avail Mem \r\nPID USER      PR  NI    VIRT    RES    SHR S  %CPU %MEM     TIME+ COMMAND                                                                                                                                        \r\n6265 tecmint   20   0 1244348 170680  83616 S  13.3  2.1   6:47.72 Headset                                                                                                                                        \r\n2301 tecmint    9 -11  640332  13344   9932 S   6.7  0.2   2:18.96 pulseaudio                                                                                                                                     \r\n2459 tecmint   20   0 1707692 315628  62992 S   6.7  3.9   6:55.45 cinnamon                                                                                                                                       \r\n2957 tecmint   20   0 2644644 1.035g 137968 S   6.7 13.5  50:11.13 firefox                                                                                                                                        \r\n3208 tecmint   20   0  507060  52136  33152 S   6.7  0.6   0:04.34 gnome-terminal-                                                                                                                                \r\n3272 tecmint   20   0 1521380 391324 178348 S   6.7  4.8   6:21.01 chrome                                                                                                                                         \r\n6220 tecmint   20   0 1595392 106964  76836 S   6.7  1.3   3:31.94 Headset                                                                                                                                        \r\n1 root      20   0  120056   6204   3964 S   0.0  0.1   0:01.83 systemd                                                                                                                                        \r\n2 root      20   0       0      0      0 S   0.0  0.0   0:00.00 kthreadd                                                                                                                                       \r\n3 root      20   0       0      0      0 S   0.0  0.0   0:00.10 ksoftirqd/0                                                                                                                                    \r\n5 root       0 -20       0      0      0 S   0.0  0.0   0:00.00 kworker/0:0H   \r\n....</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59531edd770a7736951971-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59531edd770a7736951971-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-59531edd770a7736951971-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59531edd770a7736951971-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-59531edd770a7736951971-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59531edd770a7736951971-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-59531edd770a7736951971-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59531edd770a7736951971-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-59531edd770a7736951971-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59531edd770a7736951971-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-59531edd770a7736951971-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59531edd770a7736951971-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-59531edd770a7736951971-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59531edd770a7736951971-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-59531edd770a7736951971-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59531edd770a7736951971-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-59531edd770a7736951971-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59531edd770a7736951971-18\">18</div><div class=\"crayon-num\" data-line=\"crayon-59531edd770a7736951971-19\">19</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59531edd770a7736951971-1\"><span class=\"crayon-v\">top</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">12</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">51</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">42</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">up</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">2</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">11</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">1</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">user</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\">  </span><span class=\"crayon-e\">load </span><span class=\"crayon-v\">average</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1.22</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1.12</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1.26</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59531edd770a7736951971-2\"><span class=\"crayon-v\">Tasks</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">243</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">total</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\">   </span><span class=\"crayon-cn\">1</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">running</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">242</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">sleeping</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\">   </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">stopped</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\">   </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">zombie</span></div><div class=\"crayon-line\" id=\"crayon-59531edd770a7736951971-3\"><span class=\"crayon-ta\">%</span><span class=\"crayon-e\">Cpu</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">s</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">17.4</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">us</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">2.9</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">sy</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.3</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">ni</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">74.8</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">id</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">4.6</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">wa</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.0</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">hi</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.0</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">si</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.0</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">st</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59531edd770a7736951971-4\"> </div><div class=\"crayon-line\" id=\"crayon-59531edd770a7736951971-5\"><span class=\"crayon-e\">KiB </span><span class=\"crayon-v\">Mem</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">:</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">8069036</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">total</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\">   </span><span class=\"crayon-cn\">388060</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">free</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">4381184</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">used</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">3299792</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">buff</span><span class=\"crayon-o\">/</span><span class=\"crayon-e\">cache</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59531edd770a7736951971-6\"><span class=\"crayon-e\">KiB </span><span class=\"crayon-v\">Swap</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">3906556</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">total</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">3901876</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">free</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\">     </span><span class=\"crayon-cn\">4680</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">used</span><span class=\"crayon-sy\">.</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">2807464</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">avail </span><span class=\"crayon-e\">Mem </span></div><div class=\"crayon-line\" id=\"crayon-59531edd770a7736951971-7\"><span class=\"crayon-e\">PID </span><span class=\"crayon-e\">USER      </span><span class=\"crayon-e\">PR  </span><span class=\"crayon-e\">NI    </span><span class=\"crayon-e\">VIRT    </span><span class=\"crayon-e\">RES    </span><span class=\"crayon-i\">SHR</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">S</span><span class=\"crayon-h\">  </span><span class=\"crayon-o\">%</span><span class=\"crayon-v\">CPU</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">%</span><span class=\"crayon-e\">MEM     </span><span class=\"crayon-v\">TIME</span><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">COMMAND</span><span class=\"crayon-h\">                                                                                                                                        </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59531edd770a7736951971-8\"><span class=\"crayon-cn\">6265</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">tecmint</span><span class=\"crayon-h\">   </span><span class=\"crayon-cn\">20</span><span class=\"crayon-h\">   </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1244348</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">170680</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">83616</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">S</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">13.3</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">2.1</span><span class=\"crayon-h\">   </span><span class=\"crayon-cn\">6</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">47.72</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">Headset</span><span class=\"crayon-h\">                                                                                                                                        </span></div><div class=\"crayon-line\" id=\"crayon-59531edd770a7736951971-9\"><span class=\"crayon-cn\">2301</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">tecmint</span><span class=\"crayon-h\">    </span><span class=\"crayon-cn\">9</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">11</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">640332</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">13344</span><span class=\"crayon-h\">   </span><span class=\"crayon-cn\">9932</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">S</span><span class=\"crayon-h\">   </span><span class=\"crayon-cn\">6.7</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.2</span><span class=\"crayon-h\">   </span><span class=\"crayon-cn\">2</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">18.96</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">pulseaudio</span><span class=\"crayon-h\">                                                                                                                                     </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59531edd770a7736951971-10\"><span class=\"crayon-cn\">2459</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">tecmint</span><span class=\"crayon-h\">   </span><span class=\"crayon-cn\">20</span><span class=\"crayon-h\">   </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1707692</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">315628</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">62992</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">S</span><span class=\"crayon-h\">   </span><span class=\"crayon-cn\">6.7</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">3.9</span><span class=\"crayon-h\">   </span><span class=\"crayon-cn\">6</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">55.45</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">cinnamon</span><span class=\"crayon-h\">                                                                                                                                       </span></div><div class=\"crayon-line\" id=\"crayon-59531edd770a7736951971-11\"><span class=\"crayon-cn\">2957</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">tecmint</span><span class=\"crayon-h\">   </span><span class=\"crayon-cn\">20</span><span class=\"crayon-h\">   </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2644644</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1.035g</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">137968</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">S</span><span class=\"crayon-h\">   </span><span class=\"crayon-cn\">6.7</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">13.5</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">50</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">11.13</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">firefox</span><span class=\"crayon-h\">                                                                                                                                        </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59531edd770a7736951971-12\"><span class=\"crayon-cn\">3208</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">tecmint</span><span class=\"crayon-h\">   </span><span class=\"crayon-cn\">20</span><span class=\"crayon-h\">   </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">507060</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">52136</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">33152</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">S</span><span class=\"crayon-h\">   </span><span class=\"crayon-cn\">6.7</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.6</span><span class=\"crayon-h\">   </span><span class=\"crayon-cn\">0</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">04.34</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">gnome</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">terminal</span><span class=\"crayon-o\">-</span><span class=\"crayon-h\">                                                                                                                                </span></div><div class=\"crayon-line\" id=\"crayon-59531edd770a7736951971-13\"><span class=\"crayon-cn\">3272</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">tecmint</span><span class=\"crayon-h\">   </span><span class=\"crayon-cn\">20</span><span class=\"crayon-h\">   </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1521380</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">391324</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">178348</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">S</span><span class=\"crayon-h\">   </span><span class=\"crayon-cn\">6.7</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">4.8</span><span class=\"crayon-h\">   </span><span class=\"crayon-cn\">6</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">21.01</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">chrome</span><span class=\"crayon-h\">                                                                                                                                         </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59531edd770a7736951971-14\"><span class=\"crayon-cn\">6220</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">tecmint</span><span class=\"crayon-h\">   </span><span class=\"crayon-cn\">20</span><span class=\"crayon-h\">   </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1595392</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">106964</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">76836</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">S</span><span class=\"crayon-h\">   </span><span class=\"crayon-cn\">6.7</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">1.3</span><span class=\"crayon-h\">   </span><span class=\"crayon-cn\">3</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">31.94</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">Headset</span><span class=\"crayon-h\">                                                                                                                                        </span></div><div class=\"crayon-line\" id=\"crayon-59531edd770a7736951971-15\"><span class=\"crayon-cn\">1</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">root</span><span class=\"crayon-h\">      </span><span class=\"crayon-cn\">20</span><span class=\"crayon-h\">   </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">120056</span><span class=\"crayon-h\">   </span><span class=\"crayon-cn\">6204</span><span class=\"crayon-h\">   </span><span class=\"crayon-cn\">3964</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">S</span><span class=\"crayon-h\">   </span><span class=\"crayon-cn\">0.0</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.1</span><span class=\"crayon-h\">   </span><span class=\"crayon-cn\">0</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">01.83</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">systemd</span><span class=\"crayon-h\">                                                                                                                                        </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59531edd770a7736951971-16\"><span class=\"crayon-cn\">2</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">root</span><span class=\"crayon-h\">      </span><span class=\"crayon-cn\">20</span><span class=\"crayon-h\">   </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\">       </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\">      </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\">      </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">S</span><span class=\"crayon-h\">   </span><span class=\"crayon-cn\">0.0</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.0</span><span class=\"crayon-h\">   </span><span class=\"crayon-cn\">0</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">00.00</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">kthreadd</span><span class=\"crayon-h\">                                                                                                                                       </span></div><div class=\"crayon-line\" id=\"crayon-59531edd770a7736951971-17\"><span class=\"crayon-cn\">3</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">root</span><span class=\"crayon-h\">      </span><span class=\"crayon-cn\">20</span><span class=\"crayon-h\">   </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\">       </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\">      </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\">      </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">S</span><span class=\"crayon-h\">   </span><span class=\"crayon-cn\">0.0</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.0</span><span class=\"crayon-h\">   </span><span class=\"crayon-cn\">0</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">00.10</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">ksoftirqd</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\">                                                                                                                                    </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59531edd770a7736951971-18\"><span class=\"crayon-cn\">5</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">root</span><span class=\"crayon-h\">       </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">20</span><span class=\"crayon-h\">       </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\">      </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\">      </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">S</span><span class=\"crayon-h\">   </span><span class=\"crayon-cn\">0.0</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.0</span><span class=\"crayon-h\">   </span><span class=\"crayon-cn\">0</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">00.00</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">kworker</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">0</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">0H</span><span class=\"crayon-h\">   </span></div><div class=\"crayon-line\" id=\"crayon-59531edd770a7736951971-19\"><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0129 seconds] -->\r\n<p></p>\n<h4 id=\"toc_3\">Glances 工具</h4>\n<p></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59531edd770ac514964638\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ glances</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59531edd770ac514964638-1\">1</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59531edd770ac514964638-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">glances</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0003 seconds] -->\r\n<p>Glances – Linux系统监测工具：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59531edd770b0515929616\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nTecMint (LinuxMint 18 64bit / Linux 4.4.0-21-generic)                                                                                                                                               Uptime: 2:16:06\r\nCPU      16.4%  nice:     0.1%                                        LOAD    4-core                                        MEM     60.5%  active:    4.90G                                        SWAP      0.1%\r\nuser:    10.2%  irq:      0.0%                                        1 min:    1.20                                        total:  7.70G  inactive:  2.07G                                        total:   3.73G\r\nsystem:   3.4%  iowait:   2.7%                                        5 min:    1.16                                        used:   4.66G  buffers:    242M                                        used:    4.57M\r\nidle:    83.6%  steal:    0.0%                                        15 min:   1.24                                        free:   3.04G  cached:    2.58G                                        free:    3.72G\r\nNETWORK     Rx/s   Tx/s   TASKS 253 (883 thr), 1 run, 252 slp, 0 oth sorted automatically by cpu_percent, flat view\r\nenp1s0     525Kb   31Kb\r\nlo           2Kb    2Kb     CPU%  MEM%  VIRT   RES   PID USER        NI S    TIME+ IOR/s IOW/s Command \r\nwlp2s0        0b     0b     14.6  13.3 2.53G 1.03G  2957 tecmint      0 S 51:49.10     0   40K /usr/lib/firefox/firefox \r\n7.4   2.2 1.16G  176M  6265 tecmint      0 S  7:08.18     0     0 /usr/lib/Headset/Headset --type=renderer --no-sandbox --primordial-pipe-token=879B36514C6BEDB183D3E4142774D1DF --lan\r\nDISK I/O     R/s    W/s      4.9   3.9 1.63G  310M  2459 tecmint      0 R  7:12.18     0     0 cinnamon --replace\r\nram0           0      0      4.2   0.2  625M 13.0M  2301 tecmint    -11 S  2:29.72     0     0 /usr/bin/pulseaudio --start --log-target=syslog\r\nram1           0      0      4.2   1.3 1.52G  105M  6220 tecmint      0 S  3:42.64     0     0 /usr/lib/Headset/Headset \r\nram10          0      0      2.9   0.8  409M 66.7M  6240 tecmint      0 S  2:40.44     0     0 /usr/lib/Headset/Headset --type=gpu-process --no-sandbox --supports-dual-gpus=false --gpu-driver-bug-workarounds=7,2\r\nram11          0      0      2.9   1.8  531M  142M  1690 root         0 S  6:03.79     0     0 /usr/lib/xorg/Xorg :0 -audit 0 -auth /var/lib/mdm/:0.Xauth -nolisten tcp vt8\r\nram12          0      0      2.6   0.3 79.3M 23.8M  9651 tecmint      0 R  0:00.71     0     0 /usr/bin/python3 /usr/bin/glances\r\nram13          0      0      1.6   4.8 1.45G  382M  3272 tecmint      0 S  6:25.30     0    4K /opt/google/chrome/chrome \r\n...</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59531edd770b0515929616-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59531edd770b0515929616-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-59531edd770b0515929616-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59531edd770b0515929616-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-59531edd770b0515929616-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59531edd770b0515929616-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-59531edd770b0515929616-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59531edd770b0515929616-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-59531edd770b0515929616-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59531edd770b0515929616-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-59531edd770b0515929616-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59531edd770b0515929616-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-59531edd770b0515929616-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59531edd770b0515929616-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-59531edd770b0515929616-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59531edd770b0515929616-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-59531edd770b0515929616-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59531edd770b0515929616-18\">18</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59531edd770b0515929616-1\"><span class=\"crayon-e\">TecMint</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-i\">LinuxMint</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">18</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">64bit</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">Linux</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">4.4.0</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">21</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">generic</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">                                                                                                                                               </span><span class=\"crayon-v\">Uptime</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">16</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">06</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59531edd770b0515929616-2\"><span class=\"crayon-i\">CPU</span><span class=\"crayon-h\">      </span><span class=\"crayon-cn\">16.4</span><span class=\"crayon-o\">%</span><span class=\"crayon-h\">  </span><span class=\"crayon-v\">nice</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\">     </span><span class=\"crayon-cn\">0.1</span><span class=\"crayon-o\">%</span><span class=\"crayon-h\">                                        </span><span class=\"crayon-i\">LOAD</span><span class=\"crayon-h\">    </span><span class=\"crayon-cn\">4</span><span class=\"crayon-o\">-</span><span class=\"crayon-e\">core                                        </span><span class=\"crayon-i\">MEM</span><span class=\"crayon-h\">     </span><span class=\"crayon-cn\">60.5</span><span class=\"crayon-o\">%</span><span class=\"crayon-h\">  </span><span class=\"crayon-v\">active</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\">    </span><span class=\"crayon-cn\">4.90G</span><span class=\"crayon-h\">                                        </span><span class=\"crayon-i\">SWAP</span><span class=\"crayon-h\">      </span><span class=\"crayon-cn\">0.1</span><span class=\"crayon-o\">%</span></div><div class=\"crayon-line\" id=\"crayon-59531edd770b0515929616-3\"><span class=\"crayon-v\">user</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\">    </span><span class=\"crayon-cn\">10.2</span><span class=\"crayon-o\">%</span><span class=\"crayon-h\">  </span><span class=\"crayon-v\">irq</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\">      </span><span class=\"crayon-cn\">0.0</span><span class=\"crayon-o\">%</span><span class=\"crayon-h\">                                        </span><span class=\"crayon-cn\">1</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">min</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\">    </span><span class=\"crayon-cn\">1.20</span><span class=\"crayon-h\">                                        </span><span class=\"crayon-v\">total</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">7.70G</span><span class=\"crayon-h\">  </span><span class=\"crayon-v\">inactive</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">2.07G</span><span class=\"crayon-h\">                                        </span><span class=\"crayon-v\">total</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\">   </span><span class=\"crayon-cn\">3.73G</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59531edd770b0515929616-4\"><span class=\"crayon-v\">system</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\">   </span><span class=\"crayon-cn\">3.4</span><span class=\"crayon-o\">%</span><span class=\"crayon-h\">  </span><span class=\"crayon-v\">iowait</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\">   </span><span class=\"crayon-cn\">2.7</span><span class=\"crayon-o\">%</span><span class=\"crayon-h\">                                        </span><span class=\"crayon-cn\">5</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">min</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\">    </span><span class=\"crayon-cn\">1.16</span><span class=\"crayon-h\">                                        </span><span class=\"crayon-v\">used</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\">   </span><span class=\"crayon-cn\">4.66G</span><span class=\"crayon-h\">  </span><span class=\"crayon-v\">buffers</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\">    </span><span class=\"crayon-cn\">242M</span><span class=\"crayon-h\">                                        </span><span class=\"crayon-v\">used</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\">    </span><span class=\"crayon-cn\">4.57M</span></div><div class=\"crayon-line\" id=\"crayon-59531edd770b0515929616-5\"><span class=\"crayon-v\">idle</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\">    </span><span class=\"crayon-cn\">83.6</span><span class=\"crayon-o\">%</span><span class=\"crayon-h\">  </span><span class=\"crayon-v\">steal</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\">    </span><span class=\"crayon-cn\">0.0</span><span class=\"crayon-o\">%</span><span class=\"crayon-h\">                                        </span><span class=\"crayon-cn\">15</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">min</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\">   </span><span class=\"crayon-cn\">1.24</span><span class=\"crayon-h\">                                        </span><span class=\"crayon-v\">free</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\">   </span><span class=\"crayon-cn\">3.04G</span><span class=\"crayon-h\">  </span><span class=\"crayon-v\">cached</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\">    </span><span class=\"crayon-cn\">2.58G</span><span class=\"crayon-h\">                                        </span><span class=\"crayon-v\">free</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\">    </span><span class=\"crayon-cn\">3.72G</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59531edd770b0515929616-6\"><span class=\"crayon-e\">NETWORK     </span><span class=\"crayon-v\">Rx</span><span class=\"crayon-o\">/</span><span class=\"crayon-i\">s</span><span class=\"crayon-h\">   </span><span class=\"crayon-v\">Tx</span><span class=\"crayon-o\">/</span><span class=\"crayon-i\">s</span><span class=\"crayon-h\">   </span><span class=\"crayon-i\">TASKS</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">253</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">883</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">thr</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">run</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">252</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">slp</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">oth </span><span class=\"crayon-e\">sorted </span><span class=\"crayon-e\">automatically </span><span class=\"crayon-e\">by </span><span class=\"crayon-v\">cpu_percent</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">flat </span><span class=\"crayon-e\">view</span></div><div class=\"crayon-line\" id=\"crayon-59531edd770b0515929616-7\"><span class=\"crayon-i\">enp1s0</span><span class=\"crayon-h\">     </span><span class=\"crayon-cn\">525Kb</span><span class=\"crayon-h\">   </span><span class=\"crayon-cn\">31Kb</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59531edd770b0515929616-8\"><span class=\"crayon-i\">lo</span><span class=\"crayon-h\">           </span><span class=\"crayon-cn\">2Kb</span><span class=\"crayon-h\">    </span><span class=\"crayon-cn\">2Kb</span><span class=\"crayon-h\">     </span><span class=\"crayon-v\">CPU</span><span class=\"crayon-o\">%</span><span class=\"crayon-h\">  </span><span class=\"crayon-v\">MEM</span><span class=\"crayon-o\">%</span><span class=\"crayon-h\">  </span><span class=\"crayon-e\">VIRT   </span><span class=\"crayon-e\">RES   </span><span class=\"crayon-e\">PID </span><span class=\"crayon-e\">USER        </span><span class=\"crayon-i\">NI</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">S</span><span class=\"crayon-h\">    </span><span class=\"crayon-v\">TIME</span><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">IOR</span><span class=\"crayon-o\">/</span><span class=\"crayon-i\">s</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">IOW</span><span class=\"crayon-o\">/</span><span class=\"crayon-i\">s</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Command </span></div><div class=\"crayon-line\" id=\"crayon-59531edd770b0515929616-9\"><span class=\"crayon-i\">wlp2s0</span><span class=\"crayon-h\">        </span><span class=\"crayon-cn\">0b</span><span class=\"crayon-h\">     </span><span class=\"crayon-cn\">0b</span><span class=\"crayon-h\">     </span><span class=\"crayon-cn\">14.6</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">13.3</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2.53G</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1.03G</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">2957</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">tecmint</span><span class=\"crayon-h\">      </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">S</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">51</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">49.10</span><span class=\"crayon-h\">     </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\">   </span><span class=\"crayon-cn\">40K</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">usr</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">lib</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">firefox</span><span class=\"crayon-o\">/</span><span class=\"crayon-i\">firefox</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59531edd770b0515929616-10\"><span class=\"crayon-cn\">7.4</span><span class=\"crayon-h\">   </span><span class=\"crayon-cn\">2.2</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1.16G</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">176M</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">6265</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">tecmint</span><span class=\"crayon-h\">      </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">S</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">7</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">08.18</span><span class=\"crayon-h\">     </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\">     </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">usr</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">lib</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">Headset</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">Headset</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">--</span><span class=\"crayon-v\">type</span><span class=\"crayon-o\">=</span><span class=\"crayon-v\">renderer</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">--</span><span class=\"crayon-v\">no</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">sandbox</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">--</span><span class=\"crayon-v\">primordial</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">pipe</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">token</span><span class=\"crayon-o\">=</span><span class=\"crayon-cn\">879B36514C6BEDB183D3E4142774D1DF</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">--</span><span class=\"crayon-e\">lan</span></div><div class=\"crayon-line\" id=\"crayon-59531edd770b0515929616-11\"><span class=\"crayon-i\">DISK</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">I</span><span class=\"crayon-o\">/</span><span class=\"crayon-i\">O</span><span class=\"crayon-h\">     </span><span class=\"crayon-v\">R</span><span class=\"crayon-o\">/</span><span class=\"crayon-i\">s</span><span class=\"crayon-h\">    </span><span class=\"crayon-v\">W</span><span class=\"crayon-o\">/</span><span class=\"crayon-i\">s</span><span class=\"crayon-h\">      </span><span class=\"crayon-cn\">4.9</span><span class=\"crayon-h\">   </span><span class=\"crayon-cn\">3.9</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1.63G</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">310M</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">2459</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">tecmint</span><span class=\"crayon-h\">      </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">R</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">7</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">12.18</span><span class=\"crayon-h\">     </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\">     </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">cinnamon</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">--</span><span class=\"crayon-e\">replace</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59531edd770b0515929616-12\"><span class=\"crayon-i\">ram0</span><span class=\"crayon-h\">           </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\">      </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\">      </span><span class=\"crayon-cn\">4.2</span><span class=\"crayon-h\">   </span><span class=\"crayon-cn\">0.2</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">625M</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">13.0M</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">2301</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">tecmint</span><span class=\"crayon-h\">    </span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">11</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">S</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">2</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">29.72</span><span class=\"crayon-h\">     </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\">     </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">usr</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">bin</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">pulseaudio</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">--</span><span class=\"crayon-v\">start</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">--</span><span class=\"crayon-v\">log</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">target</span><span class=\"crayon-o\">=</span><span class=\"crayon-e\">syslog</span></div><div class=\"crayon-line\" id=\"crayon-59531edd770b0515929616-13\"><span class=\"crayon-i\">ram1</span><span class=\"crayon-h\">           </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\">      </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\">      </span><span class=\"crayon-cn\">4.2</span><span class=\"crayon-h\">   </span><span class=\"crayon-cn\">1.3</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1.52G</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">105M</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">6220</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">tecmint</span><span class=\"crayon-h\">      </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">S</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">3</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">42.64</span><span class=\"crayon-h\">     </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\">     </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">usr</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">lib</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">Headset</span><span class=\"crayon-o\">/</span><span class=\"crayon-e\">Headset </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59531edd770b0515929616-14\"><span class=\"crayon-i\">ram10</span><span class=\"crayon-h\">          </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\">      </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\">      </span><span class=\"crayon-cn\">2.9</span><span class=\"crayon-h\">   </span><span class=\"crayon-cn\">0.8</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">409M</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">66.7M</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">6240</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">tecmint</span><span class=\"crayon-h\">      </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">S</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">2</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">40.44</span><span class=\"crayon-h\">     </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\">     </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">usr</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">lib</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">Headset</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">Headset</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">--</span><span class=\"crayon-v\">type</span><span class=\"crayon-o\">=</span><span class=\"crayon-v\">gpu</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">process</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">--</span><span class=\"crayon-v\">no</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">sandbox</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">--</span><span class=\"crayon-v\">supports</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">dual</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">gpus</span><span class=\"crayon-o\">=</span><span class=\"crayon-t\">false</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">--</span><span class=\"crayon-v\">gpu</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">driver</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">bug</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">workarounds</span><span class=\"crayon-o\">=</span><span class=\"crayon-cn\">7</span><span class=\"crayon-sy\">,</span><span class=\"crayon-cn\">2</span></div><div class=\"crayon-line\" id=\"crayon-59531edd770b0515929616-15\"><span class=\"crayon-i\">ram11</span><span class=\"crayon-h\">          </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\">      </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\">      </span><span class=\"crayon-cn\">2.9</span><span class=\"crayon-h\">   </span><span class=\"crayon-cn\">1.8</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">531M</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">142M</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">1690</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">root</span><span class=\"crayon-h\">         </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">S</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">6</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">03.79</span><span class=\"crayon-h\">     </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\">     </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">usr</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">lib</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">xorg</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">Xorg</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">audit</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">auth</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-t\">var</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">lib</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">mdm</span><span class=\"crayon-o\">/</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">0.Xauth</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-e\">nolisten </span><span class=\"crayon-e\">tcp </span><span class=\"crayon-e\">vt8</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59531edd770b0515929616-16\"><span class=\"crayon-i\">ram12</span><span class=\"crayon-h\">          </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\">      </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\">      </span><span class=\"crayon-cn\">2.6</span><span class=\"crayon-h\">   </span><span class=\"crayon-cn\">0.3</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">79.3M</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">23.8M</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">9651</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">tecmint</span><span class=\"crayon-h\">      </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">R</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">00.71</span><span class=\"crayon-h\">     </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\">     </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">usr</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">bin</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">python3</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">usr</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">bin</span><span class=\"crayon-o\">/</span><span class=\"crayon-e\">glances</span></div><div class=\"crayon-line\" id=\"crayon-59531edd770b0515929616-17\"><span class=\"crayon-i\">ram13</span><span class=\"crayon-h\">          </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\">      </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\">      </span><span class=\"crayon-cn\">1.6</span><span class=\"crayon-h\">   </span><span class=\"crayon-cn\">4.8</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1.45G</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">382M</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">3272</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">tecmint</span><span class=\"crayon-h\">      </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">S</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">6</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">25.30</span><span class=\"crayon-h\">     </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\">    </span><span class=\"crayon-cn\">4K</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">opt</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">google</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">chrome</span><span class=\"crayon-o\">/</span><span class=\"crayon-i\">chrome</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59531edd770b0515929616-18\"><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0130 seconds] -->\r\n<p>这些工具中的平均负载是从 <code>/proc/loadavg</code> 文件中读取的，也可以直接使用 <a href=\"https://www.tecmint.com/13-basic-cat-command-examples-in-linux/\">cat 命令</a>查看：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59531edd770b5466741373\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ cat /proc/loadavg\r\n2.48 1.69 1.42 5/889 10570</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59531edd770b5466741373-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59531edd770b5466741373-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59531edd770b5466741373-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">cat</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">proc</span><span class=\"crayon-o\">/</span><span class=\"crayon-i\">loadavg</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59531edd770b5466741373-2\"><span class=\"crayon-cn\">2.48</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1.69</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1.42</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">5</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">889</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">10570</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0006 seconds] -->\r\n<p>在桌面计算机中，可以使用图形用户接口工具查看系统平均负载。</p>\n<h3 id=\"toc_4\">理解系统平均负载和 CPU 核心数的关系</h3>\n<p>考虑了 CPU 核心数的影响，才能解释系统负载。</p>\n<h4 id=\"toc_5\">多处理器 Vs 多核处理器</h4>\n<ul>\n<li>多处理器 – 一个计算机系统中集成两个或多个物理 CPU</li>\n<li>多核处理器 – 单个物理 CPU 有两个或多个单独的核并行工作（也叫处理单元）。双核意味着有两个处理单元，4 核有 4 个处理单元，以此类推。</li>\n</ul>\n<p>此外，Intel 引入了超线程技术用来提高并行计算能力。</p>\n<p>通过超线程技术，在操作系统中，单个物理 CPU 表现的和两个逻辑 CPU 一样。（实际在硬件上只有一个 CPU）。</p>\n<p>注意，单个 CPU 核同一时间只能执行一个任务，于是产生了多 CPU/处理器、多核 CPU，以及多线程技术。</p>\n<p>多 CPU 时，多个程序可以同时执行。如今的 Intel CPU 使用了多核心和超线程技术。</p>\n<p>可以使用 <a href=\"https://www.tecmint.com/check-linux-cpu-information/\">nproc 或 lscpu 命令</a>查看系统中的处理器单元数量。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59531edd770b9362259896\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ nproc\r\n4\r\n# 或者\r\nlscpu</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59531edd770b9362259896-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59531edd770b9362259896-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-59531edd770b9362259896-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59531edd770b9362259896-4\">4</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59531edd770b9362259896-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">nproc</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59531edd770b9362259896-2\"><span class=\"crayon-cn\">4</span></div><div class=\"crayon-line\" id=\"crayon-59531edd770b9362259896-3\"><span class=\"crayon-p\"># 或者</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59531edd770b9362259896-4\"><span class=\"crayon-v\">lscpu</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0004 seconds] -->\r\n<p>也可以使用 <a href=\"https://www.tecmint.com/12-practical-examples-of-linux-grep-command/\">grep 命令</a>：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59531edd770bd464825539\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ grep 'model name' /proc/cpuinfo | wc -l\r\n4</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59531edd770bd464825539-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59531edd770bd464825539-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59531edd770bd464825539-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">grep</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'model name'</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">proc</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">cpuinfo</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">wc</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">l</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59531edd770bd464825539-2\"><span class=\"crayon-cn\">4</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0006 seconds] -->\r\n<p>为了进一步理解系统负载，需要做一些假设。假设系统负载如下：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59531edd770c0995987149\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n23:16:49 up  10:49,  5 user,  load average: 1.00, 0.40, 3.35</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59531edd770c0995987149-1\">1</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59531edd770c0995987149-1\"><span class=\"crayon-cn\">23</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">16</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">49</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">up</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">10</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">49</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">5</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">user</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\">  </span><span class=\"crayon-e\">load </span><span class=\"crayon-v\">average</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1.00</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0.40</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">3.35</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0008 seconds] -->\r\n<p><strong>在单核系统中意味着：</strong></p>\n<ul>\n<li>CPU 被充分利用（100%）；最近的 1 分钟有 1 个进程在运行。</li>\n<li>CPU 有 60% 处于空闲状态；在最近的 5 分钟没有进程等待 CPU 时间。</li>\n<li>CPU 平均过载了 235%；最近的 15 分钟平均有 2.35 个进程在等待 CPU 时间。</li>\n</ul>\n<p><strong>在双核系统中意味着：</strong></p>\n<ul>\n<li>有一个 CPU 处于完全空闲状态，另一个 CPU 被使用；最近的 1 分钟没有进程等待 CPU 时间。</li>\n<li>CPU 平均 160% 处于空闲状态；最近的 5 分钟没有进程等待 CPU 时间。</li>\n<li>CPU 平均过载了 135%；最近的 15 分钟有 1.35 个进程等待 CPU 时间。</li>\n</ul>\n<p>总而言之，如果你是系统管理员，你应该关注高的平均负载。平均负载高于 CPU 核心数意味着需要增加 CPU，反之则意味着 CPU 未被充分利用。</p>\n<p> </p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"111590\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"111590votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"111590\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 1 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i>  评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "publish_date": "2017/06/27", "comment_nums": 0, "remote_img_url": ["http://jbcdn2.b0.upaiyun.com/2015/10/478116e0d2ac0c766a25a7c5d7252167.jpg"], "title": "理解 Linux 的平均负载和性能监控", "local_img_url": ["f"]},{"praise_nums": "1", "fav_nums": "6", "tags": "IT技术,Bash,Linux", "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">原文出处： <a ref=\"nofollow\" target=\"_blank\" href=\"https://www.tecmint.com/useful-tips-for-writing-bash-scripts-in-linux/\">Aaron Kili</a>   译文出处：<a target=\"_blank\" href=\"https://linux.cn/article-8618-1.html\">Linux中国/ch-cn</a>   </div><p>Shell 脚本编程 是你在 Linux 下学习或练习编程的最简单的方式。尤其对 系统管理员要处理着自动化任务，且要开发新的简单的实用程序或工具等（这里只是仅举几例）更是必备技能。</p>\n<p>本文中，我们将分享 10 个写出高效可靠的 bash 脚本的实用技巧，它们包括：</p>\n<h3 id=\"toc_1\">1、 脚本中多写注释</h3>\n<p>这是不仅可应用于 shell 脚本程序中，也可用在其他所有类型的编程中的一种推荐做法。在脚本中作注释能帮你或别人翻阅你的脚本时了解脚本的不同部分所做的工作。</p>\n<p>对于刚入门的人来说，注释用 <code>#</code> 号来定义。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59534275a3ce4371602744\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n# TecMint 是浏览各类 Linux 文章的最佳站点</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59534275a3ce4371602744-1\">1</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59534275a3ce4371602744-1\"><span class=\"crayon-p\"># TecMint 是浏览各类 Linux 文章的最佳站点</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0004 seconds] -->\r\n<p></p>\n<h3 id=\"toc_2\">2、 当运行失败时使脚本退出</h3>\n<p>有时即使某些命令运行失败，bash 可能继续去执行脚本，这样就影响到脚本的其余部分（会最终导致逻辑错误）。用下面的行的方式在遇到命令失败时来退出脚本执行：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59534275a3cee950555284\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n# 如果命令运行失败让脚本退出执行\r\nset -o errexit \r\n# 或\r\nset -e</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59534275a3cee950555284-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59534275a3cee950555284-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-59534275a3cee950555284-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59534275a3cee950555284-4\">4</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59534275a3cee950555284-1\"><span class=\"crayon-p\"># 如果命令运行失败让脚本退出执行</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59534275a3cee950555284-2\"><span class=\"crayon-v\">set</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">o</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">errexit</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line\" id=\"crayon-59534275a3cee950555284-3\"><span class=\"crayon-p\"># 或</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59534275a3cee950555284-4\"><span class=\"crayon-v\">set</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">e</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0005 seconds] -->\r\n<p></p>\n<h3 id=\"toc_3\">3、 当 Bash 用未声明变量时使脚本退出</h3>\n<p>Bash 也可能会使用能导致起逻辑错误的未声明的变量。因此用下面行的方式去通知 bash 当它尝试去用一个未声明变量时就退出脚本执行：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59534275a3cf2671553925\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n# 若有用未设置的变量即让脚本退出执行\r\nset -o nounset\r\n# 或\r\nset -u</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59534275a3cf2671553925-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59534275a3cf2671553925-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-59534275a3cf2671553925-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59534275a3cf2671553925-4\">4</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59534275a3cf2671553925-1\"><span class=\"crayon-p\"># 若有用未设置的变量即让脚本退出执行</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59534275a3cf2671553925-2\"><span class=\"crayon-v\">set</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">o</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">nounset</span></div><div class=\"crayon-line\" id=\"crayon-59534275a3cf2671553925-3\"><span class=\"crayon-p\"># 或</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59534275a3cf2671553925-4\"><span class=\"crayon-v\">set</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">u</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0005 seconds] -->\r\n<p></p>\n<h3 id=\"toc_4\">4、 使用双引号来引用变量</h3>\n<p>当引用时（使用一个变量的值）用双引号有助于防止由于空格导致单词分割开和由于识别和扩展了通配符而导致的不必要匹配。</p>\n<p>看看下面的例子：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59534275a3cf6573979313\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n#!/bin/bash\r\n# 若命令失败让脚本退出\r\nset -o errexit \r\n# 若未设置的变量被使用让脚本退出\r\nset -o nounset\r\necho \"Names without double quotes\" \r\necho\r\nnames=\"Tecmint FOSSMint Linusay\"\r\nfor name in $names; do\r\n  echo \"$name\"\r\ndone\r\necho\r\necho \"Names with double quotes\" \r\necho\r\nfor name in \"$names\"; do\r\n  echo \"$name\"\r\ndone\r\nexit 0</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59534275a3cf6573979313-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59534275a3cf6573979313-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-59534275a3cf6573979313-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59534275a3cf6573979313-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-59534275a3cf6573979313-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59534275a3cf6573979313-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-59534275a3cf6573979313-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59534275a3cf6573979313-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-59534275a3cf6573979313-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59534275a3cf6573979313-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-59534275a3cf6573979313-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59534275a3cf6573979313-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-59534275a3cf6573979313-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59534275a3cf6573979313-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-59534275a3cf6573979313-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59534275a3cf6573979313-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-59534275a3cf6573979313-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59534275a3cf6573979313-18\">18</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59534275a3cf6573979313-1\"><span class=\"crayon-p\">#!/bin/bash</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59534275a3cf6573979313-2\"><span class=\"crayon-p\"># 若命令失败让脚本退出</span></div><div class=\"crayon-line\" id=\"crayon-59534275a3cf6573979313-3\"><span class=\"crayon-v\">set</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">o</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">errexit</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59534275a3cf6573979313-4\"><span class=\"crayon-p\"># 若未设置的变量被使用让脚本退出</span></div><div class=\"crayon-line\" id=\"crayon-59534275a3cf6573979313-5\"><span class=\"crayon-v\">set</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">o</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">nounset</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59534275a3cf6573979313-6\"><span class=\"crayon-i\">echo</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"Names without double quotes\"</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line\" id=\"crayon-59534275a3cf6573979313-7\"><span class=\"crayon-e\">echo</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59534275a3cf6573979313-8\"><span class=\"crayon-v\">names</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">\"Tecmint FOSSMint Linusay\"</span></div><div class=\"crayon-line\" id=\"crayon-59534275a3cf6573979313-9\"><span class=\"crayon-st\">for</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">name </span><span class=\"crayon-st\">in</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">names</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">do</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59534275a3cf6573979313-10\"><span class=\"crayon-h\">  </span><span class=\"crayon-i\">echo</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"$name\"</span></div><div class=\"crayon-line\" id=\"crayon-59534275a3cf6573979313-11\"><span class=\"crayon-e\">done</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59534275a3cf6573979313-12\"><span class=\"crayon-e\">echo</span></div><div class=\"crayon-line\" id=\"crayon-59534275a3cf6573979313-13\"><span class=\"crayon-i\">echo</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"Names with double quotes\"</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59534275a3cf6573979313-14\"><span class=\"crayon-e\">echo</span></div><div class=\"crayon-line\" id=\"crayon-59534275a3cf6573979313-15\"><span class=\"crayon-st\">for</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">name </span><span class=\"crayon-st\">in</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"$names\"</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">do</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59534275a3cf6573979313-16\"><span class=\"crayon-h\">  </span><span class=\"crayon-i\">echo</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"$name\"</span></div><div class=\"crayon-line\" id=\"crayon-59534275a3cf6573979313-17\"><span class=\"crayon-e\">done</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59534275a3cf6573979313-18\"><span class=\"crayon-i\">exit</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0016 seconds] -->\r\n<p>保存文件并退出，接着如下运行一下：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59534275a3cfa554285875\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ ./names.sh</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59534275a3cfa554285875-1\">1</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59534275a3cfa554285875-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">.</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">names</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">sh</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0004 seconds] -->\r\n<p></p>\n<p class=\"article_img\"><img class=\"aligncenter\" title=\"在脚本中用双引号\" src=\"https://dn-linuxcn.qbox.me/data/attachment/album/201706/17/192227q13jnz3eeqq5pb53.png\" alt=\"在脚本中用双引号\"></p>\n<p class=\"article_img_desc\" style=\"text-align: center;\"><em>在脚本中用双引号</em></p>\n<h3 id=\"toc_5\">5、 在脚本中使用函数</h3>\n<p>除了非常小的脚本（只有几行代码），总是记得用函数来使代码模块化且使得脚本更可读和可重用。</p>\n<p>写函数的语法如下所示：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59534275a3cfd920479284\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nfunction check_root(){\r\n  command1; \r\n  command2;\r\n}\r\n# 或\r\ncheck_root(){\r\n  command1; \r\n  command2;\r\n}</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59534275a3cfd920479284-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59534275a3cfd920479284-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-59534275a3cfd920479284-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59534275a3cfd920479284-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-59534275a3cfd920479284-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59534275a3cfd920479284-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-59534275a3cfd920479284-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59534275a3cfd920479284-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-59534275a3cfd920479284-9\">9</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59534275a3cfd920479284-1\"><span class=\"crayon-t\">function</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">check_root</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59534275a3cfd920479284-2\"><span class=\"crayon-h\">  </span><span class=\"crayon-v\">command1</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line\" id=\"crayon-59534275a3cfd920479284-3\"><span class=\"crayon-h\">  </span><span class=\"crayon-v\">command2</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59534275a3cfd920479284-4\"><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-59534275a3cfd920479284-5\"><span class=\"crayon-p\"># 或</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59534275a3cfd920479284-6\"><span class=\"crayon-e\">check_root</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-59534275a3cfd920479284-7\"><span class=\"crayon-h\">  </span><span class=\"crayon-v\">command1</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59534275a3cfd920479284-8\"><span class=\"crayon-h\">  </span><span class=\"crayon-v\">command2</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-59534275a3cfd920479284-9\"><span class=\"crayon-sy\">}</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0008 seconds] -->\r\n<p>写成单行代码时，每个命令后要用终止符号：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59534275a3d01845641063\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\ncheck_root(){ command1; command2; }</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59534275a3d01845641063-1\">1</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59534275a3d01845641063-1\"><span class=\"crayon-e\">check_root</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">{</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">command1</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">command2</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">}</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0005 seconds] -->\r\n<p></p>\n<h3 id=\"toc_6\">6、 字符串比较时用 <code>=</code> 而不是 <code>==</code></h3>\n<p>注意 <code>==</code> 是 <code>=</code> 的同义词，因此仅用个单 <code>=</code> 来做字符串比较，例如：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59534275a3d04557335295\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nvalue1=”tecmint.com”\r\nvalue2=”fossmint.com”\r\nif [ \"$value1\" = \"$value2\" ]</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59534275a3d04557335295-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59534275a3d04557335295-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-59534275a3d04557335295-3\">3</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59534275a3d04557335295-1\"><span class=\"crayon-v\">value1</span><span class=\"crayon-o\">=</span>”<span class=\"crayon-v\">tecmint</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">com</span>”</div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59534275a3d04557335295-2\"><span class=\"crayon-v\">value2</span><span class=\"crayon-o\">=</span>”<span class=\"crayon-v\">fossmint</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">com</span>”</div><div class=\"crayon-line\" id=\"crayon-59534275a3d04557335295-3\"><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"$value1\"</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"$value2\"</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">]</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0007 seconds] -->\r\n<p></p>\n<h3 id=\"toc_7\">7、 用 <code>$(command)</code> 而不是老旧的 <code><code>command</code></code> 来做代换</h3>\n<p><a class=\"ext\" href=\"https://www.tecmint.com/assign-linux-command-output-to-variable/\" target=\"_blank\" rel=\"external nofollow\">命令代换</a> 是用这个命令的输出结果取代命令本身。用 <code>$(command)</code> 而不是引号 <code><code>command</code></code> 来做命令代换。</p>\n<p>这种做法也是 <a class=\"ext\" href=\"https://www.tecmint.com/shellcheck-shell-script-code-analyzer-for-linux/\" target=\"_blank\" rel=\"external nofollow\">shellcheck tool</a> （可针对 shell 脚本显示警告和建议）所建议的。例如：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59534275a3d08788646350\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nuser=`echo “$UID”`\r\nuser=$(echo “$UID”)</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59534275a3d08788646350-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59534275a3d08788646350-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59534275a3d08788646350-1\"><span class=\"crayon-v\">user</span><span class=\"crayon-o\">=</span><span class=\"crayon-sy\">`</span><span class=\"crayon-i\">echo</span><span class=\"crayon-h\"> </span>“<span class=\"crayon-sy\">$</span><span class=\"crayon-i\">UID</span>”<span class=\"crayon-sy\">`</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59534275a3d08788646350-2\"><span class=\"crayon-v\">user</span><span class=\"crayon-o\">=</span><span class=\"crayon-sy\">$</span><span class=\"crayon-sy\">(</span><span class=\"crayon-i\">echo</span><span class=\"crayon-h\"> </span>“<span class=\"crayon-sy\">$</span><span class=\"crayon-i\">UID</span>”<span class=\"crayon-sy\">)</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0007 seconds] -->\r\n<p></p>\n<h3 id=\"toc_8\">8、 用 <code>readonly</code> 来声明静态变量</h3>\n<p>静态变量不会改变；它的值一旦在脚本中定义后不能被修改：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59534275a3d0b017603947\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nreadonly passwd_file=”/etc/passwd”\r\nreadonly group_file=”/etc/group”</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59534275a3d0b017603947-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59534275a3d0b017603947-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59534275a3d0b017603947-1\"><span class=\"crayon-e\">readonly </span><span class=\"crayon-v\">passwd_file</span><span class=\"crayon-o\">=</span>”<span class=\"crayon-o\">/</span><span class=\"crayon-v\">etc</span><span class=\"crayon-o\">/</span><span class=\"crayon-i\">passwd</span>”</div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59534275a3d0b017603947-2\"><span class=\"crayon-e\">readonly </span><span class=\"crayon-v\">group_file</span><span class=\"crayon-o\">=</span>”<span class=\"crayon-o\">/</span><span class=\"crayon-v\">etc</span><span class=\"crayon-o\">/</span><span class=\"crayon-i\">group</span>”</div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0006 seconds] -->\r\n<p></p>\n<h3 id=\"toc_9\">9、 环境变量用大写字母命名，而自定义变量用小写</h3>\n<p>所有的 bash 环境变量用大写字母去命名，因此用小写字母来命名你的自定义变量以避免变量名冲突：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-59534275a3d0f253645743\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n# 定义自定义变量用小写，而环境变量用大写\r\nnikto_file=”$HOME/Downloads/nikto-master/program/nikto.pl”\r\nperl “$nikto_file” -h  “$1”</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-59534275a3d0f253645743-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-59534275a3d0f253645743-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-59534275a3d0f253645743-3\">3</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-59534275a3d0f253645743-1\"><span class=\"crayon-p\"># 定义自定义变量用小写，而环境变量用大写</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-59534275a3d0f253645743-2\"><span class=\"crayon-v\">nikto_file</span><span class=\"crayon-o\">=</span>”<span class=\"crayon-sy\">$</span><span class=\"crayon-v\">HOME</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">Downloads</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">nikto</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">master</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">program</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">nikto</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">pl</span>”</div><div class=\"crayon-line\" id=\"crayon-59534275a3d0f253645743-3\"><span class=\"crayon-i\">perl</span><span class=\"crayon-h\"> </span>“<span class=\"crayon-sy\">$</span><span class=\"crayon-v\">nikto</span><span class=\"crayon-sy\">_</span>file”<span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">h</span><span class=\"crayon-h\">  </span>“<span class=\"crayon-sy\">$</span><span class=\"crayon-cn\">1</span>”</div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0009 seconds] -->\r\n<p></p>\n<h3 id=\"toc_10\">10、 总是对长脚本进行调试</h3>\n<p>如果你在写有数千行代码的 bash 脚本，排错可能变成噩梦。为了在脚本执行前易于修正一些错误，要进行一些调试。通过阅读下面给出的指南来掌握此技巧：</p>\n<ol>\n<li><a href=\"https://linux.cn/article-8028-1.html\">如何在 Linux 中启用 Shell 脚本调试模式</a></li>\n<li><a href=\"https://linux.cn/article-8045-1.html\">如何在 Shell 脚本中执行语法检查调试模式</a></li>\n<li><a href=\"https://linux.cn/article-8120-1.html\">如何在 Shell 脚本中跟踪调试命令的执行</a></li>\n</ol>\n<p>本文到这就结束了，你是否有一些其他更好的 bash 脚本编程经验想要分享？若是的话，在下面评论框分享出来吧。</p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"111514\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"111514votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"111514\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 6 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i>  评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "publish_date": "2017/06/19", "comment_nums": 0, "remote_img_url": ["https://dn-linuxcn.qbox.me/data/attachment/album/201706/17/192227q13jnz3eeqq5pb53.png"], "title": "Linux 中高效编写 Bash 脚本的 10 个技巧", "local_img_url": ["f"]},{"praise_nums": "1", "fav_nums": "1", "tags": "IT技术,可视化,数据", "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">本文作者： <a href=\"http://blog.jobbole.com\">伯乐在线</a> - <a href=\"http://www.jobbole.com/members/thoughtworkschina\">ThoughtWorks</a> 。未经作者许可，禁止转载！<br>欢迎加入伯乐在线 <a href=\"http://blog.jobbole.com/99322\" target=\"_blank\">专栏作者</a>。</div><div>\n<p>数据可视化就是借助于图形化手段，清晰有效地进行信息传达与沟通。许多人会着眼于“可视化”，认为数据可视化就是将一系列看上去很炫、很复杂的图表展示在页面上。其实不然，虽然可视化脱离不了各种图表类型，但并不意味着要以增加用户理解难度为代价去实现复杂的功能；或者为了看上去绚丽多彩而失去其最根本的意义：<strong>传达与沟通</strong>。</p>\n<h3>数据可视化产生生产力</h3>\n<p>数据可视化之所以会大受欢迎，其原因不仅在于能带给用户良好的的视觉效果，更因为它能够产生生产力，形成数据驱动闭环，主要包含以下几个阶段：</p>\n<ul>\n<li>技术人员运用技术手段将需求分析、基础数据整合、数据计算等操作结合到一起进行数据可视化，实时监控数据的变化情况。</li>\n<li>用户能够使用这些可视化图表，进行分析、对比等操作，定位业务问题。之后再结合业务变动提出新的需求。</li>\n<li>技术人员将用户访问数据与新的业务需求结合，重新进行数据整合、分析、计算，循环往复下去。</li>\n</ul>\n<p>如下图所示：</p>\n<p><a href=\"http://insights.thoughtworkers.org/wp-content/uploads/2017/06/1-data-visualization.png\"><img src=\"http://insights.thoughtworkers.org/wp-content/uploads/2017/06/1-data-visualization.png\" alt=\"\" width=\"940\" height=\"712\"></a></p>\n<p>图1. 数据驱动闭环</p>\n<p>实现用数据可视化的方式不断驱动业务的提升，产生生产力、创造收益。</p>\n<h3>如何使数据可视化产生生产力？</h3>\n<p>满足这一目的的前提在于－－“创造出都能读懂、易于操作、能够提前预警的图表”，关键因素有以下几点：</p>\n<h4>1、选择合适的图表类型</h4>\n<p>选择图表的时候，许多人认为基本图表太过简单，不够高端大气，因而更倾向选择复杂的图表类型。实际上越简单的图表越容易理解，对用户的友好程度越高。只要能够高效清楚地传达业务含义，就应该优先选择。</p>\n<p>例如，饼图比较适合反映某个部分占整体的比重，而折线图能更好的反应数据变化的趋势；分组柱状图和堆叠柱状图都能够显示数据集的分组情况，但是彼此间的差异却让它们在特定情况下显得更加强大。在比较同一分类不同组的数据或者同组不同分类的数据时，分组柱状图更能体现优势；然而在比较每个分组之间的总量时，堆叠柱状图显然更加合适。下面分别使用这两种图表在展示不同地区、不同年龄段人口数量分布时显示的效果：</p>\n<p><a href=\"http://insights.thoughtworkers.org/wp-content/uploads/2017/06/2-Grouped-Bar-Chart.png\"><img src=\"http://insights.thoughtworkers.org/wp-content/uploads/2017/06/2-Grouped-Bar-Chart.png\" alt=\"\" width=\"940\" height=\"483\"></a></p>\n<p>图2. 分组柱状图（Grouped Bar Chart)</p>\n<p>图片来自：<a href=\"https://bl.ocks.org/mbostock/3887051\">https://bl.ocks.org/mbostock/3887051</a></p>\n<p><a href=\"http://insights.thoughtworkers.org/wp-content/uploads/2017/06/3-Stacked-Bar-Chart.png\"><img src=\"http://insights.thoughtworkers.org/wp-content/uploads/2017/06/3-Stacked-Bar-Chart.png\" alt=\"\" width=\"940\" height=\"485\"></a></p>\n<p>图3. 堆叠柱状图（Stacked Bar Chart)</p>\n<p>图片来自：<a href=\"https://bl.ocks.org/mbostock/3886208\">https://bl.ocks.org/mbostock/3886208</a></p>\n<p>要想让受众读懂图表所表达的业务含义，就要选择合适的图表类型。在选择时，首先需要清楚的知道不同图表的优劣以及它们适合的应用场景；除此之外尽量选择一些简单的、易于理解的图表类型。但这不意味着不能选择复杂的图表类型，有的图表虽然看起来比较复杂，但是却能很好的反映一些业务场景，再辅助一些文字说明等其他手段，降低用户的使用难度，也未尝不可。</p>\n<p>选择图表时，以业务为基础。只要能够清晰地表达业务数据背后含义，不让用户产生歧义，都值得考虑。</p>\n<h4>2、易用的、多维度的交互分析</h4>\n<p>随着数据类型的多样化，数据间的关联关系也越来越复杂。仅仅展示单维度的数据，是无法让用户轻易发现数据之间的联系、挖掘出更多业务价值的。同样，若是交互方式过于复杂，也只会增加用户的使用难度而已，不利于业务长期发展。因此易操作的、多维度的交互分析对于数据可视化来说必不可少。多维度的分析方式有很多种，以下是常见的几种：</p>\n<ul>\n<li>钻取： 将汇总数据拆分到更细节的数据；在维的不同层次间的变化，从上层降到下一层。</li>\n<li>上卷： 钻取的逆操作，即从细粒度数据向高层的聚合。</li>\n<li>切片： 选择维中特定的值进行分析。</li>\n<li>切块：选择维中特定区间的数据或者某批特定值进行分析。</li>\n<li>筛选： 通过不同的维度或者类别过滤出用户想要的数据。</li>\n<li>联动：若干个相关联的图表，一个图表发生变化，其他的也会跟着发生变化。</li>\n</ul>\n<p>下面是一些图表的样例：</p>\n<p><a href=\"http://insights.thoughtworkers.org/wp-content/uploads/2017/06/4-tree-graph.png\"><img src=\"http://insights.thoughtworkers.org/wp-content/uploads/2017/06/4-tree-graph.png\" alt=\"\" width=\"940\" height=\"435\"></a></p>\n<p>图4. 树图（不同数据层次，可以进行数据的钻取、上卷的等等操作)</p>\n<p>（图片来自：<a href=\"https://bl.ocks.org/mbostock/1093025\">https://bl.ocks.org/mbostock/1093025</a>）</p>\n<p><a href=\"http://insights.thoughtworkers.org/wp-content/uploads/2017/06/5-Linkage.png\"><img src=\"http://insights.thoughtworkers.org/wp-content/uploads/2017/06/5-Linkage.png\" alt=\"\" width=\"940\" height=\"756\"></a></p>\n<p>图5. 同步联动图（图中显示的是在某一到达距离时的速度、高度以及心率）</p>\n<p>（图片来自：<a href=\"https://www.highcharts.com/demo/synchronized-charts\">http://t.cn/RoUdHCX</a>）<code></code></p>\n<p>有选择的将不同交互方式进行结合，能够发挥出更强大的作用。再辅助高效灵活的追加合并、拖曳式操作进行数据的挖掘分析，就可以帮助用户快速定位问题，释放劳动力，提升效率，不再需要程序员花费大量精力在日志文件中寻找问题的原因。同时通过各类数据的横向、纵向对比，业务人员能够从中挖掘出更多的业务需求，创造更大的商业价值。</p>\n<h4>3、预警功能</h4>\n<p>数据可视化除了能够帮助定位已有的问题，另外一个更大的价值是能够及时预警。</p>\n<p>一旦数据出现异常或者是提前预定义的一些条件被满足时，警报就会被触发，提前预警。通过设置报警方式、报警策略、报警等级等等，根据紧急程度用不同的方式通知特定的人群。这样在问题发生之前，就能预先做好防护措施；或者在问题发生的时候，能够及时通知负责人，尽快解决问题。这样不仅能缩短反馈周期（发现问题－找到责任人－定位问题－解决问题），也能降低对用户的影响，提升用户对产品的信任度，很好的降低业务损失。</p>\n<h3>总结</h3>\n<p>除了上述提到的一些关键因素，好的数据可视化平台、产品也有许多其他的共性： 友好的用户体验设计，页面的交互逻辑要符合真实的用户路径； 可以多终端使用 ，尤其要能契合移动端体验的可视化设计实现，使得人与数据零距离，随时随地可用；强大的数据整合、计算、渲染能力，就算图表表达的业务含义再精确，性能的缺失也是致命的。 支持多种数据源整合、多数据类型的扩展等等。 对产品用户使用情况进行监控、分析。了解真实用户人群、用户路径、用户的核心关注点，帮助产品进行改善</p>\n<p>总之，好的数据可视化，就是要以用户为中心。根据目标用户的需求提炼业务需求，以用户的良好体验为目标，绘制出人人都能读懂的图表；以人人都会的交互方式，帮助用户挖掘业务价值，提升工作效率，促进业务持续发展，让数据可视化产生生产力。</p>\n<div></div>\n</div>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"111529\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"111529votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"111529\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 1 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i>  评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n<div id=\"author-bio\">\r\n\t\r\n\t<h3 class=\"widget-title\">\r\n\t关于作者：<a target=\"_blank\" href=\"http://www.jobbole.com/members/thoughtworkschina\">ThoughtWorks</a>\r\n\t</h3>\r\n\t<div class=\"alignleft\">\r\n\t\t<a target=\"_blank\" href=\"http://www.jobbole.com/members/thoughtworkschina\">\r\n\t\t\t<img src=\"http://tp3.sinaimg.cn/1774908135/180/0/1\">\r\n\t\t</a>\r\n\t</div>\r\n\r\n    <div class=\"author-bio-info\">\r\n\r\n        <span class=\"author-bio-info-block\">\r\n            ThoughtWorks是一家全球IT咨询公司，追求卓越软件质量，致力于科技驱动商业变革。擅长构建定制化软件产品，帮助客户快速将概念转化为价值。同时为客户提供用户体验设计、技术战略咨询、组织转型等咨询服务。        </span>\r\n        <span class=\"author-bio-info-block\">\r\n            <a href=\"http://www.jobbole.com/members/thoughtworkschina\" target=\"_blank\"><i class=\"fa fa-user\"></i> 个人主页</a> ·\r\n            <a href=\"http://blog.jobbole.com/author/thoughtworkschina/\" target=\"_blank\"><i class=\"fa fa-file-text-o\"></i> 我的文章</a>\r\n\r\n             · <a title=\"声望值\" target=\"_blank\" href=\"http://www.jobbole.com/members/thoughtworkschina/reputation/\"><i class=\"fa fa-graduation-cap\"></i> 60</a> · <a title=\"我的网站\" target=\"_blank\" href=\"http://insights.thoughtworkers.org/\"><i class=\"fa fa-link\"></i></a> <a title=\"微博主页\" target=\"_blank\" href=\"http://weibo.com/thoughtworkschina\"><i class=\"fa fa-weibo\"></i></a>         </span>\r\n    </div>\r\n\t<div class=\"clear\"></div>\r\n</div>\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "publish_date": "2017/06/22", "comment_nums": 0, "remote_img_url": ["http://insights.thoughtworkers.org/wp-content/uploads/2017/06/1-data-visualization.png"], "title": "数据可视化产生生产力", "local_img_url": ["f"]},{"praise_nums": "1", "fav_nums": "1", "tags": "IT技术,Linus Torvalds", "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">原文出处： <a ref=\"nofollow\" target=\"_blank\" href=\"https://www.linux.com/blog/event/lc3-china/20176/6/linus-torvalds-explains-how-linux-still-surprises-and-motivates-him\">Linux 基金会</a>   译文出处：<a target=\"_blank\" href=\"https://linux.cn/article-8638-1.html\">Linux中国</a>   </div><p>周一，Linus Torvalds 首次来到中国参加<a class=\"ext\" href=\"https://www.lfasiallc.com/linuxcon-containercon-cloudopen-china\" target=\"_blank\" rel=\"external nofollow\">在北京召开的 LinuxCon + ContainerCon + CloudOpen</a>。在近 2000 名观众面前，Linus Torvalds 和 VMware 开源负责人 Dirk Hohndel 进行了进行了一次“炉边聊天”，谈及是什么在惊讶和激励着他，以及有志的开源开发者们该如何上手。下面是他们谈话中的一些亮点。</p>\n<h3 id=\"toc_1\">Linux 开发中有什么令人惊讶的事情?</h3>\n<blockquote><p>“我觉得有趣的是我认为已经稳定的代码仍然在不断的得到改进，有些东西我们已经很多年没有碰了，然后有人来改进了它们，或者在我以为根本就不会有人用的东西上提交了 Bug 报告。我们有了新的硬件，开发了新的功能，但是 25 年后，我们仍然有老的、非常基础的东西，并且人们依然在关心和改善着它们。”</p></blockquote>\n<h3 id=\"toc_2\">什么在激励着他</h3>\n<blockquote><p>“我真的很喜欢我正在做的事情。我喜欢醒来时有一个在技术上有趣而富有挑战性并且不太紧张的工作，因此我可以长时间的为此工作；或者做一些我感觉我正在做一个真正有影响的事情，做一些不仅仅是对我来说有意义的事情。</p>\n<p>“我偶尔在工作中休息一下，例如我在 Git 上工作两到三周的时候就开始休息了。但是每次休息的时间比较长我都会感到无聊厌倦。当我出去潜水一周，就想着要回来，我从没有感觉我需要一个更长的假期。”</p></blockquote>\n<p>（LCTT 译注：此处“在 Git 上工作” 是指 Linus 在 Git 版本仓库里面开发 Linux 内核，而非开发 Git 软件——事实上，Linus 在早期开发完 Git 的原型之后，主要的 Git 开发已经有别人接手了，虽然他被称之为 Git 之父。而“潜水”是真的指潜水运动，Linus 喜好玩潜水运动。）</p>\n<h3 id=\"toc_3\">Linux 的未来领导力</h3>\n<blockquote><p>“我们的工作进程不会只是 25 年，我们仍然有非常强大的维护团队。我们常常抱怨我们没有足够的维护者 – 这是真的，我们只有数十名顶级维护者做日常合并的工作，这对于一个开源项目来说是一个非常强大的团队。而且随着这些顶级维护者慢慢变老变胖，我们不断有新人进来。一个新人成长为一个顶级维护者需要几年的时间，因此我不觉得我们应该为 Linux 的下一个 20 年担心。”</p></blockquote>\n<h3 id=\"toc_4\">Linux 会被替代吗？</h3>\n<blockquote><p>“或许会有一些新的项目将来会并且表明他们比我们做的更好，但是我不担心这个。有很多非常成功的 Linux 的分支（fork），人们不会把它们看作是分支是因为他们很和谐。如果有人想要改变一切并且让内核变得更好，我的感觉是，干吧，证明你自己。我可能觉得那是一个坏主意，但是你可以证明我是错的。”</p></blockquote>\n<p>（LCTT 译注：此处所说的分支，应该是指类似 Android、AGL 等 Linux 分支并没有分裂 Linux 生态，而是彼此补充。）</p>\n<h3 id=\"toc_5\">对 Git 的想法</h3>\n<blockquote><p>“我对 Git 的广泛传播感到非常的惊讶。显然我非常高兴，它验证了我对分布式开发的看法。然而那时，已经有如此之多的源码版本控制工具，很难再去推出一个新的版本控制系统。我预计它主要限于内核开发 – 因为它是针对我们所做的。”</p>\n<p>“在刚开始的三到四年里，关于 Git 的抱怨是它如此的与众不同，难以使用。大约五年前，事情发生了改变。有足够多的项目和开发者开始使用 Git ，它变得不再与众不同；人们习惯于使用 Git 。他们开始利用这种开发模式，使用 Git 的安全感，意味着任何东西都不会损坏或者丢失。”</p>\n<p>“在某些方面，Git 比 Linux 更为人所知。Linux 常常被隐藏起来，例如安卓手机就运行在 Linux 之上，但是你并不知道。但是使用 Git 时，你确切地知道你在使用 Git 。”</p></blockquote>\n<h3 id=\"toc_6\">分支 Linux</h3>\n<blockquote><p>“当我坐下来开始写 Git ，一个首要的原则就是你应该能 fork 并且在此基础上做你自己的事情。如果你有友好的 fork（能证明我错了，并且能够改进内核），在这种情况下，人们可以回来说我们实际上改进了内核，这没有什么不好的感觉。我会采纳你的改进并且将其合并进来。这就是为什么你应该鼓励 fork 。你也想让良好的回馈变得很简单。”</p></blockquote>\n<h3 id=\"toc_7\">开源开发者应该如何开始</h3>\n<blockquote><p>“于我而言，我总是自我激励，知道自己想要做什么，我从来没有被告知要去做什么。我不确定我的例子是否适合人们效仿。如果你是一个新手程序员，你可以从成千上万的开源项目中找到你所感兴趣的，你可以长期关注这个项目，去了解它的代码，以至于你可以在某个部分的代码上可以成为专家，不需要是整个项目。没有人是整个内核的专家，但是你可以很好地了解其中的一个领域。”</p>\n<p>“如果你能成为社区的一份子，能提交补丁，那将不仅仅是编程，而是有开源社会方面的意义。你作为一个程序员提升了你自己并且和外界联系了起来。你基本上可以向外展示 – 我做了这些改进，我有能力在我的社区或者工作上走得更远。你不得不花费一定的时间来学习一个项目，但是你将有一个巨大的上升空间 – 不仅仅是从职业方面，而且在你的生活中有一个惊人的项目。”</p></blockquote>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"111571\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"111571votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"111571\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 1 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i>  评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "publish_date": "2017/06/26", "comment_nums": 0, "remote_img_url": ["http://jbcdn2.b0.upaiyun.com/2016/11/59d49abe8909a122bc2c9aa43b71e3bb.png"], "title": "Linus Torvalds 说 Linux 仍然惊讶和激励着他", "local_img_url": ["f"]},{"praise_nums": "3", "fav_nums": 0, "tags": "趣文小说,趣文", "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">原文出处： <a target=\"_blank\" href=\"https://www.oschina.net/news/85952/th-worst-volume-control-design-contest\">开源中国社区/王练</a>   </div><p>如果程序员来做设计，世界会变成什么样子？</p>\n<p>著名社交新闻网站 Reddit 最近举办了一个“最糟糕音量键设计大赛”，起因是一个程序员在 Reddit 晒出了自己设计的一款“不同寻常”的音量控制键，并号召大家加入到设计当中来。</p>\n<p><img class=\"alignnone\" src=\"http://wx3.sinaimg.cn/mw690/63918611gy1fgqlqodsdlg20d407s40w.gif\" width=\"472\" height=\"280\"></p>\n<p>程序员们分别按照自己的想法，重新设计了电脑的音量大小按键，比如这样的：</p>\n<blockquote><p>我也不知道音量大小是多少，全都是凭运气来调整的，想要改音量的时候就 roll 一下</p></blockquote>\n<p><img class=\"alignnone\" src=\"http://wx2.sinaimg.cn/mw690/63918611gy1fgqlqoib21g20dy06z76y.gif\" width=\"502\" height=\"251\"></p>\n<blockquote><p>快把音量调到50！等等，等等，我再晃一下，刚刚晃过了…</p></blockquote>\n<p><img class=\"alignnone\" src=\"http://wx4.sinaimg.cn/mw690/63918611gy1fgqlqpgt5fg20ir06wqv5.gif\" width=\"675\" height=\"248\"></p>\n<p>愤怒的小鸟？</p>\n<p><img class=\"alignnone\" src=\"http://wx2.sinaimg.cn/mw690/63918611gy1fgqlqpwtikg20dw06y41h.gif\" width=\"500\" height=\"250\"></p>\n<p>单身几十年的手速终于排上用场了</p>\n<p><img class=\"alignnone\" src=\"http://wx3.sinaimg.cn/mw690/63918611gy1fgqlqqzjgeg20fm0dg7wh.gif\" width=\"562\" height=\"484\"></p>\n<p>学渣的末日</p>\n<p><img class=\"alignnone\" src=\"http://wx2.sinaimg.cn/mw690/63918611gy1fgqlqra6u8g20dm02yglm.gif\" width=\"490\" height=\"106\"></p>\n<p>论“鼠标手”是怎么炼成的</p>\n<p><img class=\"alignnone\" src=\"http://wx4.sinaimg.cn/mw690/63918611gy1fgqlqrtsxyg20ie0aemzf.gif\" width=\"662\" height=\"374\"></p>\n<p>给我一天时间，我能画个蒙娜丽莎出来</p>\n<p><img class=\"alignnone\" src=\"http://wx2.sinaimg.cn/mw690/63918611gy1fgqlqs8ecsg20go0ctdqu.gif\" width=\"600\" height=\"461\"></p>\n<p> </p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"111518\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"111518votetotal\">3</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"111518\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i>  收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i> 6 评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "publish_date": "2017/06/19", "comment_nums": "6", "remote_img_url": ["http://jbcdn2.b0.upaiyun.com/2017/04/7a91ae8776d0953ac776284a7d92e861.jpg"], "title": "让程序员跨界做设计，脑洞开的万万想不到", "local_img_url": ["f"]},{"praise_nums": "1", "fav_nums": 0, "tags": "IT技术,算法", "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">原文出处： <a target=\"_blank\" href=\"http://www.cnblogs.com/10158wsj/p/7050736.html\">我心自在</a>   </div><p>最近在参与一个银行项目-某银行安防系统-反洗钱需求的开发，银行项目的离不开身份证号码，身份证号码作为我国公民的唯一标识，有这非同寻常的意义，由于业务的要求15位的身份证号码无法命中，所以需要补全为18位，一开始自己想着加个年份的前两位，后面再加个X不就行了嘛，后来代码写不下去了，上网查了资料，才知道自己想的是多么天真，还是比较复杂的，折腾了一下午终于有了眉目。</p>\n<h2>一、15位身份证和18位身份证号码结构介绍</h2>\n<p>要进行身份证号码的验证，首先需要了解我国身份证号码的编码规则。我国身份证号码多由若干位数字或者数字与字母混合组成。早期身份证由15位数字构成，这主要是在1980年以前发放的身份证，后来考虑到千年虫问题，因为15位的身份证号码只能为1900年1月1日到1999年12月31日出生的人编号，所以又增加了18位身份证号码编号规则。</p>\n<p>1     2     3     4     5     6     7     8     9     10   11   12   13   14   15</p>\n<p>A     A     A     A     A     A     Y     Y     M    M    D     D     N    N    S</p>\n<p>前六位AAAAAA是身份证编码对象的所在地（出生地）的编码，该号码可由国家统计局公布的相关标准中得到。YY表示出生年的后两位，MM和DD表示出生月和日，不足两位的高位补0，NNS为顺序号，无法确定。S为性别识别码，男性为奇数，女性为偶数。了解了这些，再来写代码就变得容易多了。</p>\n<h2>二、算法实现</h2>\n<p>了解了身份证号码的规则后，我们就可以推断出，身份证的15位转化位需要两步。首先把15位身份证号补全为17位，然后再补全最后一位。但是最后一位是数字还是字母X？这里又出现了问题。我们知道，身份证的最后一位为校验位，那么最后一位是怎么得到的呢？原来，最后一位是由数字1-9组成，超过9的比如11就用字母X表示，否则号码就变成了19位。了解了这些，经过整理得出身份证补全算法实现思想如下：</p>\n<p><strong>step1</strong>、将15位身份证号码加入出生年变为17位</p>\n<p><strong>step2</strong>、将step1得到的身份证17位数分别乘以不同的系数。从第1位到第17位的系数分别为：7-9-10-5-8-4-2-1-6-3-7-9-10-5-8-4-2.</p>\n<p><strong>step3</strong>、将这17位数字和系数相乘的结果相加</p>\n<p><strong>step4</strong>、将step3的结果除以11，得出余数</p>\n<p>由于数字的特殊性，这些余数只可能是0-10这11个数字，身份证最后一位的对应数字为1-0-X-9-8-7-6-5-4-3-2.。例上面的余数结果为3那么对应身份证号码的最后一位就是9，如果是10，身份证最后一位便是2。</p>\n<p>代码如下：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5952dbd795b30307715635\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\npublic static void main(String[] args) {\r\n        System.out.println(transIDCard15to18(\"370986890623212\"));\r\n        System.out.println(transIDCard15to18(\"370725881105149\"));\r\n    }\r\n    /* 18位标准身份证号\r\n     * 方法用途：15位身份证转化为18位标准证件号\r\n     */\r\n    public static String transIDCard15to18(String IdCardNO){\r\n        String cardNo=null;\r\n        if(null!=IdCardNO&amp;&amp;IdCardNO.trim().length()==15){\r\n            IdCardNO=IdCardNO.trim();\r\n            StringBuffer sb=new StringBuffer(IdCardNO);\r\n            sb.insert(6, \"19\");\r\n            sb.append(transCardLastNo(sb.toString()));\r\n            cardNo=sb.toString();\r\n        }\r\n        return cardNo;\r\n    }\r\n    /* 方法用途：15位补全‘19’位后的身份证号码\r\n     */\r\n    private static String transCardLastNo(String newCardId){\r\n        char[] ch=newCardId.toCharArray();\r\n        int m=0;\r\n        int [] co={7,9,10,5,8,4,2,1,6,3,7,9,10,5,8,4,2};\r\n        char [] verCode=new char[]{'1','0','X','9','8','7','6','5','4','3','2'};\r\n        for (int i = 0; i &lt; newCardId.length(); i++) {\r\n            m+=(ch[i]-'0')*co[i];\r\n        }\r\n        int residue=m%11;\r\n        return String.valueOf(verCode[residue]);\r\n         \r\n    }</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5952dbd795b30307715635-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5952dbd795b30307715635-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5952dbd795b30307715635-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5952dbd795b30307715635-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5952dbd795b30307715635-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5952dbd795b30307715635-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5952dbd795b30307715635-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5952dbd795b30307715635-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5952dbd795b30307715635-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5952dbd795b30307715635-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5952dbd795b30307715635-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5952dbd795b30307715635-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5952dbd795b30307715635-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5952dbd795b30307715635-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5952dbd795b30307715635-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5952dbd795b30307715635-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-5952dbd795b30307715635-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5952dbd795b30307715635-18\">18</div><div class=\"crayon-num\" data-line=\"crayon-5952dbd795b30307715635-19\">19</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5952dbd795b30307715635-20\">20</div><div class=\"crayon-num\" data-line=\"crayon-5952dbd795b30307715635-21\">21</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5952dbd795b30307715635-22\">22</div><div class=\"crayon-num\" data-line=\"crayon-5952dbd795b30307715635-23\">23</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5952dbd795b30307715635-24\">24</div><div class=\"crayon-num\" data-line=\"crayon-5952dbd795b30307715635-25\">25</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5952dbd795b30307715635-26\">26</div><div class=\"crayon-num\" data-line=\"crayon-5952dbd795b30307715635-27\">27</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5952dbd795b30307715635-28\">28</div><div class=\"crayon-num\" data-line=\"crayon-5952dbd795b30307715635-29\">29</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5952dbd795b30307715635-30\">30</div><div class=\"crayon-num\" data-line=\"crayon-5952dbd795b30307715635-31\">31</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5952dbd795b30307715635-32\">32</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5952dbd795b30307715635-1\"><span class=\"crayon-m\">public</span><span class=\"crayon-h\"> </span><span class=\"crayon-m\">static</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">void</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">main</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">String</span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">args</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5952dbd795b30307715635-2\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">System</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">out</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">println</span><span class=\"crayon-sy\">(</span><span class=\"crayon-e\">transIDCard15to18</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"370986890623212\"</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5952dbd795b30307715635-3\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">System</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">out</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">println</span><span class=\"crayon-sy\">(</span><span class=\"crayon-e\">transIDCard15to18</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"370725881105149\"</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5952dbd795b30307715635-4\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5952dbd795b30307715635-5\"><span class=\"crayon-h\">    </span><span class=\"crayon-c\">/* 18位标准身份证号</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5952dbd795b30307715635-6\"><span class=\"crayon-c\">     * 方法用途：15位身份证转化为18位标准证件号</span></div><div class=\"crayon-line\" id=\"crayon-5952dbd795b30307715635-7\"><span class=\"crayon-c\">     */</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5952dbd795b30307715635-8\"><span class=\"crayon-h\">    </span><span class=\"crayon-m\">public</span><span class=\"crayon-h\"> </span><span class=\"crayon-m\">static</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">String</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">transIDCard15to18</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">String</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">IdCardNO</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5952dbd795b30307715635-9\"><span class=\"crayon-h\">        </span><span class=\"crayon-t\">String</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">cardNo</span><span class=\"crayon-o\">=</span><span class=\"crayon-t\">null</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5952dbd795b30307715635-10\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">if</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">null</span><span class=\"crayon-o\">!=</span><span class=\"crayon-v\">IdCardNO</span><span class=\"crayon-o\">&amp;&amp;</span><span class=\"crayon-v\">IdCardNO</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">trim</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">length</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">==</span><span class=\"crayon-cn\">15</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5952dbd795b30307715635-11\"><span class=\"crayon-h\">            </span><span class=\"crayon-v\">IdCardNO</span><span class=\"crayon-o\">=</span><span class=\"crayon-v\">IdCardNO</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">trim</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5952dbd795b30307715635-12\"><span class=\"crayon-h\">            </span><span class=\"crayon-e\">StringBuffer </span><span class=\"crayon-v\">sb</span><span class=\"crayon-o\">=</span><span class=\"crayon-r\">new</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">StringBuffer</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">IdCardNO</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5952dbd795b30307715635-13\"><span class=\"crayon-h\">            </span><span class=\"crayon-v\">sb</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">insert</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">6</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"19\"</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5952dbd795b30307715635-14\"><span class=\"crayon-h\">            </span><span class=\"crayon-v\">sb</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">append</span><span class=\"crayon-sy\">(</span><span class=\"crayon-e\">transCardLastNo</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">sb</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">toString</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5952dbd795b30307715635-15\"><span class=\"crayon-h\">            </span><span class=\"crayon-v\">cardNo</span><span class=\"crayon-o\">=</span><span class=\"crayon-v\">sb</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">toString</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5952dbd795b30307715635-16\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5952dbd795b30307715635-17\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">cardNo</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5952dbd795b30307715635-18\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5952dbd795b30307715635-19\"><span class=\"crayon-h\">    </span><span class=\"crayon-c\">/* 方法用途：15位补全‘19’位后的身份证号码</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5952dbd795b30307715635-20\"><span class=\"crayon-c\">     */</span></div><div class=\"crayon-line\" id=\"crayon-5952dbd795b30307715635-21\"><span class=\"crayon-h\">    </span><span class=\"crayon-m\">private</span><span class=\"crayon-h\"> </span><span class=\"crayon-m\">static</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">String</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">transCardLastNo</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">String</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">newCardId</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5952dbd795b30307715635-22\"><span class=\"crayon-h\">        </span><span class=\"crayon-t\">char</span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">ch</span><span class=\"crayon-o\">=</span><span class=\"crayon-v\">newCardId</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">toCharArray</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5952dbd795b30307715635-23\"><span class=\"crayon-h\">        </span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">m</span><span class=\"crayon-o\">=</span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5952dbd795b30307715635-24\"><span class=\"crayon-h\">        </span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">co</span><span class=\"crayon-o\">=</span><span class=\"crayon-sy\">{</span><span class=\"crayon-cn\">7</span><span class=\"crayon-sy\">,</span><span class=\"crayon-cn\">9</span><span class=\"crayon-sy\">,</span><span class=\"crayon-cn\">10</span><span class=\"crayon-sy\">,</span><span class=\"crayon-cn\">5</span><span class=\"crayon-sy\">,</span><span class=\"crayon-cn\">8</span><span class=\"crayon-sy\">,</span><span class=\"crayon-cn\">4</span><span class=\"crayon-sy\">,</span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">,</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-cn\">6</span><span class=\"crayon-sy\">,</span><span class=\"crayon-cn\">3</span><span class=\"crayon-sy\">,</span><span class=\"crayon-cn\">7</span><span class=\"crayon-sy\">,</span><span class=\"crayon-cn\">9</span><span class=\"crayon-sy\">,</span><span class=\"crayon-cn\">10</span><span class=\"crayon-sy\">,</span><span class=\"crayon-cn\">5</span><span class=\"crayon-sy\">,</span><span class=\"crayon-cn\">8</span><span class=\"crayon-sy\">,</span><span class=\"crayon-cn\">4</span><span class=\"crayon-sy\">,</span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">}</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5952dbd795b30307715635-25\"><span class=\"crayon-h\">        </span><span class=\"crayon-t\">char</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">verCode</span><span class=\"crayon-o\">=</span><span class=\"crayon-r\">new</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">char</span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">{</span><span class=\"crayon-s\">'1'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-s\">'0'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-s\">'X'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-s\">'9'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-s\">'8'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-s\">'7'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-s\">'6'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-s\">'5'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-s\">'4'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-s\">'3'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-s\">'2'</span><span class=\"crayon-sy\">}</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5952dbd795b30307715635-26\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">for</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">newCardId</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">length</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-o\">++</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5952dbd795b30307715635-27\"><span class=\"crayon-h\">            </span><span class=\"crayon-v\">m</span><span class=\"crayon-o\">+=</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">ch</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">i</span><span class=\"crayon-sy\">]</span><span class=\"crayon-o\">-</span><span class=\"crayon-s\">'0'</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">*</span><span class=\"crayon-v\">co</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">i</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5952dbd795b30307715635-28\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5952dbd795b30307715635-29\"><span class=\"crayon-h\">        </span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">residue</span><span class=\"crayon-o\">=</span><span class=\"crayon-v\">m</span><span class=\"crayon-o\">%</span><span class=\"crayon-cn\">11</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5952dbd795b30307715635-30\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">String</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">valueOf</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">verCode</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">residue</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5952dbd795b30307715635-31\"><span class=\"crayon-h\">         </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5952dbd795b30307715635-32\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0065 seconds] -->\r\n<p>测试结果如下：</p>\n<p><a href=\"http://jbcdn2.b0.upaiyun.com/2017/06/4de63d1dfe6ae7d0e16eb62169a51728.png\"><img class=\"alignnone wp-image-111567 size-full\" src=\"http://jbcdn2.b0.upaiyun.com/2017/06/4de63d1dfe6ae7d0e16eb62169a51728.png\" alt=\"1153367-20170619213856382-410871354\" width=\"760\" height=\"154\"></a></p>\n<h2>三、总结</h2>\n<p>身份证号码补全虽然简单，但是前提需要了解我国公民的身份证构成原理才能正确验证，今天将这个学习过程分享给大家，希望对大家有所帮助，学习是个永无止境的过程，只有不断学习才能有进步！</p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"111556\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"111556votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"111556\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i>  收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i>  评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "publish_date": "2017/06/25", "comment_nums": 0, "remote_img_url": ["http://jbcdn2.b0.upaiyun.com/2014/10/9184208f96827c412ab7d3570590ef76.jpg"], "title": "15位身份证补全为18位身份证算法", "local_img_url": ["f"]},{"praise_nums": "1", "fav_nums": 0, "tags": "IT技术,SQL Server,数据库", "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">原文出处： <a target=\"_blank\" href=\"http://www.cnblogs.com/ljhdo/p/4546081.html\">Vic Liu</a>   </div><p>对于大多数SQL Server编程开发者来说，当计算字符串的长度时，脑海中闪现的第一个函数是：Len(string)，这个“长度”，默认情况下，是指字符的数量，一个英语字符是一个长度，一个汉字是一个长度。大多数的字符串函数，例如charindex，substring，stuff等函数，其位置都是针对字符数量的，这使得Len函数深入人心，但是，一个Unicode字符，占用的字节数量是2Byte，而一个普通的ASCII字符占用的字节数量是1Byte，当需要计算字符串占用的字节数量时，要如何计算字符串的长度？对于各个类型所占用的字节数量，又该如何计算？带着这个疑问，让我们一睹DataLength函数的庐山真面目。</p>\n<h3>一，字符数量</h3>\n<p>Len(string) 函数返回的数值是字符的数量（number of characters），在统计字符数量时，不包含结尾空格，但是包含前导空格。</p>\n<p>示例，Len 函数返回的是字符的数量，而不是字符的字节数量。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5952c9cf8f0e5434279280\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\ndeclare @str_v varchar(10)\r\ndeclare @str_nv nvarchar(10)\r\ndeclare @str_nv_cn nvarchar(10)\r\nset @str_v=' ab '\r\nset @str_nv=N' ab '\r\nset @str_nv_cn=N' 悦光阴'\r\n\r\nselect len(@str_v) as len_v\r\n    ,len(@str_nv) as len_nv\r\n    , len(@str_nv_cn) as str_nv_cn</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5952c9cf8f0e5434279280-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5952c9cf8f0e5434279280-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5952c9cf8f0e5434279280-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5952c9cf8f0e5434279280-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5952c9cf8f0e5434279280-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5952c9cf8f0e5434279280-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5952c9cf8f0e5434279280-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5952c9cf8f0e5434279280-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5952c9cf8f0e5434279280-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5952c9cf8f0e5434279280-10\">10</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5952c9cf8f0e5434279280-1\"><span class=\"crayon-r\">declare</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">@</span><span class=\"crayon-e\">str_v </span><span class=\"crayon-e\">varchar</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">10</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5952c9cf8f0e5434279280-2\"><span class=\"crayon-r\">declare</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">@</span><span class=\"crayon-e\">str_nv </span><span class=\"crayon-e\">nvarchar</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">10</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5952c9cf8f0e5434279280-3\"><span class=\"crayon-r\">declare</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">@</span><span class=\"crayon-e\">str_nv_cn </span><span class=\"crayon-e\">nvarchar</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">10</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5952c9cf8f0e5434279280-4\"><span class=\"crayon-i\">set</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">@</span><span class=\"crayon-v\">str_v</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">' ab '</span></div><div class=\"crayon-line\" id=\"crayon-5952c9cf8f0e5434279280-5\"><span class=\"crayon-i\">set</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">@</span><span class=\"crayon-v\">str_nv</span><span class=\"crayon-o\">=</span><span class=\"crayon-i\">N</span><span class=\"crayon-s\">' ab '</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5952c9cf8f0e5434279280-6\"><span class=\"crayon-i\">set</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">@</span><span class=\"crayon-v\">str_nv_cn</span><span class=\"crayon-o\">=</span><span class=\"crayon-i\">N</span><span class=\"crayon-s\">' 悦光阴'</span></div><div class=\"crayon-line\" id=\"crayon-5952c9cf8f0e5434279280-7\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5952c9cf8f0e5434279280-8\"><span class=\"crayon-e\">select </span><span class=\"crayon-e\">len</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">@</span><span class=\"crayon-v\">str_v</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">as</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">len</span><span class=\"crayon-sy\">_</span>v</div><div class=\"crayon-line\" id=\"crayon-5952c9cf8f0e5434279280-9\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">,</span><span class=\"crayon-e\">len</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">@</span><span class=\"crayon-v\">str_nv</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">as</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">len</span><span class=\"crayon-sy\">_</span>nv</div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5952c9cf8f0e5434279280-10\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">len</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">@</span><span class=\"crayon-v\">str_nv_cn</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">as</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">str_nv_cn</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0020 seconds] -->\r\n<p><a href=\"http://jbcdn2.b0.upaiyun.com/2017/06/324363ff7b01072ed79e2486cb2580e3.png\"><img class=\"alignnone size-full wp-image-111579 aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2017/06/324363ff7b01072ed79e2486cb2580e3.png\" alt=\"628084-20170328121759045-921067498\"></a></p>\n<h3>二，字节数量</h3>\n<p>对于varchar类型，大家都知道，这是单字节字符，一个字符占用一个字节，总共能够表示的256个字符；而对于nvarchar类型，一个字符占用两个字节，能够表示世界上所有的字符集，一个unicode字符占用两个字节，如果要计算字符串占用的字节数量（number of bytes），请使用DataLength()函数，该函数统计字节数量时，字符串的所有字符都会计算在内，包括前导空格和结尾空格。</p>\n<p>示例，每个unicode字符占2B，ASCII 字符占1B。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5952c9cf8f0f3518139704\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\ndeclare @str_v varchar(10)\r\ndeclare @str_nv nvarchar(10)\r\ndeclare @str_nv_cn nvarchar(10)\r\nset @str_v=' ab '\r\nset @str_nv=N' ab '\r\nset @str_nv_cn=N' 悦光阴'\r\n\r\nselect datalength(@str_v) as len_v\r\n    ,datalength(@str_nv) as len_nv\r\n    , datalength(@str_nv_cn) as str_nv_cn</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5952c9cf8f0f3518139704-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5952c9cf8f0f3518139704-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5952c9cf8f0f3518139704-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5952c9cf8f0f3518139704-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5952c9cf8f0f3518139704-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5952c9cf8f0f3518139704-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5952c9cf8f0f3518139704-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5952c9cf8f0f3518139704-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5952c9cf8f0f3518139704-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5952c9cf8f0f3518139704-10\">10</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5952c9cf8f0f3518139704-1\"><span class=\"crayon-r\">declare</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">@</span><span class=\"crayon-e\">str_v </span><span class=\"crayon-e\">varchar</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">10</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5952c9cf8f0f3518139704-2\"><span class=\"crayon-r\">declare</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">@</span><span class=\"crayon-e\">str_nv </span><span class=\"crayon-e\">nvarchar</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">10</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5952c9cf8f0f3518139704-3\"><span class=\"crayon-r\">declare</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">@</span><span class=\"crayon-e\">str_nv_cn </span><span class=\"crayon-e\">nvarchar</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">10</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5952c9cf8f0f3518139704-4\"><span class=\"crayon-i\">set</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">@</span><span class=\"crayon-v\">str_v</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">' ab '</span></div><div class=\"crayon-line\" id=\"crayon-5952c9cf8f0f3518139704-5\"><span class=\"crayon-i\">set</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">@</span><span class=\"crayon-v\">str_nv</span><span class=\"crayon-o\">=</span><span class=\"crayon-i\">N</span><span class=\"crayon-s\">' ab '</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5952c9cf8f0f3518139704-6\"><span class=\"crayon-i\">set</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">@</span><span class=\"crayon-v\">str_nv_cn</span><span class=\"crayon-o\">=</span><span class=\"crayon-i\">N</span><span class=\"crayon-s\">' 悦光阴'</span></div><div class=\"crayon-line\" id=\"crayon-5952c9cf8f0f3518139704-7\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5952c9cf8f0f3518139704-8\"><span class=\"crayon-e\">select </span><span class=\"crayon-e\">datalength</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">@</span><span class=\"crayon-v\">str_v</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">as</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">len</span><span class=\"crayon-sy\">_</span>v</div><div class=\"crayon-line\" id=\"crayon-5952c9cf8f0f3518139704-9\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">,</span><span class=\"crayon-e\">datalength</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">@</span><span class=\"crayon-v\">str_nv</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">as</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">len</span><span class=\"crayon-sy\">_</span>nv</div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5952c9cf8f0f3518139704-10\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">datalength</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">@</span><span class=\"crayon-v\">str_nv_cn</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">as</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">str_nv_cn</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0019 seconds] -->\r\n<p><a href=\"http://jbcdn2.b0.upaiyun.com/2017/06/f7ff564bbbb1bbb08e567f1ee128f50a.png\"><img class=\"alignnone size-full wp-image-111580 aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2017/06/f7ff564bbbb1bbb08e567f1ee128f50a.png\" alt=\"628084-20170328122211139-1419020285\"></a></p>\n<h3>三，依赖字符数量的函数</h3>\n<p>对于字符串函数：left，right，其长度值是指字符的数量；对于含有位置参数的字符串函数，charindex、stuff 和 substring，是以字符数量来计算起始位置和长度。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5952c9cf8f0fa561398348\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nSTUFF ( character_expression , start , length , replaceWith_expression )\r\nSUBSTRING ( expression ,start , length )\r\nRIGHT ( character_expression , length )\r\nLEFT ( character_expression , length )</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5952c9cf8f0fa561398348-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5952c9cf8f0fa561398348-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5952c9cf8f0fa561398348-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5952c9cf8f0fa561398348-4\">4</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5952c9cf8f0fa561398348-1\"><span class=\"crayon-e\">STUFF</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">character</span><span class=\"crayon-sy\">_</span>expression<span class=\"crayon-h\"> </span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">start</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">length</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">replaceWith</span><span class=\"crayon-sy\">_</span>expression<span class=\"crayon-h\"> </span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5952c9cf8f0fa561398348-2\"><span class=\"crayon-e\">SUBSTRING</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">expression</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">,</span><span class=\"crayon-i\">start</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">length</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5952c9cf8f0fa561398348-3\"><span class=\"crayon-e\">RIGHT</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">character</span><span class=\"crayon-sy\">_</span>expression<span class=\"crayon-h\"> </span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">length</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5952c9cf8f0fa561398348-4\"><span class=\"crayon-e\">LEFT</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">character</span><span class=\"crayon-sy\">_</span>expression<span class=\"crayon-h\"> </span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">length</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">)</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0019 seconds] -->\r\n<p></p>\n<h3>四，查看数据类型（Data Type）所占用的存储空间</h3>\n<p>DataLength()函数能过返回任意数据类型的变量所占用的字节数量，在设计表的schema时，为column定义窄的数据类型，在存储海量数据行时，该函数十分有用。</p>\n<p>例如，对于datetime类型占用固定的8B，DateTime2数据类型存储日期和时间，占用的存储空间不固定。根据存储的时间部分 fractional seconds precision来确定DateTime2的Storage Size，6 bytes for precisions less than 3; 7 bytes for precisions 3 and 4. All other precisions require 8 bytes.</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5952c9cf8f101545480429\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\ndeclare @dt1 datetime\r\ndeclare @dt2 datetime2(2)\r\ndeclare @dt3 datetime2(4)\r\n\r\nset @dt1=getdate()\r\nset @dt2=getdate()\r\nset @dt3=SYSDATETIME()\r\n\r\nselect DATALENGTH(@dt1),DATALENGTH(@dt2),DATALENGTH(@dt3),@dt1,@dt2,@dt3</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5952c9cf8f101545480429-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5952c9cf8f101545480429-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5952c9cf8f101545480429-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5952c9cf8f101545480429-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5952c9cf8f101545480429-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5952c9cf8f101545480429-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5952c9cf8f101545480429-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5952c9cf8f101545480429-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5952c9cf8f101545480429-9\">9</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5952c9cf8f101545480429-1\"><span class=\"crayon-r\">declare</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">@</span><span class=\"crayon-e\">dt1 </span><span class=\"crayon-e\">datetime</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5952c9cf8f101545480429-2\"><span class=\"crayon-r\">declare</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">@</span><span class=\"crayon-e\">dt2 </span><span class=\"crayon-e\">datetime2</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5952c9cf8f101545480429-3\"><span class=\"crayon-r\">declare</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">@</span><span class=\"crayon-e\">dt3 </span><span class=\"crayon-e\">datetime2</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">4</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5952c9cf8f101545480429-4\"> </div><div class=\"crayon-line\" id=\"crayon-5952c9cf8f101545480429-5\"><span class=\"crayon-i\">set</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">@</span><span class=\"crayon-v\">dt1</span><span class=\"crayon-o\">=</span><span class=\"crayon-e\">getdate</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5952c9cf8f101545480429-6\"><span class=\"crayon-i\">set</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">@</span><span class=\"crayon-v\">dt2</span><span class=\"crayon-o\">=</span><span class=\"crayon-e\">getdate</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5952c9cf8f101545480429-7\"><span class=\"crayon-i\">set</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">@</span><span class=\"crayon-v\">dt3</span><span class=\"crayon-o\">=</span><span class=\"crayon-e\">SYSDATETIME</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5952c9cf8f101545480429-8\"> </div><div class=\"crayon-line\" id=\"crayon-5952c9cf8f101545480429-9\"><span class=\"crayon-e\">select </span><span class=\"crayon-e\">DATALENGTH</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">@</span><span class=\"crayon-v\">dt1</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">,</span><span class=\"crayon-e\">DATALENGTH</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">@</span><span class=\"crayon-v\">dt2</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">,</span><span class=\"crayon-e\">DATALENGTH</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">@</span><span class=\"crayon-v\">dt3</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">,</span><span class=\"crayon-sy\">@</span><span class=\"crayon-v\">dt1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-sy\">@</span><span class=\"crayon-v\">dt2</span><span class=\"crayon-sy\">,</span><span class=\"crayon-sy\">@</span><span class=\"crayon-v\">dt3</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0017 seconds] -->\r\n<p><a href=\"http://jbcdn2.b0.upaiyun.com/2017/06/65ccc2c189f61e5fd1b6b6c0669ae320.jpg\"><img class=\"alignnone size-medium wp-image-111581 aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2017/06/65ccc2c189f61e5fd1b6b6c0669ae320-300x17.jpg\" alt=\"628084-20160919162750918-586033428\"></a></p>\n<p>如果对time的精度（Precision）要求不是很高，保留2位毫秒，使用datetime2(2)，比其他类型节省存储空间。</p>\n<p> </p>\n<p>参考doc：</p>\n<p><a href=\"https://msdn.microsoft.com/en-us/library/ms181984(v=sql.110).aspx\" target=\"_blank\">String Functions (Transact-SQL)</a></p>\n<p><a href=\"https://msdn.microsoft.com/en-us/library/ms190329.aspx\" target=\"_blank\">LEN (Transact-SQL)</a></p>\n<p><a href=\"https://msdn.microsoft.com/en-us/library/ms173486.aspx\" target=\"_blank\">DATALENGTH (Transact-SQL)</a></p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"111578\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"111578votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"111578\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i>  收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i>  评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "publish_date": "2017/06/26", "comment_nums": 0, "remote_img_url": ["http://jbcdn2.b0.upaiyun.com/2017/06/324363ff7b01072ed79e2486cb2580e3.png"], "title": "字符串的长度，是字符数量，还是字节数量？", "local_img_url": ["f"]},{"praise_nums": "1", "fav_nums": "5", "tags": "开发", "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">本文由 <a href=\"http://blog.jobbole.com\">伯乐在线</a> - <a href=\"http://www.jobbole.com/members/alvendarthy\">alvendarthy</a> 翻译。未经许可，禁止转载！<br>英文出处：<a target=\"_blank\" href=\"https://myers.io/2017/04/04/the-joel-test-for-2017/\">Dale Myers</a>。欢迎加入<a target=\"_blank\" href=\"http://group.jobbole.com/category/feedback/trans-team/\">翻译组</a>。</div><p>【伯乐在线导读】：「Joel 测试」是 Joel Spolsky 在 2000 年提出的 12 个问题，用来检验一个团队是否是好的开发团队。17 年过去了，Dale Myers 重新审视了这12个问题，并与时俱进地提出了修改建议。</p>\n<hr>\n<p>就在 2013 年，我参加了一个课程：“软件的架构、执行和管理”。其中主题之一，就是如何评价一个开发团队？这不是一个简单的问题，如果要得到一个完整的答案，最后一定需要一些必要的研究，一篇冗长的报告。还好，Joel Spolsky 提出了12 个非常简单的测试问题，相对无痛地解决这个问题，这些问题被称为“Joel 测试”。该测试不是非常严谨，也无意于此。但是它可以为你提供坚实基础，进一步了解其他细节。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5952d93f7fb85866687360\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" touchscreen minimize scroll-mouseover\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n1. 是否使用源码控制？\r\n2. 能实现一键编译吗?\r\n3. 是否进行每日编译？\r\n4. 有无 bug 数据库？\r\n5. 在编码前是否解决bug？\r\n6. 是否有实时更新的计划表？\r\n7. 是否有文档？\r\n8. 开发人员有安静的开发环境吗?\r\n9. 是否使用市面上最好的工具？\r\n10. 是否有测试人员？\r\n11. 新员工面试时写代码吗？\r\n12. 是否进行走廊可用性测试？</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5952d93f7fb85866687360-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5952d93f7fb85866687360-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5952d93f7fb85866687360-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5952d93f7fb85866687360-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5952d93f7fb85866687360-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5952d93f7fb85866687360-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5952d93f7fb85866687360-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5952d93f7fb85866687360-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5952d93f7fb85866687360-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5952d93f7fb85866687360-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5952d93f7fb85866687360-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5952d93f7fb85866687360-12\">12</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5952d93f7fb85866687360-1\"><span class=\"crayon-cn\">1.</span><span class=\"crayon-h\"> </span>是否使用源码控制？</div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5952d93f7fb85866687360-2\"><span class=\"crayon-cn\">2.</span><span class=\"crayon-h\"> </span>能实现一键编译吗<span class=\"crayon-sy\">?</span></div><div class=\"crayon-line\" id=\"crayon-5952d93f7fb85866687360-3\"><span class=\"crayon-cn\">3.</span><span class=\"crayon-h\"> </span>是否进行每日编译？</div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5952d93f7fb85866687360-4\"><span class=\"crayon-cn\">4.</span><span class=\"crayon-h\"> </span>有无<span class=\"crayon-h\"> </span><span class=\"crayon-i\">bug</span><span class=\"crayon-h\"> </span>数据库？</div><div class=\"crayon-line\" id=\"crayon-5952d93f7fb85866687360-5\"><span class=\"crayon-cn\">5.</span><span class=\"crayon-h\"> </span>在编码前是否解决<span class=\"crayon-i\">bug</span>？</div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5952d93f7fb85866687360-6\"><span class=\"crayon-cn\">6.</span><span class=\"crayon-h\"> </span>是否有实时更新的计划表？</div><div class=\"crayon-line\" id=\"crayon-5952d93f7fb85866687360-7\"><span class=\"crayon-cn\">7.</span><span class=\"crayon-h\"> </span>是否有文档？</div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5952d93f7fb85866687360-8\"><span class=\"crayon-cn\">8.</span><span class=\"crayon-h\"> </span>开发人员有安静的开发环境吗<span class=\"crayon-sy\">?</span></div><div class=\"crayon-line\" id=\"crayon-5952d93f7fb85866687360-9\"><span class=\"crayon-cn\">9.</span><span class=\"crayon-h\"> </span>是否使用市面上最好的工具？</div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5952d93f7fb85866687360-10\"><span class=\"crayon-cn\">10.</span><span class=\"crayon-h\"> </span>是否有测试人员？</div><div class=\"crayon-line\" id=\"crayon-5952d93f7fb85866687360-11\"><span class=\"crayon-cn\">11.</span><span class=\"crayon-h\"> </span>新员工面试时写代码吗？</div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5952d93f7fb85866687360-12\"><span class=\"crayon-cn\">12.</span><span class=\"crayon-h\"> </span>是否进行走廊可用性测试？</div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0016 seconds] -->\r\n<p><strong>Joel 测试的优点在于：仅仅通过很小一组是非题，就可以得到需要的答案</strong>。你无需关注任何例外，或任何附加条件，只需要单纯的关注每个问题的答案是 yes 还是 no，就可以得到需要的结果： 12 分为优，11 分为良， 10 分及以下为差。这个优点并没有被我和我的几个同学忽视。我立刻将这个方法用到评估那些我面试实习的公司，以及后来毕业后第一份工作的公司。大多数雇主从来没有听说过这个测试，这倒不意外。真正令人意外的是，有多少公司没有通过该测试，而我曾认为这些公司非常棒！</p>\n<p><strong>我提问的不准确吗？他们真的理解我的意思吗？再或者我统计 12 个问题的时候算错了？</strong></p>\n<p>在面试时遇到 ”你还有什么想要问我们的吗？“ 这种问题时，Joel 测试是回答这个问题的大杀器，但是基本都没有及格的。当然，有可能刚好我面试的公司都很差劲，但是，尽管我是软件行业的新人，但是我有个感觉，事实绝非如此。我将该测试带入我的一些应用，发现我竟没有在任何地方考虑到这些问题。</p>\n<p><strong>那么我在 Joel 测试中出了什么问题呢？</strong></p>\n<p>每个开发人员都是不同的，他们对好坏都有着自己的标准，而且这个标准还会随着时间变化。Joel 测试试图规避这种偏差，用客观题替代了主观题。相信没有任何开发人员会反对，跟踪 bug 是个好想法，但是其他的问题呢？</p>\n<p>从 2000 年发布开始，Joel 测试已经有 17 个年头了。它比 OS X 的历史还要久。在同一时期，Windows 2000 还是当时技术最高水平，PlayStation 2 刚刚发布， 奔腾 III 处理器还在 1GHz 下嗡嗡地工作。 在计算机世界里，这确实是很久以前的事了。随着处理器计算能力（还有硬件的整体性能）每18个月翻番，我们的开发进程也一同提升了。Joel 测试的问题反映了当时软件开发的时代缩影。时至 2017 年，它们就未必非常恰当了。</p>\n<p>以第一个问题为例：</p>\n<blockquote><p>是否有源码控制？</p></blockquote>\n<p>如今最流行的版本控制系统——Git，在当时还没有出现。好吧，众所周知，Git 直到 2005 年才出现。也不要忘记，前任的版本控制系统之王——Subversion 也是到 2000 年才出现，比 Joel 测试首次发布晚了 2 个月。那时源码控制出现了，但是却不像今天这样普遍。这是不是意味着，今天还讨论源码控制这个问题显得多此一举呢？可能吧！我们应该修改这个问题与时俱进吗？也许吧！</p>\n<p>让我们一起来看看这些问题，然后看看如何与时俱进吧。</p>\n<h3 id=\"do-you-use-source-control\">1. 是否使用源码控制？</h3>\n<p>除了上面提到的，时至今日，这个问题似乎依然有意义。任何团队都需要源码控制，这是毋庸置疑的。如今的争议主要在是否使用集中式版本控制系统。一般的项目使用 Git 或者 Mercurial （举例来说）都可以。大型公司拥有超大型代码仓库，一般采用集中式版本控制系统。这个问题没有绝对答案。真正重要的是，有版本控制！既然这个问题已经是常识，我认为它就没必要继续存在了。</p>\n<p><span style=\"color: #ff0000;\"><strong>更新建议： 删除</strong></span></p>\n<h3>2. 能实现一键编译吗?</h3>\n<p>Joel 的解释如下：</p>\n<blockquote><p>从最新的代码快照编译出交付版本，一共需要多少步？</p></blockquote>\n<p>其背后的原因，今天依然成立。好了，我认为这是我们对老问题的第一个挑战。我一直认为，编译交付版本，应当 0 步骤完成。持续集成已经广泛存在。使用它是非常明智的。创建一个交付版本的步骤应当这样：程序员们提交代码，当管理人员，或者其他负责人准备 release 时，他只需要点击 ”release“ 按钮即可，然后就成功了。所有开发人员只需要确保他们提交的代码无误，持续集成服务自动会完成其他工作。</p>\n<p>持续集成系统将软件开发产业向前推进了一大步。如果我们能更广泛的使用，充分发挥它的潜力，我们将受益良多。</p>\n<p><span style=\"color: #ff0000;\"><strong>更新建议：所有版本，都由持续集成服务器自动编译吗？</strong></span></p>\n<h3 id=\"do-you-make-daily-builds\">3. 是否进行每日编译？</h3>\n<p>这个问题紧随第 2 个。如果对团队有用的话，每日编译是可行的。我一直认为每日应当是最低限度了。在我眼里更好的实践是，确保主开发分支的每一次提交，都可以正常的完成编译。这算是一种“预览”版本，同时也意味着你能更快、更有效地发现自己的问题，因为一旦发生任何故障，非常容易确认其版本。</p>\n<p>该编译过程应当由持续集成系统自动完成。还有，你不止应当进行每日编译，而且应该使用它们。当然，如果你开发那些与你日常工作无关的软件时（定制或者专业软件），很难做到这一点。比如你在开发一款会计软件，或者火箭控制程序，显然你不可能使用这些产品。然而，我的建议是，每天至少花20分钟看看你的软件，试用一下，确保一切正常。假如你开发的软件每天都能用得到，那就更好了。它的作用与前面提到的 20 分钟试用一样，但在实际操作中，你可以进行远超 20 分钟的测试，使项目暴露在更加真实的场景下。</p>\n<p><span style=\"color: #ff0000;\"><strong>更新建议：是否执行每日编译，并使用这些版本？</strong></span></p>\n<h3>4. 有无 bug 数据库？</h3>\n<p>当然啦，你应该使用某种 bug 数据库。你听说过任何人认为没这个必要吗？如今发生变化的是，bug 跟踪有了更加丰富的特性。它们已经不再单单是一个数据库表的接口，而是拥有丰富功能的规划、管理程序，通常在任务和 bug 之间有显著区别（参考第 5 条）。</p>\n<p>如今，当你提交一个bug时，它有标题、描述、复现步骤、影响平台等等信息，一般都是如此。如今不同的是，管理将贯穿你的 bug 处理，bug 会被分派到若干迭代中，你需要利用看板规划任务，你的敏捷开发组长会就那些有困难的任务与你进行谈话。</p>\n<p>问题跟踪器也不仅仅是记录需要做的事。它包含谁执行了操作，对团队的影响，对产品的影响，以及其他上百个属性。那么，我认为你应该有某种软件来做这些事情，这都不重要，它就是你的某种问题跟踪器。因为各个团队的情况有所差异，这个问题也没有确切的答案。我所做的一点调整，只是为了用文字的一点不同，来反映我们现有的能力。</p>\n<p><span style=\"color: #ff0000;\"><strong>更新建议：你是否使用问题追踪器（issue tracker）？</strong></span></p>\n<h3 id=\"do-you-fix-bugs-before-writing-new-code\">5. 在编码前是否解决bug？</h3>\n<p>Joel 对这一点的重要性给出了非常好的论述，17 年后的今天，它依然成立。</p>\n<p><span style=\"color: #ff0000;\"><strong>更新建议：无</strong></span></p>\n<h3 id=\"do-you-have-an-up-to-date-schedule\">6. 是否有实时更新的计划表？</h3>\n<p>作为开发人员，你可能没那么关心计划表。如果你的团队没有在按时完成任务会怎样？不是你的问题吗？把这个问题留给管理人员吧！</p>\n<p>留个管理人员，也许有用，也许没用。如今，我们有各种敏捷开发理论，从开发人员，或者其他任何估时比较靠谱的人那里，得到的项目预估，是进行项目规划的关键要素。这帮助我们安排团队工作、谁来做这些工作，以及何时做这些工作。你可以掩耳盗铃，假装事事与你无关，但是最终，每一个人都需要对整个团队有一份责任。</p>\n<p>这一条今天还有效吗？必须的！当然了，我们已经不用瀑布流了。确保准时达到测试阶段，对我们已经没有太多意义了，但在敏捷开发（很多人深信，跟“现编现造”一个意思），特别是敏捷开发，计划表是最重要的，而且需要时刻保持更新。如今不同的是，计划表会根据新信息，保持更新。</p>\n<p><span style=\"color: #ff0000;\"><strong>更新建议：无</strong></span></p>\n<h3 id=\"do-you-have-a-spec\">7. 是否有文档？</h3>\n<p>计划表那一条完整的被保留下来，文档却未必同样走运。在瀑布流流行的时候，文档是你了解开发目标的关键。如果你无法有效调配资源，那么你的项目，注定会失败。</p>\n<p>回到 2001 年，当你创建一个程序时，无论是一台咖啡机，一台火箭，或者只是一个简单的 CRUD（Create、Retrieve、Update、Delete等） 界面，你都很清楚需要做什么，以及大约需要多少开销，逐步实现它。开发人员、测试人员、项目管理人员各司其职，大家全程根据文档展开工作，测试，交付，然后进入下一个项目。而今，在很多方面已经不是这样了。当然了，如果你还在开发上面提到的东西，情况就基本没什么变化。但是，如果你在开发 Twitter 客户端呢？或者文本编辑器呢？再或者邮件客户端？以前的老方法还依然有效吗？通常不是。</p>\n<p>只有当你可以从一开始就获得所有信息，并用来完成规划，文档才是有效的。当你的软件需要持续开发时，文档只在 MVP（Minimum Viable Product，最小可行产品）阶段比较重要，在此之后，它的用处就很小了。要让文档在今天依然保持重要性，就必须实时更新信息，并相应地适应当前进度和产品情况。</p>\n<p>这里所谓的信息，可以通过很多形式获得。可能只是简单的模拟用户如何使用APP，或者应该更进一步，如果可能的话，应当对新特性和设计进行 A/B 测试。</p>\n<p><strong><span style=\"color: #ff0000;\">更新建议：是否有关于产品功能和使用相关的最新信息？</span></strong></p>\n<h3 id=\"do-programmers-have-quiet-working-conditions\">8. 程序员有安静的开发环境吗?</h3>\n<p>当回想八九十年代的软件开发环境，一片小隔间的海洋就会进入脑海。如今，情形基本没变，唯独发生变化的是，隔断变得更小了，或者隔断在所谓的“开放式”办公室里，直接消失了。</p>\n<p>我个人而言，我并不喜欢开放式办公室。我喜欢自己的办公室，我就可以拥有单独的开发时间，完全看我的喜好，我可以打开音乐，让我步入状态。然而并不是所有人都同意我的观点。我知道很多人喜欢开放式办公，这样更加有效率，促进团队成员之间直接沟通，通常可以获得更快、更好的问题解决方案。</p>\n<p>这条规则对工作环境的要求，并不是什么特例。开放式办公室，通常比你自己的办公室更加嘈杂。每当有人问起关于开放式办公室的噪音问题时，我通常的解决方案就是带上耳机。通过消音技术，基本能解决绝大多数问题。这是我平常在开放办公室的办法。</p>\n<p>总之，安静的工作环境，无非就是独立办公室和开放办公室之间的取舍，这两个也没有孰优孰劣。</p>\n<p><img id=\"pic\" class=\"M_cur_zoom_out aligncenter\" src=\"http://ww4.sinaimg.cn/large/7cc829d3gw1f5o84olqc5j20zk0qodjo.jpg\"></p>\n<p style=\"text-align: center;\">（ 《<a href=\"http://blog.jobbole.com/101501/\" target=\"_blank\">国内程序员的办公桌是什么样的？</a>》文中黄钊的晒图 ）</p>\n<p><strong><span style=\"color: #ff0000;\">更新建议：删除</span></strong></p>\n<h3 id=\"do-you-use-the-best-tools-money-can-buy\">9. 是否使用市面上最好的工具？</h3>\n<p>这一条是最难取舍的，事实上我是写完本文其他部分以后，才回头写这一部分。</p>\n<p>我通常遇到的情况是这样的，公司无法负担市面最好的工具。也就是今天无法负担而已，不代表以后不行。我认为这一条规则的精神依然是成立的。公司应当有义务，尽可能保证开发人员的工作惬意、开心。愉快、宽松的程序员会生产更好的代码。</p>\n<p>有一点一定要切记，这并不意味着必须要用重金砸向这些问题，如果优秀的工具是免费的，那肯定还是要用免费的。</p>\n<p> </p>\n<p><img id=\"pic\" class=\"M_cur_zoom_in aligncenter\" src=\"http://ww1.sinaimg.cn/large/7cc829d3gw1f5mkf3ee8wj20zk0qon0z.jpg\" width=\"734\" height=\"551\"></p>\n<p style=\"text-align: center;\">（《<span data-rel=\"title\"><a class=\"archive-title\" title=\"国外程序员的办公桌是什么样的？\" href=\"http://blog.jobbole.com/103205/\" target=\"_blank\">国外程序员的办公桌是什么样的？</a>》，</span>网友「土豆」晒图）</p>\n<p><span style=\"color: #ff0000;\"><strong>更新建议：无</strong></span></p>\n<h3 id=\"do-you-have-testers\">10. 是否有测试人员？</h3>\n<p>不同公司在测试方面是有区别的。几年前，就在我还是个实习生，到成为全职之间那段时间，微软复用工程师作为测试人员。我曾撰文说明，<a href=\"https://www.quora.com/Why-is-Microsoft-merging-its-SDE-and-SDET-positions-into-the-software-engineer-title\" target=\"_blank\">为什么我认为微软复用开发和测试人员</a>，很好的说明我作为实习生浪费了多少资源，还消除了曾鼓励我编写更好代码的安全网。现在这都在微软得到印证，我们还是看看 Joel 对此是怎么说的：</p>\n<blockquote><p>如果你的团队没有专业的测试人员，至少每 2~3 个开发人员一个测试人员，你要么会交付缺陷产品，要么你让时薪 $100 的开发人员，去做时薪 $30 测试人员的工作。</p></blockquote>\n<p>我和 Joel 观点的主要不同是，对于微软而言，开发人员和测试人员是一样的，开发人员的薪酬并不是测试人员的 3 倍。测试人员花费时间，遍历代码变更，确保提交的修改可用，而且没有引入新的问题，这些都与开发人员的时间一样有价值。当然，这也算安全网。</p>\n<p>拥有测试人员是很好的选择，但是 Joel 提出了更好的观点，那就是，你千万不要浪费测试人员的价值。</p>\n<p>开发人员需要对自己的代码负责。如果你不是特别确信自己的代码无 bug，就不应当提交。这意味着你需要进行人工测试、单元测试、集成测试等等。既然在未进行代码 review 之前，代码是不可提交的，那没有进行测试，又怎么可以提交呢？</p>\n<p>测试人员不需要遍历每一个变更，但是他们需要确保，产品作为一个整体依然是稳定的。他们应该能将他们的时间投入测试模型，这远比开发人员更加有价值。有测试人员并不是最关键的，有完整有效的测试计划才是。</p>\n<p><strong><span style=\"color: #ff0000;\">更新建议：是否有完整的测试计划。</span></strong></p>\n<h3 id=\"do-new-candidates-write-code-during-their-interview\">11. 新员工面试时写代码吗？</h3>\n<p>当你在很多类似 Hacker News，或者一些  Reddit 之类开发网站搜索关键字“面试”时，结果中的文章有多少对现在的面试流程是正面评价呢？非常少！每个人都很清楚，现在的面试系统很烂，我们需要更好的选择。在某人想出更好的之前，就当现在只有这么一个办法，虽然看起来不像什么好点子，我们就将就一下吧。</p>\n<p>目前有如下一些不同的面试方法：</p>\n<ol>\n<li>白板面试。</li>\n<li>做一个家庭作业式的小项目。</li>\n<li>到公司来，与我们一起工作 6 个月，作为试用期。</li>\n</ol>\n<p>有件事我们都有共识，开发人员应该编码。既然这是他们的工作，那你就应该在这方面测试他们。就不要用查找特定的语法错误这种问题来为难他们，也不要让他们选择你的团队的工作语言了，只要确保他们可以编码即可。</p>\n<p>就像我们前面看到的，这一条也是非常常识的问题，我觉得就没必要继续保留了。</p>\n<p><span style=\"color: #ff0000;\"><strong>更新建议：删除。</strong></span></p>\n<h3 id=\"do-you-do-hallway-usability-testing\">12. 是否进行走廊可用性测试？</h3>\n<p>这是一条鲜为人知的规则，我们看看 Joel 的定义：</p>\n<blockquote><p>走廊可用性测试是这样的，你在走廊里，随手请一位路人，帮忙测试你刚刚编写的代码。如果如此请了 5 个人帮忙，你就可以找到代码中 95% 影响可用性的问题。</p></blockquote>\n<p>现在，如果我说走廊可用性测试是个好东西，应该不会有太多人反对吧，但是对于灰色桌面背景上的灰色工具栏，上面还有灰色按钮的情况，这就未必了。电脑用户（如今这个定义非常宽泛）通常不是特别了解其工作原理。对于专业工具，你可能需要按钮提示信息、拖拽支持、键盘快捷方式等，这样就非常棒了。然而对于 Facebook，得让你的爷爷奶奶也能用才行。这需要清晰的设计：元素之间采用高对比度，在合理的位置进行交互，还要有适合的大小。</p>\n<p>在各种情况下，需要创建用户界面和用户体验，我所说的不仅仅是常规的 UI，而是类似“以合理的方式，控制文件保存操作”这样的事，这已经不是一个开发人员能做到的了，应该由专业人员来做。现在这是专业的 UI 和 UX 设计师应该掌握的一种专业技能。</p>\n<p><span style=\"color: #ff0000;\"><strong>更新建议：是否有专业的 UI 和 UX 设计师?</strong></span></p>\n<h2>现在我们看看「Joel 测试」变成什么样了：</h2>\n<p></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5952d93f7fb9a760439558\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" touchscreen minimize scroll-mouseover\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n1. 所有版本都是由一个持续集成服务自动完成的吗? \r\n2. 是否生成并使用每日版本? \r\n3. 是否有问题跟踪器?\r\n4. 写代码之前修正所有 bug 吗?\r\n5. 是否有实时更新的计划表?\r\n6. 是否实时更新产品功能和使用方法的文档?\r\n7. 是否使用市面上最好的工具？\r\n8. 是否有完整的测试计划？\r\n9. 是否有专业的 UI 和 UX 设计师？</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5952d93f7fb9a760439558-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5952d93f7fb9a760439558-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5952d93f7fb9a760439558-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5952d93f7fb9a760439558-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5952d93f7fb9a760439558-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5952d93f7fb9a760439558-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5952d93f7fb9a760439558-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5952d93f7fb9a760439558-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5952d93f7fb9a760439558-9\">9</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5952d93f7fb9a760439558-1\"><span class=\"crayon-cn\">1.</span><span class=\"crayon-h\"> </span>所有版本都是由一个持续集成服务自动完成的吗<span class=\"crayon-sy\">?</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5952d93f7fb9a760439558-2\"><span class=\"crayon-cn\">2.</span><span class=\"crayon-h\"> </span>是否生成并使用每日版本<span class=\"crayon-sy\">?</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line\" id=\"crayon-5952d93f7fb9a760439558-3\"><span class=\"crayon-cn\">3.</span><span class=\"crayon-h\"> </span>是否有问题跟踪器<span class=\"crayon-sy\">?</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5952d93f7fb9a760439558-4\"><span class=\"crayon-cn\">4.</span><span class=\"crayon-h\"> </span>写代码之前修正所有<span class=\"crayon-h\"> </span><span class=\"crayon-i\">bug</span><span class=\"crayon-h\"> </span>吗<span class=\"crayon-sy\">?</span></div><div class=\"crayon-line\" id=\"crayon-5952d93f7fb9a760439558-5\"><span class=\"crayon-cn\">5.</span><span class=\"crayon-h\"> </span>是否有实时更新的计划表<span class=\"crayon-sy\">?</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5952d93f7fb9a760439558-6\"><span class=\"crayon-cn\">6.</span><span class=\"crayon-h\"> </span>是否实时更新产品功能和使用方法的文档<span class=\"crayon-sy\">?</span></div><div class=\"crayon-line\" id=\"crayon-5952d93f7fb9a760439558-7\"><span class=\"crayon-cn\">7.</span><span class=\"crayon-h\"> </span>是否使用市面上最好的工具？</div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5952d93f7fb9a760439558-8\"><span class=\"crayon-cn\">8.</span><span class=\"crayon-h\"> </span>是否有完整的测试计划？</div><div class=\"crayon-line\" id=\"crayon-5952d93f7fb9a760439558-9\"><span class=\"crayon-cn\">9.</span><span class=\"crayon-h\"> </span>是否有专业的<span class=\"crayon-h\"> </span><span class=\"crayon-i\">UI</span><span class=\"crayon-h\"> </span>和<span class=\"crayon-h\"> </span><span class=\"crayon-i\">UX</span><span class=\"crayon-h\"> </span>设计师？</div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0017 seconds] -->\r\n<p>我们砍掉了部分规则，修正了其他的。但是这还没完。这只是我们如何修改已有规则，使之与时俱进，但是我们还需要新增一些如今非常重要的规则。</p>\n<h2 id=\"new-rules\">新增的 3 个规则</h2>\n<h3 id=\"does-all-code-go-through-code-review\">所有代码都经过 review 了吗？</h3>\n<p>每个人都会犯错，无论你是刚刚毕业的新人，还是身经百战的编程老司机，你都会犯错。我们总是过于依赖编译器帮我们发现错误，这并不是编译器的正确使用方法。这就是我们需要“测试”的原因。但是测试也可能失效，我们不能 100% 依赖它。对你的代码擦亮眼睛，能让你发现平时未发现的东西。除此之外，这还能让你的代码与团队代码风格保持一致，编译器通常不具备这样的能力（代码检查这个主题，我们换个机会再谈）。一致性良好的代码，可以方便团队成员阅读、使用你的代码。</p>\n<h3 id=\"do-you-have-coding-standards\">是否有编码标准？</h3>\n<p>这条规则与上面一条相互依存。编写代码非常重要，但是最终你需要能重读你的代码。很遗憾，现实并不是这样。所以，我们应该尽可能让代码易于阅读。首要任务就是，保证代码库的一致性。通过制定一系列规范，在团队内贯彻，令代码易于阅读和理解。在代码库中搜索最常用的模块、类型等等，清晰定义期望的代码风格，帮助新进开发人员逐步跟上进度，这比在开发过程中一点点明确风格要好的多。也可以在持续集成系统中，增加自动代码检查工具，推进这些代码规范。</p>\n<h3 id=\"are-new-employees-given-training\">新员工是否有培训？</h3>\n<p>这看起来显而易见，但事实上却并不常见。很多新进开发人员，加入一家公司，就立刻被投入深水区。这个过程对开发人员和公司，都是浪费。有一些会试着游起来，但是绝大多数会沉没。当你加入一家公司后，你应当获得工作所需的一些必要信息。我并不是说你应该在一间会议室里待一周，学习 HR 课程、聆听 VP 的宣讲，这确非我的本意。实际上你应该获得你所工作系统的文档，并且，有一位团队成员，给你当一段时间导师，以帮助你尽快跟上进度。没错，这意味着这个开发人员可能在培训阶段的输出会有所减少，但是在此之后，你就获得了两个开发人员，任何会算数的人，都会看出来，这事一笔值当的投资。</p>\n<h2 id=\"conclusion\">结语</h2>\n<p>那么，我们看看我们 2017 版 “Joel 测试”是怎样的：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5952d93f7fba2574827595\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" touchscreen minimize scroll-mouseover\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n1. 所有版本都是由一个持续集成服务器自动完成的吗? \r\n2. 是否生成并使用每日版本? \r\n3. 是否有问题跟踪器?\r\n4. 写代码之前修正所有 bug 吗?\r\n5. 是否有实时更新的计划表?\r\n6. 是否实时更新产品功能和使用方法的文档?\r\n7. 是否使用市面上最好的工具？\r\n8. 是否有完整的测试计划？\r\n9. 是否有专业的 UI 和 UX 设计师？\r\n10. 所有代码都进行 review 吗？\r\n11. 是否有代码规范？\r\n12. 新员工有培训吗？</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5952d93f7fba2574827595-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5952d93f7fba2574827595-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5952d93f7fba2574827595-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5952d93f7fba2574827595-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5952d93f7fba2574827595-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5952d93f7fba2574827595-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5952d93f7fba2574827595-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5952d93f7fba2574827595-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5952d93f7fba2574827595-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5952d93f7fba2574827595-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5952d93f7fba2574827595-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5952d93f7fba2574827595-12\">12</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5952d93f7fba2574827595-1\"><span class=\"crayon-cn\">1.</span><span class=\"crayon-h\"> </span>所有版本都是由一个持续集成服务器自动完成的吗<span class=\"crayon-sy\">?</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5952d93f7fba2574827595-2\"><span class=\"crayon-cn\">2.</span><span class=\"crayon-h\"> </span>是否生成并使用每日版本<span class=\"crayon-sy\">?</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line\" id=\"crayon-5952d93f7fba2574827595-3\"><span class=\"crayon-cn\">3.</span><span class=\"crayon-h\"> </span>是否有问题跟踪器<span class=\"crayon-sy\">?</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5952d93f7fba2574827595-4\"><span class=\"crayon-cn\">4.</span><span class=\"crayon-h\"> </span>写代码之前修正所有<span class=\"crayon-h\"> </span><span class=\"crayon-i\">bug</span><span class=\"crayon-h\"> </span>吗<span class=\"crayon-sy\">?</span></div><div class=\"crayon-line\" id=\"crayon-5952d93f7fba2574827595-5\"><span class=\"crayon-cn\">5.</span><span class=\"crayon-h\"> </span>是否有实时更新的计划表<span class=\"crayon-sy\">?</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5952d93f7fba2574827595-6\"><span class=\"crayon-cn\">6.</span><span class=\"crayon-h\"> </span>是否实时更新产品功能和使用方法的文档<span class=\"crayon-sy\">?</span></div><div class=\"crayon-line\" id=\"crayon-5952d93f7fba2574827595-7\"><span class=\"crayon-cn\">7.</span><span class=\"crayon-h\"> </span>是否使用市面上最好的工具？</div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5952d93f7fba2574827595-8\"><span class=\"crayon-cn\">8.</span><span class=\"crayon-h\"> </span>是否有完整的测试计划？</div><div class=\"crayon-line\" id=\"crayon-5952d93f7fba2574827595-9\"><span class=\"crayon-cn\">9.</span><span class=\"crayon-h\"> </span>是否有专业的<span class=\"crayon-h\"> </span><span class=\"crayon-i\">UI</span><span class=\"crayon-h\"> </span>和<span class=\"crayon-h\"> </span><span class=\"crayon-i\">UX</span><span class=\"crayon-h\"> </span>设计师？</div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5952d93f7fba2574827595-10\"><span class=\"crayon-cn\">10.</span><span class=\"crayon-h\"> </span>所有代码都进行<span class=\"crayon-h\"> </span><span class=\"crayon-i\">review</span><span class=\"crayon-h\"> </span>吗？</div><div class=\"crayon-line\" id=\"crayon-5952d93f7fba2574827595-11\"><span class=\"crayon-cn\">11.</span><span class=\"crayon-h\"> </span>是否有代码规范？</div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5952d93f7fba2574827595-12\"><span class=\"crayon-cn\">12.</span><span class=\"crayon-h\"> </span>新员工有培训吗？</div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0020 seconds] -->\r\n<p>好棒耶！让我们喜大普奔地照办起来吧。</p>\n<p>还是不要了！该测试不是万金油，只是个指导意见。它是一个指导系统，而非一套完整的评估系统。一个得到满分的企业，依然可能是一家不宜工作的地方。当然，如果一家公司连 10 分都拿不到，那这是家不靠谱的公司基本没跑。只要确保你的雇主能获得 11~12 这样的高分，然后根据自己的判断来。千万不要迷信！</p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"111551\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"111551votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"111551\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 5 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i>  评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n<div id=\"author-bio\">\r\n\t\r\n\t<h3 class=\"widget-title\">\r\n\t关于作者：<a target=\"_blank\" href=\"http://www.jobbole.com/members/alvendarthy\">alvendarthy</a>\r\n\t</h3>\r\n\t<div class=\"alignleft\">\r\n\t\t<a target=\"_blank\" href=\"http://www.jobbole.com/members/alvendarthy\">\r\n\t\t\t<img src=\"http://jbcdn2.b0.upaiyun.com/2015/04/8fbdaaa5ea6d3b49c8c1c825aafeb5d9.png\">\r\n\t\t</a>\r\n\t</div>\r\n\r\n    <div class=\"author-bio-info\">\r\n\r\n        <span class=\"author-bio-info-block\">\r\n            一个热爱生活的家伙！        </span>\r\n        <span class=\"author-bio-info-block\">\r\n            <a href=\"http://www.jobbole.com/members/alvendarthy\" target=\"_blank\"><i class=\"fa fa-user\"></i> 个人主页</a> ·\r\n            <a href=\"http://blog.jobbole.com/author/alvendarthy/\" target=\"_blank\"><i class=\"fa fa-file-text-o\"></i> 我的文章</a>\r\n\r\n             · <a title=\"声望值\" target=\"_blank\" href=\"http://www.jobbole.com/members/alvendarthy/reputation/\"><i class=\"fa fa-graduation-cap\"></i> 14</a>        </span>\r\n    </div>\r\n\t<div class=\"clear\"></div>\r\n</div>\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "publish_date": "2017/06/23", "comment_nums": 0, "remote_img_url": ["http://ww4.sinaimg.cn/large/7cc829d3gw1f5o84olqc5j20zk0qodjo.jpg"], "title": "开发团队到底好不好，这 12 个问题能检验出来吗？", "local_img_url": ["f"]},{"praise_nums": "5", "fav_nums": "16", "tags": "开发,职场,程序员,职场", "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">本文由 <a href=\"http://blog.jobbole.com\">伯乐在线</a> - <a href=\"http://www.jobbole.com/members/zhj318\">飞哥的咖啡</a> 翻译，<a href=\"http://www.jobbole.com/members/liuchang\">刘唱</a> 校稿。未经许可，禁止转载！<br>英文出处：<a target=\"_blank\" href=\"http://brianknapp.me/how-do-self-taught-developers-actually-get-jobs/\">Brian Knapp</a>。欢迎加入<a target=\"_blank\" href=\"http://group.jobbole.com/category/feedback/trans-team/\">翻译组</a>。</div><p>【伯乐在线导读】：2016 年有位年轻的程序员在 Quora 上提问求助：</p>\n<blockquote><p>我今年 17 岁，从 14 岁开始编程。我主要关注 Java 语言，并在 AP 计算机科学这门课上拿了 5 分。我相当精通 Java（比如语法、主要类、GUI/JFrame 等），HTML5 和 CSS3 也不错。我感觉自己缺乏很多有用的技能，来帮助我在人才市场上推销自己（比如数据库的工作原理，以及我应该使用哪些工具），我很好奇其他人是如何学习这些东西的。我打算去大学拿一个软件开发的学位，但我开始感到有点沮丧，觉得读大学的目的就是为了工作。现在有哪些我应该上的课程，或者应该做的事情吗？</p></blockquote>\n<p><img id=\"pic\" class=\"\" src=\"http://wx1.sinaimg.cn/large/7cc829d3gy1fgqaiwbj8uj20nj0d3757.jpg\" width=\"620\" height=\"345\"></p>\n<h3>下面是 Brain Knapp 的回答分享︰</h3>\n<p>我认为你的看法错了。你觉得你需要上课，让别人来教你，告诉你答案。从根本上讲，自学的程序员能够做不一样的事情。</p>\n<p>自学的程序员和自学的吉他手有很多共同点。我不知道你是否玩过吉他，所以我将向你解释如何自学吉他。</p>\n<p>首先，这一切的开始是由于某人与某个吉他手产生了共鸣。大多数突然想要自学吉他的人，是想要成为另一个吉他手。之后，他们下定决心——“我也可以成为一个吉他手 ”，于是去了当地的乐器店，买了一把二手吉他（因为二手吉他更便宜，但也很酷）。</p>\n<p>接下来可能会有两种情况，要不买一本“吉他入门”或类似的书籍开始自学，要不打开 YouTube，开始学习如何弹奏自己喜爱的歌。那些尝试学习弹奏喜欢的歌的自学者，往往学得更好。</p>\n<p>当年轻的吉他手主动地学习某首歌时，他们往往需要观看视频、打印曲谱、练习和弦等等。然后，根据拿到的视频和曲谱，他们会坐下来尝试重新演绎歌曲。</p>\n<p>经过数小时的练习，不断重复和弦、独奏、节拍等，他们将能够以自己的形式表演那首歌。它不再是原来那首歌，但也够酷。</p>\n<p>然后，他们会拿起另一首歌，重复这个过程。一路走来，他们不断学习节拍、技术以及其他的东西，甚至都没有意识到学习的内容。在知道专业名词和理论前，他们已经懂得如何操作。</p>\n<p><span style=\"color: #000000\">最终，弹吉他变成了一种“直觉”，学习一首新歌也变得习以为常且不再痛苦。吉他的“语言”变得像你我说话那样容易。</span></p>\n<p>这一切的发生，背后是数千小时的艰苦练习。即使每天只练习一小时，也需要耗费数年。</p>\n<p><strong>那么，这和自学的程序员有什么关系呢？</strong></p>\n<p><span style=\"color: #000000\">事实上，真正成就自学的程序员的，就是他们会自己创建东西，很多东西。</span>要成为一个具有卓越技能的出色程序员，你必须创建东西，写代码。</p>\n<p>上课学习理论知识固然是好的，但很多教授不能跳出条条框框的束缚，以自己的方式编程。就算他们努力尝试，也做不出别人愿意用的应用程序。</p>\n<p>这并不是说他们不了解教授的知识，而是说，作为一名教授，他们掌握的技能是研究和理论性理解，而不是写代码和为客户提供价值。</p>\n<p><strong>你看到区别了吗？</strong></p>\n<p>我合作过的最好的程序员，他们的工作方式就是做东西，做很多东西，并且几乎一直这样。</p>\n<p>例如，现在几乎每个人都使用 WordPress。在 WordPress 出现很久之前，我就用 PHP 和 MySQL 创建了 3 到 5 个不同的内容管理系统。我写过游戏、移动应用程序、框架，还有 SAAS 应用程序。</p>\n<p>没人付钱让我做这些事情。我做这些事纯粹是出于好玩、学习或好奇的目的。</p>\n<p>我已经好几年都没有上过课了，即使上了，我也不觉得这会对我的事业有任何帮助。然而，如果我决定坐下来，从头开始创建我自己的计算机语言或操作系统，我打赌我一定能在过程中学到很多有趣的东西。</p>\n<p>是的，我可以带着那些想法上课，但在创建东西，犯下错误，以及真正“体会到”这一切的经历中，相比读一本书或听一次讲座，我能收获更多。</p>\n<p>因此，我给你的建议（如果你做到了，相比没有做的那些人而言，会带给你巨大的优势），就是：</p>\n<p><strong><span style=\"color: #ff0000\">解决一个你想解决的问题</span>。</strong>创建一个用于某件事的软件，解决一些你本人或他人想要通过软件解决的问题。每天为这个软件写代码，晚上写，周末也写，每天都写。即使你每天只花了 15 分钟写代码，也没关系。</p>\n<p>最终，你将得到一个能用的软件，这很不错。</p>\n<p><span style=\"color: #ff0000\"><strong>然后，你再重复这一过程。做一个其他的东西。不断地做。花费大量的时间，通过创建更多的东西来提升你的技能。</strong></span></p>\n<p>做东西的同时，注意在你的网站上保存工作，并将其放在一个作品集中。每次你结束了一个项目，就将它上传到 Hacker News、Reddit 或其他什么网站，并发条关于它的博文。</p>\n<p>你现在仅仅 17 岁，当你 20 岁的时候，你已经轻松地将两千多小时用于锻炼技能，你的个人作品集中也有了大概十到二十多个软件，你学习到的经验是那些仅仅上课的人无法比拟的。</p>\n<p>更重要的是，你已经清楚地告诉别人，你能够独立地写代码，解决问题并给世界带来一些新东西。这是最难能可贵的一点，也是公司在不断追求的一点。</p>\n<p><span style=\"color: #ff0000\"><strong>一旦你找到了工作，请继续在业余时间创建东西，并提升你的工作技能</strong></span>。你的提升速度将比你的同事更快，因为他们在下班回家后看电视，而不是学习、成长或创建东西。他们拿到了薪水就回家享受去了。</p>\n<p>你做的越多，你学的也越多；你学的越多，你的价值就越高；你的价值越高，你就越容易找到工作，你的工资也就更高，这是一个良性循环。</p>\n<p>所以，去做些东西出来。现在就开始写代码吧！</p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"111497\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"111497votetotal\">5</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"111497\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 16 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i> 6 评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n<div id=\"author-bio\">\r\n\t\r\n\t<h3 class=\"widget-title\">\r\n\t关于作者：<a target=\"_blank\" href=\"http://www.jobbole.com/members/zhj318\">飞哥的咖啡</a>\r\n\t</h3>\r\n\t<div class=\"alignleft\">\r\n\t\t<a target=\"_blank\" href=\"http://www.jobbole.com/members/zhj318\">\r\n\t\t\t<img src=\"http://jbcdn2.b0.upaiyun.com/2016/09/9667abaa540914200edd449974fb5538.jpg\">\r\n\t\t</a>\r\n\t</div>\r\n\r\n    <div class=\"author-bio-info\">\r\n\r\n        <span class=\"author-bio-info-block\">\r\n            我见青山多妩媚，料青山见我应如是        </span>\r\n        <span class=\"author-bio-info-block\">\r\n            <a href=\"http://www.jobbole.com/members/zhj318\" target=\"_blank\"><i class=\"fa fa-user\"></i> 个人主页</a> ·\r\n            <a href=\"http://blog.jobbole.com/author/zhj318/\" target=\"_blank\"><i class=\"fa fa-file-text-o\"></i> 我的文章</a>\r\n\r\n             · <a title=\"声望值\" target=\"_blank\" href=\"http://www.jobbole.com/members/zhj318/reputation/\"><i class=\"fa fa-graduation-cap\"></i> 19</a> · <a title=\"QQ：574375911\" target=\"_blank\" href=\"#\"><i class=\"fa fa-qq\"></i></a>         </span>\r\n    </div>\r\n\t<div class=\"clear\"></div>\r\n</div>\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "publish_date": "2017/06/19", "comment_nums": "6", "remote_img_url": ["http://wx1.sinaimg.cn/large/7cc829d3gy1fgqaiwbj8uj20nj0d3757.jpg"], "title": "自学的程序员如何找到好工作？", "local_img_url": ["f"]},{"praise_nums": "1", "fav_nums": "4", "tags": "IT技术,ElasticSearch,Splunk", "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">原文出处： <a target=\"_blank\" href=\"https://my.oschina.net/taogang/blog/983586\">naughty</a>   </div><p>本文就架构，功能，产品线，概念等方面就ElasticSearch和Splunk做了一下全方位的对比，希望能够大家在制定大数据搜索方案的时候有所帮助。</p>\n<h2 id=\"h2_0\">简介</h2>\n<p><strong>ElasticSearch</strong> （<a href=\"https://www.elastic.co/\" rel=\"nofollow\">1</a>）（<a href=\"https://en.wikipedia.org/wiki/Elasticsearch\" rel=\"nofollow\">2</a>）是一个基于Lucene的开源搜索服务。它提供了一个分布式多用户能力的全文搜索引擎，基于RESTful web接口。Elasticsearch是用Java开发的，并作为Apache许可条款下的开放源码发布，是当前流行的企业级搜索引擎。设计用于<a href=\"http://baike.baidu.com/item/%E4%BA%91%E8%AE%A1%E7%AE%97\" target=\"_blank\" rel=\"nofollow\">云计算</a>中，能够达到实时搜索，稳定，可靠，快速，安装使用方便。</p>\n<p><strong>ELK</strong>是<a href=\"https://www.elastic.co/jp/products/elasticsearch\" rel=\"nofollow\">ElasticSearch</a>，<a href=\"https://www.elastic.co/jp/products/logstash\" rel=\"nofollow\">Logstash</a>，<a href=\"https://www.elastic.co/jp/products/kibana\" rel=\"nofollow\">Kibana</a>的缩写，分别提供搜索，数据接入和可视化功能，构成了Elastic的应用栈。</p>\n<p><strong>Splunk</strong> 是大数据领域第一家在纳斯达克上市公司，<a href=\"https://www.splunk.com/zh-hans_cn\" rel=\"nofollow\">Splunk</a>提供一个机器数据的引擎。使用 Splunk 可收集、索引和利用所有应用程序、服务器和设备（物理、虚拟和云中）生成的快速移动型计算机数据 。从一个位置搜索并分析所有实时和历史数据。 使用 Splunk 处理计算机数据，可让您在几分钟内（而不是几个小时或几天）解决问题和调查安全事件。监视您的端对端基础结构，避免服务性能降低或中断。以较低成本满足合规性要求。关联并分析跨越多个系统的复杂事件。获取新层次的运营可见性以及 IT 和业务智能。</p>\n<p>根据最新的<a href=\"https://db-engines.com/en/ranking\" rel=\"nofollow\">数据库引擎排名</a>显示，Elastic，Solr和Splunk分别占据了数据库搜索引擎的前三位。</p>\n<p><img src=\"https://static.oschina.net/uploads/space/2017/0614/102156_SGGq_1450051.png\" width=\"942\" height=\"642\"></p>\n<p>从<a href=\"https://db-engines.com/en/ranking_trend\" rel=\"nofollow\">趋势</a>上来看，Elastic和Splunk上升明显，Elastic更是表现出了非常强劲的势头。</p>\n<p><img src=\"https://static.oschina.net/uploads/space/2017/0614/102436_w14n_1450051.png\" width=\"963\" height=\"534\"></p>\n<h2 id=\"h2_1\">基本概念</h2>\n<p><a href=\"https://www.elastic.co/guide/en/elasticsearch/reference/current/_basic_concepts.html\" rel=\"nofollow\"><strong>Elastic</strong></a></p>\n<ul>\n<li>准实时(NRT)<br>\nElasticsearch是一个准实时性的搜索平台，从数据索引到数据可以被搜索存在一定的时延。</li>\n<li>索引（Index）<br>\n索引是有共同特性的文档的集合，索引有自己的名字，可以对索引执行搜索，更新，删除等操作。</li>\n<li>类型（Type）<br>\n每个索引可以包含一个或者多个类型，类型可以看作一个索引数据的逻辑分组，通常我们会把拥有相同字段的文档定义为同一个类型。</li>\n<li>文档（Document）<br>\n文档是索引信息的基本单元。Elastic中文档表现为JSON对象，文档物理存贮在索引中，并需要被制定一个类型。因为表现为JSON， 很自然的，文档是由一个个的字段（Feilds）组成，每个字段是一个名值对（Name Value Pair）</li>\n<li>评分（score）<br>\nElastic是基于<a href=\"https://lucene.apache.org/\" rel=\"nofollow\">Lucene</a>构建的，所以搜索的结果会有一个<a href=\"http://blog.chenlb.com/2009/08/lucene-scoring-architecture.html\" rel=\"nofollow\">打分</a>。来评价搜索结果和查询的相关性。</li>\n</ul>\n<p>下图是一个Elastic的搜索在Kibana中看到的例子，原始的数据是一个简单的日志文件：</p>\n<p><img src=\"https://static.oschina.net/uploads/space/2017/0614/143016_SOUq_1450051.png\" width=\"465\" height=\"187\"></p>\n<p>我们通过logstash索引到Elasticsearch后，就可以搜索了。</p>\n<p><img src=\"https://static.oschina.net/uploads/space/2017/0614/135259_AEE0_1450051.png\" width=\"1222\" height=\"712\"></p>\n<p><a href=\"https://www.splunk.com/content/dam/splunk2/pdfs/solution-guides/splunk-quick-reference-guide.pdf\" rel=\"nofollow\"><strong>Splunk</strong></a></p>\n<ul>\n<li>实时性<br>\nSplunk同样是准实时的，Splunk的实时搜索（<a href=\"http://docs.splunk.com/Documentation/SplunkCloud/6.6.0/Search/RealtimesearchesandreportsinSplunkWeb\" rel=\"nofollow\">Realtime Search</a>）可以提供不间断的搜索结果的数据流。</li>\n<li>事件（Event）<br>\n对应于Elastic的文档，Splunk的数据索引的基本单元是事件，每一个事件包含了一组值，字段，时间戳。Splunk的事件可以是一段文本，一个配置文件，一段日志或者JSON对象。</li>\n<li>字段（Fields）<br>\n字段是可以被搜索的名值对，不同的事件可能拥有不同的字段。Splunk支持索引时（index time）和搜索时（search time）的字段抽取（fields extraction）</li>\n<li>索引（Indexes）<br>\n类似Elastic的索引，所有的事件物理存储在索引上，可以把索引理解为一个数据库的表。</li>\n<li>知识对象（Knowledge Object）<br>\nSplunk的知识对象提供对数据进一步的解释，分类，增强等功能，包括：字段（fields），字段抽取（fields extraction），事件类型（event type），事务（transaction），查找（lookups），标签（tags），别名（aliases），数据模型（data model）等等。</li>\n</ul>\n<p>下图是一个Splunk的搜索在Splunk客户端看到的和前一个例子同样的日志数据的搜索结果。</p>\n<p><img src=\"https://static.oschina.net/uploads/space/2017/0614/135439_CcWN_1450051.png\" width=\"924\" height=\"809\"></p>\n<p>从基本概念上来看，Elasticsearch和Splunk基本一致。从例子中我们可以看到很多的共性，事件／文档，时间戳，字段，搜索，时间轴图等等。其中有几个主要的差别：</p>\n<ul>\n<li>Elastic不支持搜索时的字段抽取，也就是说Elastic的文档中的所有字段在索引时已经固定了，而Splunk支持在搜索时，动态的抽取新的字段</li>\n<li>Elastic的搜索是基于评分机制的，搜索的结果有一个打分，而Splunk没有对搜索结果评分</li>\n<li>Splunk的知识对象可以提供对数据更高级，更灵活的管理能力。</li>\n</ul>\n<h2 id=\"h2_2\">用户接口</h2>\n<p>ElasticSearch提供REST API来进行</p>\n<ul>\n<li>集群的管理，监控，健康检查</li>\n<li>索引的管理（CURD）</li>\n<li>搜索的执行，包括排序，分页，过滤，脚本，聚合等等高级的搜索功能。</li>\n</ul>\n<p>Elasticsearch 本身并没有提供任何UI的功能，搜索可以用Kibana，但是没有管理UI还是让人不爽的，好在开源的好处就是会有很多的开发者来构建缺失的功能：</p>\n<ul>\n<li><a href=\"http://www.elastichq.org/\" rel=\"nofollow\">ElasticHQ</a></li>\n<li><a href=\"https://github.com/lmenezes/cerebro\" rel=\"nofollow\">cerebro</a> (推荐，界面干净，我喜欢)</li>\n<li><a href=\"https://github.com/appbaseio/dejavu/tree/dev\" rel=\"nofollow\">dejavu</a></li>\n</ul>\n<p>另一选择就是安装X-Pack，这个是要收费的。</p>\n<p>Splunk作为企业软件，管理及访问接口比较丰富，除了REST API 和命令行接口，Splunk的UI非常友好易用，基本上所有的功能都能通过集成的UI来使用。同时提供以下接口</p>\n<ul>\n<li>REST API</li>\n<li>Splunk UI</li>\n<li>CLI</li>\n</ul>\n<h2 id=\"h2_3\">功能</h2>\n<h3 id=\"h3_4\">数据接入和获取</h3>\n<p><strong>Elastic</strong>栈使用Logstash和Beats来进行数据的消化和获取。</p>\n<p><a href=\"https://github.com/elastic/logstash\" rel=\"nofollow\">Logstash</a>用jruby实现，有点像一个数据管道，把输入的数据进行处理，变形，过滤，然后输出到其它地方。Logstash 设计了自己的 DSL，包括有区域，注释，数据类型(布尔值，字符串，数值，数组，哈希)，条件判断，字段引用等。</p>\n<p>Logstash的数据管道包含三个步骤，Input，Filter和Output，每一步都可以通过plugin来扩展。另外Input和Output还支持配置Codecs，完成对输入输出数据的编解码工作。</p>\n<p><img src=\"https://static.oschina.net/uploads/img/201706/19170803_cGoS.png\" alt=\"\"></p>\n<p>Logstash支持的常见的Input包含File，syslog，beats等。Filter中主要完成数据的变形处理，可以增删改字段，加标签，等等。作为一个开源软件，Output不仅仅支持ElasticSearch，还可以和许多其它软件集成和目标，Output可以是文件，graphite，数据库，Nagios，S3，Hadoop等。</p>\n<p><img src=\"https://static.oschina.net/uploads/img/201706/19170811_3g2R.jpg\" alt=\"\"></p>\n<p>在实际运用中，logstash 进程会被分为两个不同的角色。运行在应用服务器上的，尽量减轻运行压力，只做读取和转发，这个角色叫做 shipper；运行在独立服务器上，完成数据解析处理，负责写入 Elasticsearch 的角色，叫 indexer。</p>\n<p>logstash 作为无状态的软件，配合消息队列系统，可以很轻松的做到线性扩展</p>\n<p><a href=\"https://github.com/elastic/beats\" rel=\"nofollow\">Beats</a>是 Elastic 从 packetbeat 发展出来的数据收集器系统。beat 收集器可以直接写入 Elasticsearch，也可以传输给 Logstash。其中抽象出来的 libbeat，提供了统一的数据发送方法，输入配置解析，日志记录框架等功能。</p>\n<p><img src=\"https://static.oschina.net/uploads/img/201706/19170345_gLzF.png\" alt=\"\"></p>\n<p>开源社区已经贡献了<a href=\"https://www.elastic.co/guide/en/beats/libbeat/current/community-beats.html\" rel=\"nofollow\">许多的beats</a>种类。</p>\n<p>因为Beats是使用Golang编写的，效率上很不错。</p>\n<p><strong>Splunk</strong>使用Farwarder和Add-ons来进行数据的消化和获取。</p>\n<p>Splunk内置了对文件，syslog，网络端口等input的处理。当配置某个节点为Forwarder的时候，Splunk Forwarder可以作为一个数据通道把数据发送到配置好的indexer去。这时候，它就类似logstash。这里一个主要的区别就是对数据字段的抽取，Elastic必须在logstash中通过filter配置或者扩展来做，也就是我们所说的Index time抽取，抽取后不能改变。Splunk支持Index time的抽取，但是更多时候，Splunk 在index time并不抽取而是等到搜索是在决定如何抽取字段。</p>\n<p>对于特定领域的数据获取，Splunk是用<a href=\"https://www.splunk.com/en_us/products/apps-and-add-ons.html\" rel=\"nofollow\">Add-on</a>的形式。Splunk 的App市场上有超过600个不同种类的Add-on。</p>\n<p><img src=\"https://static.oschina.net/uploads/space/2017/0619/172840_Kc9n_1450051.png\" alt=\"\" width=\"788\" height=\"624\"></p>\n<p>用户可以通过特定的Add-on或者自己开发Add-on来获取特定的数据。</p>\n<p>对于大数据的数据采集，大家也可以参考我的<a href=\"https://my.oschina.net/taogang/blog/524385\" rel=\"nofollow\">另一篇博客</a>。</p>\n<h3 id=\"h3_5\">数据管理和存储</h3>\n<p>ElasticSearch的数据存贮模型来自于Lucene，基本原理是实用了倒排表。大家可以参考<a href=\"http://www.infoq.com/cn/articles/analysis-of-elasticsearch-cluster-part01\" rel=\"nofollow\">这篇文章</a>。</p>\n<p>Splunk的核心同样是倒排表，推荐大家看这篇去年Splunk Conf上的介绍，<a href=\"https://conf.splunk.com/files/2016/slides/behind-the-magnifying-glass-how-search-works.pdf\" rel=\"nofollow\">Behind the Magnifying Glass: How Search Works</a></p>\n<p><img src=\"https://static.oschina.net/uploads/space/2017/0619/173140_pJqA_1450051.png\" alt=\"\" width=\"2062\" height=\"890\"></p>\n<p>Splunk的Event存在许多Buckets中，多个Buckets构成逻辑分组的索引分布在Indexer上。</p>\n<p><img src=\"https://static.oschina.net/uploads/space/2017/0619/175300_F8F0_1450051.png\" width=\"2134\" height=\"836\"></p>\n<p>每个Bucket中都是倒排表的结构存储数据，原始数据通过gzip压缩。</p>\n<p><img src=\"https://static.oschina.net/uploads/space/2017/0619/191746_kL6q_1450051.png\" width=\"2066\" height=\"1052\"></p>\n<p>搜索时，利用Bloom filter定位数据所在的bucket。</p>\n<p>在对数据的存储管理上，Elastic 和Splunk都是利用了倒排表。Splunk对数据进行压缩，所以存储空间的占用要少很多，尤其考虑到大部分数据是文本，压缩比很高的，当然这会损失一部分性能用于数据的解压。</p>\n<h3 id=\"h3_6\">数据分析和处理</h3>\n<p>对数据的处理分析，ElasticSearch主要使用 <a href=\"https://www.elastic.co/guide/en/elasticsearch/reference/current/search.html\" rel=\"nofollow\">Search API</a>来实现。而Splunk则提供了非常强大的<a href=\"https://www.splunk.com/en_us/resources/search-processing-language.html\" rel=\"nofollow\">SPL</a>，相比起ES的Search API，Splunk的SPL要好用很多，可以说SPL就是非结构化数据的SQL。无论是利用SPL来开发分析应用，还是直接在Splunk UI上用SPL来处理数据，SPL都非常易用。开源社区也在试图为Elastic增加类似SPL的DSL来改善数据处理的易用性。例如：</p>\n<ul>\n<li><a href=\"https://github.com/chenryn/ESPL\" rel=\"nofollow\">https://github.com/chenryn/ESPL</a></li>\n</ul>\n<p>从这篇<a href=\"https://discuss.elastic.co/t/elastic-vs-splunk-query-feature-comparison-join-pipe-table-dedup-eval-chart-rex/23552\" rel=\"nofollow\">反馈</a>可以看出，ES的search还有许多的不足。</p>\n<p><img src=\"https://static.oschina.net/uploads/space/2017/0619/194302_paug_1450051.png\" width=\"2234\" height=\"1066\"></p>\n<p>作为对此的响应，Elastic推出了<a href=\"https://www.elastic.co/guide/en/elasticsearch/painless/current/painless-getting-started.html\" rel=\"nofollow\">painless script</a>，该功能还处于实验阶段。</p>\n<h3 id=\"h3_7\">数据展现和可视化</h3>\n<p>Kibana是一个针对Elasticsearch的开源分析及可视化平台，用来搜索、查看交互存储在Elasticsearch索引中的数据。使用Kibana，可以通过各种图表进行高级数据分析及展示。</p>\n<p><img src=\"https://static.oschina.net/uploads/img/201706/19171453_gqaE.jpg\" alt=\"\"></p>\n<p>Splunk集成了非常方便的数据可视化和仪表盘功能，对于SPL的结果，可以非常方便的通过UI的简单设置进行可视化的分析，导出到仪表盘。</p>\n<p><img src=\"https://static.oschina.net/uploads/img/201706/19171456_fsKK.jpg\" alt=\"\"></p>\n<p>下图的比较来自<a href=\"https://www.itcentralstation.com/products/comparisons/kibana_vs_splunk\" rel=\"nofollow\">https://www.itcentralstation.com/products/comparisons/kibana_vs_splunk</a></p>\n<p><img src=\"https://static.oschina.net/uploads/space/2017/0619/193547_Wwq6_1450051.png\" width=\"1982\" height=\"750\"></p>\n<p>在数据可视化的领域的<a href=\"https://www.itcentralstation.com/categories/data-visualization#top_rated\" rel=\"nofollow\">排名</a>，Splunk仅仅落后于Tableau而已</p>\n<p><img src=\"https://static.oschina.net/uploads/space/2017/0619/194139_q14k_1450051.png\" width=\"2010\" height=\"1314\"></p>\n<h3 id=\"h3_8\">扩展性</h3>\n<p>从扩展性的角度来看，两个平台都拥有非常好的扩展性。</p>\n<p>Elastic栈作为一个开源栈，很容易通过Plugin的方式扩展。包括：</p>\n<ul>\n<li><a href=\"https://www.elastic.co/guide/en/elasticsearch/plugins/current/index.html\" rel=\"nofollow\">ElasticSearch Plugin </a></li>\n<li><a href=\"https://www.elastic.co/guide/en/kibana/current/kibana-plugins.html\" rel=\"nofollow\">Kibana Plugin</a></li>\n<li><a href=\"https://www.elastic.co/guide/en/logstash/current/working-with-plugins.html\" rel=\"nofollow\">Logstash Plugin</a></li>\n<li><a href=\"https://www.elastic.co/guide/en/beats/libbeat/current/new-beat.html\" rel=\"nofollow\">Beats Platform</a></li>\n</ul>\n<p>Splunk提供一系列的扩展点支持应用和Add-on的开发， 在<a href=\"http://dev.splunk.com/\" rel=\"nofollow\">http://dev.splunk.com/</a>可以找到更多的信息和文档。包括：</p>\n<ul>\n<li><a href=\"http://dev.splunk.com/webframework\" rel=\"nofollow\">Web Framework</a></li>\n<li><a href=\"http://dev.splunk.com/sdks\" rel=\"nofollow\">SDK</a></li>\n<li><a href=\"http://dev.splunk.com/view/python-sdk/SP-CAAAER3\" rel=\"nofollow\">Modular Input</a></li>\n<li>… …</li>\n</ul>\n<p>比起Elastic的Plugin，Splunk的扩展概念上比较复杂，开发一个App或者Add-on的门槛都要相对高一些。做为一个数据平台，Splunk应该在扩展性上有所改进，使得扩展变的更为容易和简单。</p>\n<h2 id=\"h2_9\">架构</h2>\n<p><strong>Elastic Stack</strong></p>\n<p><img src=\"https://static.oschina.net/uploads/space/2017/0614/104019_J5fb_1450051.png\" width=\"1152\" height=\"431\"></p>\n<p>如上图所示，ELK是一套栈，Logstash提供数据的消化和获取，Elasticsearch对数据进行存储，索引和搜索，而Kibana提供数据可视化和报表的功能。</p>\n<p><strong>Splunk</strong></p>\n<p><img src=\"https://static.oschina.net/uploads/space/2017/0614/103709_fR14_1450051.png\" width=\"699\" height=\"700\"></p>\n<p>Splunk的架构主要有三个角色：</p>\n<ul>\n<li>Indexer<br>\nIndexer提供数据的存储，索引，类似Elasticsearch的作用</li>\n<li>Search Head<br>\nSearch Head负责搜素，客户接入，从功能上看，一部分是Kibana，因为Splunk的UI是运行在Search Head上的，提供所有的客户端和可视化的功能，还有一部分，是提供分布式的搜索功能，包含对搜索的分发到Indexer和搜索结果的合并，这一部分功能对应在Elasticsearch上。</li>\n<li>Forwarder<br>\nSplunk的Forwarder负责数据接入，类似Logstash</li>\n</ul>\n<p>除了以上的三个主要的角色，Splunk的架构中还有：Deployment Server，License Server，Master Cluster Node，Deployer等。</p>\n<p>Splunk和ELK的基本架构非常类似，但是ELK的架构更为简单和清楚，Logstash负责数据接入，Kibana负责数据展现，所有的复杂性在Elasticsearch中。Splunk的架构更为复杂一些，角色的类型也更多一些。</p>\n<p>如果装单机版本，Splunk更容易，因为所有的功能一次性就装好了，而ELK则必须分别安装E/L/K，从这一点上来看，Splunk有一定的优势。</p>\n<h2 id=\"h2_10\">分布集群和扩展性</h2>\n<p><strong>ElasticSearch</strong></p>\n<p><img src=\"https://static.oschina.net/uploads/space/2017/0614/105032_zDW9_1450051.png\" width=\"607\" height=\"254\"></p>\n<p>ElasticSearch是为分布式设计的，有很好的扩展性，在一个典型的分布式配置中，每一个节点（node）可以配制成不同的角色，如上图所示：</p>\n<ul>\n<li>Client Node，负责API和数据的访问的节点，不存储／处理数据</li>\n<li>Data Node，负责数据的存储和索引</li>\n<li>Master Node， 管理节点，负责Cluster中的节点的协调，不存储数据。</li>\n</ul>\n<p>每一种角色可以通过ElasticSearch的配置文件或者环境变量来配置。每一种角色都可以很方便的Scale，因为Elastic采用了对等性的设计，也就是所有的角色是平等的，（Master Node会进行Leader Election，其中有一个是领导者）这样的设计使得在集群环境的伸缩性非常好，尤其是在容器环境，例如Docker Swarm或者Kubernetes中使用。</p>\n<p>参考：</p>\n<ul>\n<li><a href=\"https://elk-docker.readthedocs.io/#elasticsearch-cluster\" rel=\"nofollow\">https://elk-docker.readthedocs.io/#elasticsearch-cluster</a></li>\n<li><a href=\"https://github.com/pires/kubernetes-elasticsearch-cluster\" rel=\"nofollow\">https://github.com/pires/kubernetes-elasticsearch-cluster</a></li>\n</ul>\n<p><strong>Splunk</strong></p>\n<p>Splunk作为企业级的分布式机器数据的平台，拥有强大的分布式配置，包括跨数据中心的集群配置。Splunk提供两种集群，Indexer集群和Search Head集群。</p>\n<p>Splunk <a href=\"http://docs.splunk.com/Documentation/Splunk/6.6.1/Indexer/Basicclusterarchitecture\" rel=\"nofollow\">Indexer集群</a></p>\n<p><img src=\"https://static.oschina.net/uploads/space/2017/0614/104459_RNyl_1450051.png\" width=\"590\" height=\"525\"></p>\n<p>如上图所示，Splunk的indexer集群主要由三种角色：</p>\n<ul>\n<li>Master Node，Master Node负责管理和协调整个的集群，类似ES的Master。但是只有一个节点，不支持多Master（最新版本6.6）。Master Node负责\n<ul>\n<li>协调Peer Node之间的数据复制</li>\n<li>告诉Search Head数据在哪里</li>\n<li>Peer Node的配置管理</li>\n<li>Peer Node故障时的故障恢复</li>\n</ul>\n</li>\n<li>Peer Nodes，负责数据索引，类似ES的Data Node，Peer Node负责\n<ul>\n<li>存储索引数据</li>\n<li>发送／接收复制数据到其他Peer节点</li>\n<li>响应搜索请求</li>\n</ul>\n</li>\n<li>Search Head，负责数据的搜索和客户端API访问，类似ES的Client Node，但不完全相同。Search Head负责发送搜索请求到Peer Nodes，并对搜索的结果进行合并。</li>\n</ul>\n<p>有人会问，那Master是不是集群中的单点故障？What if Master node goes down？Splunk的回答是否。即使Master 节点出现故障，Peer Nodes仍然可以正常工作，除非，同时有Peer Node出现故障。</p>\n<ul>\n<li><a href=\"http://docs.splunk.com/Documentation/Splunk/6.6.1/Indexer/Whathappenswhenamasternodegoesdown\" rel=\"nofollow\">http://docs.splunk.com/Documentation/Splunk/6.6.1/Indexer/Whathappenswhenamasternodegoesdown</a></li>\n<li><a href=\"https://answers.splunk.com/answers/129446/why-does-master-node-continue-to-be-single-point-of-failure-in-clustering.html\" rel=\"nofollow\">https://answers.splunk.com/answers/129446/why-does-master-node-continue-to-be-single-point-of-failure-in-clustering.html</a></li>\n</ul>\n<p>Splunk <a href=\"http://docs.splunk.com/Documentation/Splunk/6.6.1/DistSearch/SHCarchitecture%C2%A0\" rel=\"nofollow\">Search Header 集群</a></p>\n<p><img src=\"https://static.oschina.net/uploads/space/2017/0614/121621_KPDw_1450051.png\" width=\"646\" height=\"408\"></p>\n<p>Search Head集群是由一组Search Head组成，它们共享配置，搜索任务等状态。该Cluster主要有以下角色：</p>\n<ul>\n<li>Deployer， 负责分发状态和应用到peers</li>\n<li>Cluster Member，其中有一个是Captain，负责协调。Cluster Memeber之间会互相通信，来保证状态一致。Load Balancer是个可选项，可以负责Search的接入。</li>\n<li>Search Peers，负责数据索引的 Indexer Nodes</li>\n</ul>\n<p>另外Splunk还曾经提供过一个功能叫做<a href=\"http://docs.splunk.com/Documentation/Splunk/6.6.1/DistSearch/Configuresearchheadpooling\" rel=\"nofollow\">Search Head Pooling</a>，不过现在已经Depecated了。</p>\n<p>Indexer集群可以和Search Head集群一起配置，构成一个分布式的Splunk配置。</p>\n<p>相比较ES的相对比较简单的集群配置，Splunk的集群配置比较复杂，ES中所有每一个节点可以灵活的配置角色，并且可以相对比较容易的扩展，利用例如Kubernetes的Pod的复制可以很容易的扩展每一个角色。扩展Splunk相对比较困难，要做到动态的伸缩，需要比较复杂的配置。大家可以参考<a href=\"https://github.com/outcoldman/docker-splunk-cluster\" rel=\"nofollow\">这里</a>，在容器环境里配置一个Splunk的集群需要比较多的布置，例如在这个<a href=\"https://github.com/outcoldman/docker-splunk-cluster/blob/master/examples/docker/cluster-master.env_file\" rel=\"nofollow\">Master的配置</a>中，用户需要考虑：</p>\n<ul>\n<li>如何配置License</li>\n<li>修改缺省的用户名口令</li>\n<li>为每一个Search Head配置Search Head Cluster</li>\n<li>等待Splunk进程成功启动</li>\n<li>配置业务发现</li>\n<li>安装应用</li>\n<li>… …</li>\n</ul>\n<p>并且集群的扩展很难直接利用容器编排平台提供的扩展接口，这一点Splunk还有很多提高的空间。</p>\n<h2 id=\"h2_11\">产品线</h2>\n<p><strong>Elastic</strong></p>\n<p><img src=\"https://static.oschina.net/uploads/space/2017/0614/103316_ysvG_1450051.png\" width=\"859\" height=\"436\"></p>\n<p>Elastic的产品线除了大家熟悉的ELK（ElasticSearch，Logstash，Kikana），主要包含</p>\n<ul>\n<li><a href=\"https://www.elastic.co/guide/en/beats/libbeat/current/index.html\" rel=\"nofollow\">Beats</a> Beats是一个开源组件，提供一个代理，把本地抓到的数据传送到ElasticSearch</li>\n<li><a href=\"https://www.elastic.co/guide/en/cloud/current/index.html\" rel=\"nofollow\">Elastic Cloud</a>， Elasti提供的云服务</li>\n<li><a href=\"https://www.elastic.co/guide/en/x-pack/current/index.html\" rel=\"nofollow\">X-Pack</a>， Elastic的扩展组件，提供安全，告警，监控，机器学习和图处理能力。主要功能需要付费使用。</li>\n</ul>\n<p><strong>Splunk</strong></p>\n<p><img src=\"https://static.oschina.net/uploads/space/2017/0614/103236_KuNa_1450051.png\" width=\"1742\" height=\"756\"></p>\n<p>Splunk的产品线包括</p>\n<ul>\n<li>Splunk Enterprise</li>\n<li>Splunk Cloud， Splunk运营的云服务，跑在AWS上</li>\n<li>Splunk Light，Splunk Light版本，功能有所精简，面向中小企业</li>\n<li>Hunk， Splunk on Hadoop</li>\n<li>Apps ／ Add-ons,  Splunk提供大量的应用和数据获取的扩展，可以参考 <a href=\"http://apps.splunk.com/\" rel=\"nofollow\">http://apps.splunk.com/</a></li>\n<li>Splunk ITSI （IT Service Intelligence）， Splunk为IT运维专门开发的产品</li>\n<li>Splunk ES （Enterprise Security）， Splunk为企业安全开发的产品，这个是Splunk 公司的拳头产品，连续被<a href=\"http://www.gartner.com/it-glossary/security-information-and-event-management-siem/\" rel=\"nofollow\">Gartner</a>评为<a href=\"https://en.wikipedia.org/wiki/Security_information_and_event_management\" rel=\"nofollow\">SIEM</a>领域的领导者，挑战了该行业的传统巨鳄IBM，HP</li>\n<li>Splunk UBA （User Behavior Analytic）， UBA是Splunk在15年<a href=\"https://www.splunk.com/en_us/investor-relations/acquisitions/caspida.html\" rel=\"nofollow\">收购的Caspidia</a>带来的基于机器学习的安全产品。</li>\n</ul>\n<p>从产品线的角度来看，Splunk除了提供基本平台，在IT运维和安全领域都有自己的拳头产品。Elastic缺乏某个领域的应用。</p>\n<h2 id=\"h2_12\">价格</h2>\n<p>价格是大家非常关心的一个因素</p>\n<p>Elastic的基本组件都是开源的，参看<a href=\"https://www.elastic.co/cloud/as-a-service/subscriptions\" rel=\"nofollow\">下表</a>，X-pack中的一些高级功能需要付费使用。包含安全，多集群，报表，监控等等。</p>\n<p><a href=\"https://www.elastic.co/subscriptions#request-info\" rel=\"nofollow\"><img src=\"https://static.oschina.net/uploads/space/2017/0614/112815_X1nv_1450051.png\" width=\"879\" height=\"656\"></a></p>\n<p>云服务的<a href=\"https://www.elastic.co/cloud/as-a-service/pricing\" rel=\"nofollow\">价格</a>参考下图，ES的云是按照所使用的资源来收费，从这里选取的区域可以看出，ES的云也是运行在AWS上的。下图中的配置每月需要花费200美元左右。（不同区域的收费不同）</p>\n<p><img src=\"https://static.oschina.net/uploads/space/2017/0614/122208_0lhg_1450051.png\" width=\"1235\" height=\"838\"></p>\n<p>同时，除了Elastic自己，还有许多其他公司也提供Elastic Search的云服务，例如Bonsai，Qbox.io等。</p>\n<p><a href=\"https://www.slant.co/topics/170/~best-hosted-elasticsearch-services\" rel=\"nofollow\"><img src=\"https://static.oschina.net/uploads/space/2017/0614/122320_NH3b_1450051.png\" width=\"599\" height=\"715\"></a></p>\n<p><strong>Splunk</strong></p>\n<p>Splunk Enterprise是按照数据每日的流量按年或者无限制事件付费，每天1GB的话，每年是2700美元，每个月也是差不多200块。如果每天的数据量少于500M，可以使用Splunk提供的免费License，只是不能用安全，分布式等高级功能，500M可以做很多事情了。</p>\n<p><a href=\"https://www.splunk.com/en_us/products/pricing.html\" rel=\"nofollow\"><img src=\"https://static.oschina.net/uploads/space/2017/0614/112050_q0Dx_1450051.png\" width=\"1169\" height=\"568\"></a></p>\n<p>云服务的价格就要便宜多了，每天5GB，每年只要2430元，每个月不到200块。当然因为计费的方式不同，和Elastic的云就不好比较了。另外因为是在AWS上，中国的用户，呵呵了。</p>\n<p><img src=\"https://static.oschina.net/uploads/space/2017/0614/121744_0ol0_1450051.png\" width=\"1168\" height=\"541\"></p>\n<h2 id=\"h2_13\">总结</h2>\n<p>大数据的搜索平台已经成为了众多企业的标配，Elastic栈和Splunk是其中最为优秀和流行的选择。两者都有各自的优点和值得改进的地方。希望本文能够在你的大数据平台的选型上，有所帮助。也希望大家来和我交流，共同成长。</p>\n<h2 id=\"h2_14\">参考文档</h2>\n<p>ELK</p>\n<ul>\n<li>ElasticSearch 参考文档<a href=\"https://www.elastic.co/guide/en/elasticsearch/reference/current/index.html\" rel=\"nofollow\">https://www.elastic.co/guide/en/elasticsearch/reference/current/index.html</a></li>\n<li>Github上收集的ElasticSearch相关开源软件列表 <a href=\"https://github.com/dzharii/awesome-elasticsearch\" rel=\"nofollow\">https://github.com/dzharii/awesome-elasticsearch</a></li>\n<li>知乎ElaticSearch专题 <a href=\"https://www.zhihu.com/topic/19899427/hot\" rel=\"nofollow\">https://www.zhihu.com/topic/19899427/hot</a></li>\n<li>中文书 <a href=\"https://github.com/chenryn/ELKstack-guide-cn\" rel=\"nofollow\">https://github.com/chenryn/ELKstack-guide-cn</a></li>\n<li>中文书 <a href=\"https://www.gitbook.com/book/wizardforcel/mastering-elasticsearch/details\" rel=\"nofollow\">https://www.gitbook.com/book/wizardforcel/mastering-elasticsearch/details</a></li>\n</ul>\n<p>Splunk</p>\n<ul>\n<li>Splunk 文档 <a href=\"https://docs.splunk.com/Documentation\" rel=\"nofollow\">https://docs.splunk.com/Documentation</a></li>\n<li>Splunk电子书 <a href=\"https://www.splunk.com/web_assets/v5/book/Exploring_Splunk.pdf\" rel=\"nofollow\">https://www.splunk.com/web_assets/v5/book/Exploring_Splunk.pdf</a></li>\n<li>Splunk 开发文档 <a href=\"http://dev.splunk.com/getstarted\" rel=\"nofollow\">http://dev.splunk.com/getstarted</a></li>\n<li>Splunk 应用市场 <a href=\"http://apps.splunk.com/\" rel=\"nofollow\">http://apps.splunk.com/</a></li>\n<li>Splunk 快速参考 <a href=\"https://www.splunk.com/content/dam/splunk2/pdfs/solution-guides/splunk-quick-reference-guide.pdf\" rel=\"nofollow\">https://www.splunk.com/content/dam/splunk2/pdfs/solution-guides/splunk-quick-reference-guide.pdf</a></li>\n</ul>\n<p>其它</p>\n<ul>\n<li><a href=\"https://www.upguard.com/articles/splunk-vs-elk\" rel=\"nofollow\">https://www.upguard.com/articles/splunk-vs-elk</a></li>\n<li><a href=\"https://db-engines.com/en/system/Elasticsearch%3BSplunk\" rel=\"nofollow\">https://db-engines.com/en/system/Elasticsearch%3BSplunk</a></li>\n<li><a href=\"https://www.searchtechnologies.com/blog/log-analytics-tools-open-source-vs-commercial\" rel=\"nofollow\">https://www.searchtechnologies.com/blog/log-analytics-tools-open-source-vs-commercial</a></li>\n<li><a href=\"http://www.learnsplunk.com/splunk-vs-elk-stack.html\" rel=\"nofollow\">http://www.learnsplunk.com/splunk-vs-elk-stack.html</a></li>\n</ul>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"111525\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"111525votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"111525\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 4 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i>  评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "publish_date": "2017/06/20", "comment_nums": 0, "remote_img_url": ["https://static.oschina.net/uploads/space/2017/0614/102156_SGGq_1450051.png"], "title": "大数据搜索选开源还是商业软件？ElasticSearch 对比 Splunk", "local_img_url": ["f"]},{"praise_nums": "1", "fav_nums": "2", "tags": "职场,程序员,职场,项目经理", "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">原文出处： <a target=\"_blank\" href=\"http://www.cnblogs.com/ljhdo/p/5068072.html\">Vic Liu</a>   </div><div>\n<h3>把想法变成项目，服务于业务</h3>\n<p>在项目组待的时间久了，渐渐地跟微软的项目经理Michael熟悉起来了，跟他有过很多次深入的聊天，向他请教过很多关于人生，理想，技术上的问题，不得不说，项目经理是我神往的角色。虽然我没有亲身经历过，但是我认为做项目经理很有意思，把一个想法变成项目，服务于业务，这是我期望的工作。 佛者说：“一花一世界，一叶一菩提”，不得不说，修行是一个技术活，面对同一个世界，眼界的不同，能够看到的事物也是不同的；同样一句话，阅历不同，理解也会不同。那我就说说我眼中的项目经理，与常人不同的是，他们总是更进一步，想的更多，做的更多。</p>\n<p>在每天的Daily Scrum会议上，Michael照例追踪分配给每个人的Task的完成情况，并分配新的Task。这种一成不变的例行汇报，听的多了，就有点习以为常了，左耳朵进，右耳朵出，当然，起码得“留一点痕迹”，至少得知道自己新的Task。在项目不是很复杂的时候，即使做不同样的事情，也大概知道彼此做事的内容。可是有一次，在同事小林汇报工作时，即使我集中十二分的注意力，也听不懂小林说话的内容，但是，Michael却能瞬间找到关键点，那一刻，我才知道什么叫“默契”，我能感受到小林的开心，因为有人很懂她。</p>\n<p>我请教过这个问题，Michael说：“这是由于‘信息不对称’导致的，因为我负责整个项目的进度和业务，跟所有的开发工程师（Developer）都有交集，交流比较多，知道他们在做什么，能听懂他们说的话，这很正常，不用诧异。”我觉得信息不对称，固然是一个重要的原因，但是，不是最主要的。我曾经在汇报工作时，对于数据库中出现的一个问题，提出了一个解决方案，由于这个想法是临时想出来的，我在描述解决方案时，没有组织好语言，说的磕磕绊绊，我认为我没有说清除，但是，Michael却出乎我意料之外的理解了，并把我的不成熟的想法完善了，当时，我意识到，有人懂我，是多么的开心，也理解了同事小林当时喜悦的心情。这是信息不对称，善于沟通所不能解释的，我认为，熟悉业务，善于思考，对项目经理来说，才是最重要的特质。</p>\n<h3>换位思考</h3>\n<p>还有一件事，由于同事小陈离职了，我开始接手PowerBI报表，在跟业务分析小组的同事共事时，我发现他们身上有一个显著的个性，就是：<strong>站在老板的立场上思考问题，组织语言和汇报工作。</strong>在我第一次无意识地向老板直接汇报工作时，我犯了很多技术出身的开发人员经常忽视的错误，那就是不自觉地在报告中掺杂了太多的开发术语，没有意识到，我面对的客户是一位不懂技术，但深谙业务的老板。沈姐是业务分析小组实际上的Leader，她跟我说：“你不能那样向老板回邮件，老板不懂技术，只懂业务，你要翻译成他们能够理解的内容，他们才知道，你已经把问题解决了，不然，他们又会发邮件问你。”</p>\n<p>有了沈姐的开导，我开始意识到，在工作上，必须具有换位思考的意识：站在老板的角度上来看待问题，但意识到，不代表你就能做到，这是一个技术活。当老板再次发送邮件，提出新的业务需求时，我又犯错了，这次的错误，是由于信息不对称导致的，也跟我缺少历练有关。老板在邮件中，说到：“请提供报表数据，用于分析组织者（Organizer）每个月在活动中的贡献（Contribution）。”由于在业务逻辑中，组织者（Organizer）是管理者角色的一种，除了Organizer，还有Co-Organizer，Event-Organizer，Assistant-Organizer等管理者角色，我提供的报表数据仅仅是Organizer角色每个月的贡献。Michael在Review代码时，认真对我说：“Vic，老板不知道我们具体的角色分类，老板想知道的，其实是所有组织者在每个月的贡献，要站在老板的角度上，处理问题。给老板的报表，每一个数据上的细节都必须做到有理有据，即使数据对不上，不align，也必须要有合理的解释。”这次教训非常深刻，我意识到，老板是特殊的存在，必须理解老板的意思，同时，也必须把自己的意思传达给老板，这中间需要由一个词汇的转换，怎样做到？站在老板的角度上，思考问题，处理问题，刚开始做的不好，不要紧，必须要有这个意识（Sense）和觉悟。</p>\n<h3>项目经理是整个项目组的大脑</h3>\n<p>这样说一点也不为过，至少在我们项目组是这样的，其他成员具备的是执行力，也就是按时完成任务的能力。这里抛出一个问题：给你一个团队，你要如何带？在两年多的时间里，Michael带领我们团队做过很多新的项目，而每个新的项目都不是凭空想出来的。之所以这么说，是因为，我也曾经有过相同的想法，但是，我没有意识到这个想法的价值，在脑海中思考过之后，没有把想法“变现”的意识，导致轻易把想法抛弃；一旦Michael提出类似的新项目之后，我发觉：“我曾经也有过这个想法，只不过，我没有继续深入下去，没有更进一步去丰富这个想法 ……”</p>\n<p>反省不能解决问题，或许，这才是项目经理应该具备的优秀性格：不是想不到，而是善于发现想法的价值。Michael把抽象的想法，变成文档上的设想，经过丰富之后，变成有价值的具体项目，这就是创建价值，简化业务的过程。Michael说：“我想实现的新项目，实际上就是为了优化业务流程，做到化繁为简，而为了实现这个目的，必须化简为繁。比如，为了便于发现更多有影响力的人物（Influencer），必须整合所有的数据资源，从各个数据源中分析数据，这是我们的主要业务需求，为了简化这个流程，可以把这套业务流程扩大化，自动化，做一个更为复杂的引擎来替代手工，一旦这个繁的引擎做出来，业务流程就会变的非常简单。”抓住主要业务搞优化，实现项目的增值和技术的迭代，这其实也是他的一种管理思想，极简工作：先解决主要矛盾，再解决次要矛盾，根据业务需求，调整优先级。</p>\n<h3>项目经理很忙的</h3>\n<p>实际上，我观察到Michael的工作，1/3是在开会。不仅跟开发者开会，而且跟老板开会。我们的老板是外国人，Michael的英语相当不错，上海人，软实力杠杠滴，从小到大接受的教育，是我们这些屌丝所不能想象的。跟老板开会的内容，大致是谈论业务需求，演示新的项目，Michael说：“老板是非常聪明的，非常熟悉业务，对于新的项目，老板只要看到demo，自然会想到如何使用，不需要过多的文字说明”，好吧，高级别的老板，我也没有接触过，能坐到那个位置上，肯定有过人之处。跟开发者开会，Michael主要是演示项目，把控项目的进度和分配任务。</p>\n<p>Michael在任务的管控上，没有绝对的收和放，而是：前期放任，定时检查，最后是测试和验收。不过，他的管理风格还是比较自由的，他说：“我分配一个任务交给你们来做，你们想怎么做，就怎么做，只要实现业务需求就行。我的任务不是告诉你们如何去做，而是，告诉你们怎么做最简单，哪些是当前的业务上能够满足的，哪些是当前不需要做的。”</p>\n<h3>项目经理很忙的</h3>\n<p>但是，Michael能够记住很多非常细节的业务逻辑，不得不佩服他得记忆力，是不是项目经理的记忆力都很好？Michael说：“首先，这些关键的业务逻辑是我设置的，我当然记得比较牢，其次，我能记住的，实际上是关键的业务逻辑，经常遇到，那些特殊的设置，我也是需要阅读代码才知道。”我觉得，跟普通的开发工程师不同，项目经理更擅长处理业务上的问题。身价一万和身价十万的差距，没有想象中那么大，通过努力，日积月累，我也能做项目经理。阿Q一下，梦想还是要有的，万一实现了。</p>\n<h3>关于加薪</h3>\n<p>这是一个非常具有挑战性的问题，除非你在项目组中是不可替代的，否则，你就只能拿着offer，或者跳槽来提升身价，但是，那些项目经理是如何从普通的开发工程师，一步步被提拔上去的呢？运营经理范老板给出一份答案：创造额外的价值，注意，是额外的价值，而不仅仅是本职工作。在公司的动员大会上，有一句很流行的话：要想成为项目经理，必须先干项目经理的活。当然这些话都出自高层之口，尽管，事实上，大多数Leader都是空降的，仍然会有人心灵淹死在鸡汤中。很多开发工程师，包括我，天真地认为，只要做好本职工作，提升技术实力，就能获得公司的认可和嘉奖，获得升职和加薪的机会，就像运营经理说的那样，“这是技术人员的一条路线，稳定而平缓，但是，如果想快速提升，走一条陡峭的上升路线，必须创造额外的价值，当你为公司创造额外价值的时候，公司也会给你提供更好的发展空间。”其实，道理都是相通的，打铁还需自身硬，公司不会给你机会试炼，而会给你空间发挥，前提是你必须比身边的人优秀，才有能力抓住机会。</p>\n<p>这一个个小故事，都是真实的，给我很多启发，在人生的道路上，能够聆听到成功者的教诲，是最难能可贵的，谢谢！</p>\n</div>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"111535\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"111535votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"111535\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 2 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i> 1 评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "publish_date": "2017/06/21", "comment_nums": "1", "remote_img_url": ["http://jbcdn2.b0.upaiyun.com/2016/08/25e260d52cd3cc8e5ae1638dd3ab4271.jpg"], "title": "我眼中的项目经理", "local_img_url": ["f"]},{"praise_nums": "1", "fav_nums": 0, "tags": "IT技术,OtterTune,数据库,机器学习", "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">本文由 <a href=\"http://blog.jobbole.com\">伯乐在线</a> - <a href=\"http://www.jobbole.com/members/upanblack\">Panblack</a> 翻译。未经许可，禁止转载！<br>英文出处：<a target=\"_blank\" href=\"https://aws.amazon.com/cn/blogs/ai/tuning-your-dbms-automatically-with-machine-learning/\">AWS</a>。欢迎加入<a target=\"_blank\" href=\"http://group.jobbole.com/category/feedback/trans-team/\">翻译组</a>。</div><p><em>本文是卡耐基梅隆大学的 Dana Van Aken、Andy Pavlo 和 Geoff Gordon 所写。这个项目展示了学术研究人员如何利用 AWS Cloud Credits for Research Program 来助力他们的科技突破的。</em></p>\n<p>数据库管理系统（DBMS）是任何数据密集应用的关键部分。它们可以处理大量数据和复杂的工作负载，但同时也难以管理，因为有成百上千个“旋钮”（即配置变量）控制着各种要素，比如要使用多少内存做缓存和写入磁盘的频率。组织机构经常要雇佣专家来做调优，而专家对很多组织来说太过昂贵了。<a href=\"http://db.cs.cmu.edu/projects/autotune/\">卡耐基梅隆大学数据库研究组</a>的学生和研究人员在开发一个新的工具，名为 OtterTune，可以自动为 DBMS 的“旋钮”找到合适的设置。工具的目的是让任何人都可以部署 DBMS，即使没有任何数据库管理专长。</p>\n<p>OtterTune 跟其他 DBMS 设置工具不同，因为它是利用对以前的 DBMS 调优知识来调优新的 DBMS，这显著降低了所耗时间和资源。OtterTune 通过维护一个之前调优积累的知识库来实现这一点，这些积累的数据用来构建机器学习（ML）模型，去捕获 DBMS 对不同的设置的反应。OtterTune 利用这些模型指导新的应用程序实验，对提升最终目标（比如降低延迟和增加吞吐量）给出建议的配置。</p>\n<p>本文中，我们将讨论 OtterTune 的每一个机器学习流水线组件，以及它们是如何互动以便调优 DBMS 的设置。然后，我们评估 OtterTune 在 MySQL 和 Postgres 上的调优表现，将它的最优配置与 DBA 和其他自动调优工具进行对比。</p>\n<p>OtterTune 是卡耐基梅隆大学数据库研究组的学生和研究人员开发的开源工具，所有的代码都托管在 <a href=\"https://github.com/cmu-db/ottertune\">Github</a> 上，以 Apache License 2.0 许可证发布。</p>\n<h2>OtterTune工作原理</h2>\n<p>下图是 OtterTune 组件和工作流程</p>\n<p><img class=\"size-full wp-image-835 alignnone\" src=\"https://d2908q01vomqb2.cloudfront.net/f1f836cb4ea6efb2a0b1b99f41ad8b103eff4b59/2017/05/31/ottertune_1.gif\" alt=\"\" width=\"800\" height=\"319\"></p>\n<p>调优过程开始，用户告知 OtterTune 要调优的最终目标（比如，延迟或吞吐量），客户端控制器程序连接目标 DBMS，收集 Amazon EC2 实例类型和当前配置。</p>\n<p>然后，控制器启动首次观察期，来观察并记录最终目标。观察结束后，控制器收集 DBMS 的内部指标，比如 MySQL 磁盘页读取和写入的计数。控制器将这些数据返回给调优管理器程序。</p>\n<p>OtterTune 的调优管理器将接收到的指标数据保存到知识库。OtterTune 用这些结果计算出目标 DBMS 的下一个配置，连同预估的性能提升，返回给控制器。用户可以决定是否继续或终止调优过程。</p>\n<p> </p>\n<h3>注意</h3>\n<p>OtterTune 对每个支持的 DBMS 版本维护了一份“旋钮”黑名单，包括了对调优无关紧要的部分（比如保存数据文件的路径），或者那些会产生严重或隐性后果（比如丢数据）的部分。调优过程开始时，OtterTune 会向用户提供这份黑名单，用户可以添加他们希望 OtterTune 避开的其它“旋钮”。</p>\n<p>OtterTune 有一些预定假设，对某些用户可能会造成一定的限制。比如，它假设用户拥有管理员权限，以便控制器来修改 DBMS 配置。否则，用户必须在其他硬件上部署一份数据库拷贝给 OtterTune 做调优实验。这要求用户或者重现工作负载，或者转发生产 DBMS 的查询。完整的预设和限制请看我们的<a href=\"http://db.cs.cmu.edu/papers/2017/tuning-sigmod2017.pdf\">论文</a> 。</p>\n<h1>机器学习流水线</h1>\n<p>下图是 OtterTune ML流水线处理数据的过程，所有的观察结果都保存在知识库中。</p>\n<p>OtterTune 先将观察数据输送到“工作流特征化组件”（Workload Characterization component），这个组件可以识别一小部分 DBMS 指标，这些指标能最有效地捕捉到性能变化和不同工作负载的显著特征。</p>\n<p>下一步，“旋钮识别组件”（Knob Identification component）生成一个旋钮排序表，包含哪些对 DBMS 性能影响最大的旋钮。OtterTune 接着把所有这些信息“喂”给自动调优器（Automatic Tuner），后者将目标 DBMS 的工作负载与知识库里最接近的负载进行映射，重新使用这份负载数据来生成更佳的配置。</p>\n<p><img class=\"size-full wp-image-836 alignnone\" src=\"https://d2908q01vomqb2.cloudfront.net/f1f836cb4ea6efb2a0b1b99f41ad8b103eff4b59/2017/05/31/ottertune_2.gif\" alt=\"\" width=\"613\" height=\"193\"></p>\n<p>我们来深入挖掘以下机器学习流水线的每个组件。</p>\n<p><strong>工作负载特征化</strong>： OtterTune 利用 DBMS 的内部运行时指标来特征化某个工作负载的行为，这些指标精确地代表了工作负载，因为它们捕获了负载的多个方面行为。然而，很多指标是冗余的：有些是用不同的单位表示相同的度量值，其他的表示 DBMS 的一些独立组件，但它们的值高度相关。梳理冗余度量值非常重要，可以降低机器学习模型的复杂度。因此，我们基于相关性将 DBMS 的度量值集中起来，然后选出其中最具代表性的一个，具体说就是最接近中间值的。机器学习的后续组件将使用这些度量值。</p>\n<p><strong>旋钮识别</strong>： DBMS 可以有几百个旋钮，但只有一部分影响性能。OtterTune 使用一种流行的“特性-选择”技术，叫做 Lasso，来判断哪些旋钮对系统的整体性能影响最大。用这个技术处理知识库中的数据，OtterTune 得以确定 DBMS 旋钮的重要性顺序。</p>\n<p>接着，OtterTune 必须决定在做出配置建议时使用多少个旋钮，旋钮用的太多会明显增加 OtterTune 的调优时间，而旋钮用的太少则难以找到最好的配置。OtterTune 用了一个增量方法来自动化这个过程，在一次调优过程中，逐步增加使用的旋钮。这个方法让 OtterTune 可以先用少量最重要的旋钮来探索并调优配置，然后再扩大范围考虑其他旋钮。</p>\n<p><strong>自动调优器</strong>： 自动调优器组件在每次观察阶段后，通过两步分析法来决定推荐哪个配置。</p>\n<p>首先，系统使用工作负载特征化组件找到的性能数据来确认与当前的目标 DBMS 工作负载最接近的历史调优过程，比较两者的度量值以确认哪些值对不同的旋钮设置有相似的反应。</p>\n<p>然后，OtterTune 尝试另一个旋钮配置，将一个统计模型应用到收集的数据，以及知识库中最贴近的工作负载数据。这个模型让 OtterTune 预测 DBMS 在每个可能的配置下的表现。OtterTune 调优下一个配置，在探索（收集用来改进模型的信息）和利用（贪婪地接近目标度量值）之间交替进行。</p>\n<h2>实现</h2>\n<p>OtterTune 用 Python 编写。</p>\n<p>对于工作负载特征化和旋钮识别组件，运行时性能不是着重考虑的，所以我们用 <a href=\"http://scikit-learn.org/\">scikit-learn</a> 实现对应的机器学习算法。这些算法运行在后台进程中，把新生成的数据吸收到知识库里。</p>\n<p>对于自动调优组件，机器学习算法就非常关键了。每次观察阶段完成后就需要运行，吸收新数据以便 OtterTune 挑选下一个旋钮来进行测试。由于需要考虑性能，我们用 <a href=\"https://www.tensorflow.org/\" target=\"_blank\" rel=\"noopener noreferrer\">TensorFlow</a> 来实现。</p>\n<p>为了收集 DBMS 的硬件、旋钮配置和运行时性能指标，我们把 <a href=\"https://github.com/oltpbenchmark/oltpbench\" target=\"_blank\" rel=\"noopener noreferrer\">OLTP-Bench</a> 基准测试框架集成到 OtterTune 的控制器内。</p>\n<h2>实验设计</h2>\n<p>我们比较了 OtterTune 对 MySQL 和 Postgres 做出的最佳配置与如下配置方案进行了比较，以便评估：</p>\n<ul>\n<li>默认： DBMS 初始配置</li>\n<li>调优脚本： 一个开源调优建议工具做出的配置</li>\n<li>DBA： 人类 DBA 选择的配置</li>\n<li>RDS： 将亚马逊开发人员管理的 DBMS 的定制配置应用到相同的 EC2 实例类型。</li>\n</ul>\n<p>我们在<a href=\"https://aws.amazon.com/cn/ec2/spot/\">亚马逊 EC2 竞价实例</a>上执行了所有的实验。每个实验运行在两个实例上，分别是m4.large 和 m3.xlarge 类型：一个用于 OtterTune 控制器，一个用于目标 DBMS 部署。OtterTune 调优管理器和知识库部署在本地一台 20 核 128G 内存的服务器上。</p>\n<p>工作负载用的是 <a href=\"http://www.tpc.org/tpcc/\" target=\"_blank\" rel=\"noopener noreferrer\">TPC-C</a>，这是评估联机交易系统性能的工业标准。</p>\n<h2>评估</h2>\n<p>我们给每个实验中的数据库 —— MySQL 和 Postgres —— 测量了延迟和吞吐量，下面的图表显示了结果。第一个图表显示了“第99百分位延迟”的数量，代表“最差情况下”完成一个事务的时长。第二个图表显示了吞吐量结果，以平均每秒执行的事务数来衡量。</p>\n<h2>MySQL 实验结果</h2>\n<p><img class=\"alignnone size-full wp-image-837\" src=\"https://d2908q01vomqb2.cloudfront.net/f1f836cb4ea6efb2a0b1b99f41ad8b103eff4b59/2017/05/31/ottertune_3.gif\" alt=\"\" width=\"641\" height=\"281\"></p>\n<p>OtterTune 生成的最佳配置与调优脚本和 RDS 的配置相比，OtterTune 让 MySQL 的延迟下降了大约 60%，吞吐量提升了 22% 到 35%。OtterTune 还生成了一份几乎跟 DBA 一样好的配置。</p>\n<p>在 TPC-C 负载下，只有几个 MySQL 的旋钮显著影响性能。OtterTune 和 DBA 的配置给这几个旋钮设置了很好的值。RDS 表现略逊一筹，因为给一个旋钮配置了欠佳的值。调优脚本表现最差，因为只修改一个旋钮。</p>\n<h2>Postgres 实验结果</h2>\n<p><img class=\"alignnone size-full wp-image-838\" src=\"https://d2908q01vomqb2.cloudfront.net/f1f836cb4ea6efb2a0b1b99f41ad8b103eff4b59/2017/05/31/ottertune_4.gif\" alt=\"\" width=\"630\" height=\"254\"></p>\n<p>在延迟方面，相比 Postgres 默认配置，OtterTune、调优工具、DBA 和 RDS 的配置获得了近似的提升。我们大概可以把这归于 OLTP-Bench 客户端和 DBMS 之间的网络开销。吞吐量方面，Postgres 在 OtterTune 的配置下比 DBA 和调优脚本要高 12%，比 RDS 要高 32%。</p>\n<h2>结束语</h2>\n<p>OtterTune 将寻找 DBMS 配置旋钮的最优值这一过程自动化了。它通过重用之前的调优过程收集的训练数据，来调优新部署的 DBMS。因为 OtterTune 不需要生成初始化数据集来训练它的机器学习模型，调优时间得以大大减少。</p>\n<p>下一步会怎么样？ 为了顺应的越来越流行的 DBaaS （远程登录 DBMS 主机是不可能的），OtterTune 会很快能够自动探查目标 DBMS 的硬件能力，而不需要远程登录。</p>\n<p>想了解 OtterTune 的详细资料，请查看我们的<a href=\"http://db.cs.cmu.edu/papers/2017/tuning-sigmod2017.pdf\">论文</a>和 <a href=\"https://github.com/cmu-db/ottertune\">GitHub 上的代码</a>。关注这个<a href=\"http://ottertune.cs.cmu.edu/\">网站</a>，我们将很快让 OtterTune 成为一个在线调优服务。</p>\n<hr>\n\r\n        \r\n            <blockquote class=\"rewards\">\n        <p><strong>打赏支持我翻译更多好文章，谢谢！</strong></p>\n        <a href=\"#rewardbox\" id=\"rewards-button\" class=\"fancybox\"><span class=\"btn-bluet-blue href-style\"><i class=\"fa fa-jpy\"></i> 打赏译者</span></a>\n    </blockquote>\n\n    <div id=\"rewardbox\">\n        <h4>打赏支持我翻译更多好文章，谢谢！</h4>\n                <p>任选一种支付方式</p>\n                <p>\n                        <img src=\"http://www.jobbole.com/wp-content/uploads/2016/03/bb6b0431912b5b441aac6477e67bd0d22.png\">\n            \n                            <img src=\"http://www.jobbole.com/wp-content/uploads/2016/03/381b4bd995d3cff3c32be73b9d0571b82.jpg\">\n                    </p>\n    </div>\n\n    \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"111486\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"111486votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"111486\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i>  收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i>  评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n<div id=\"author-bio\">\r\n\t\r\n\t<h3 class=\"widget-title\">\r\n\t关于作者：<a target=\"_blank\" href=\"http://www.jobbole.com/members/upanblack\">Panblack</a>\r\n\t</h3>\r\n\t<div class=\"alignleft\">\r\n\t\t<a target=\"_blank\" href=\"http://www.jobbole.com/members/upanblack\">\r\n\t\t\t<img src=\"http://tp4.sinaimg.cn/1611865122/180/0/1\">\r\n\t\t</a>\r\n\t</div>\r\n\r\n    <div class=\"author-bio-info\">\r\n\r\n        <span class=\"author-bio-info-block\">\r\n            挺老的Linux新手        </span>\r\n        <span class=\"author-bio-info-block\">\r\n            <a href=\"http://www.jobbole.com/members/upanblack\" target=\"_blank\"><i class=\"fa fa-user\"></i> 个人主页</a> ·\r\n            <a href=\"http://blog.jobbole.com/author/upanblack/\" target=\"_blank\"><i class=\"fa fa-file-text-o\"></i> 我的文章</a>\r\n\r\n             · <a title=\"声望值\" target=\"_blank\" href=\"http://www.jobbole.com/members/upanblack/reputation/\"><i class=\"fa fa-graduation-cap\"></i> 36</a> · <a title=\"我的网站\" target=\"_blank\" href=\"http://www.cnblogs.com/panblack\"><i class=\"fa fa-link\"></i></a> <a title=\"微博主页\" target=\"_blank\" href=\"http://weibo.com/panblack\"><i class=\"fa fa-weibo\"></i></a> <a title=\"GitHub主页\" target=\"_blank\" href=\"http://github.com/panblack\"><i class=\"fa fa-github\"></i></a>         </span>\r\n    </div>\r\n\t<div class=\"clear\"></div>\r\n</div>\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "publish_date": "2017/06/17", "comment_nums": 0, "remote_img_url": ["https://d2908q01vomqb2.cloudfront.net/f1f836cb4ea6efb2a0b1b99f41ad8b103eff4b59/2017/05/31/ottertune_1.gif"], "title": "通过机器学习来自动调优 DBMS，让任何人都可以部署数据库管理系统", "local_img_url": ["f"]},{"praise_nums": "1", "fav_nums": "4", "tags": "IT技术,Redis", "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">原文出处： <a target=\"_blank\" href=\"https://github.com/jasonGeng88/blog/blob/master/201706/redis-search.md\">jasonGeng88</a>   </div><div>\n<h2>场景</h2>\n</div>\n<p>大家如果是做后端开发的，想必都实现过列表查询的接口，当然有的查询条件很简单，一条 SQL 就搞定了，但有的查询条件极其复杂，再加上库表中设计的各种不合理，导致查询接口特别难写，然后加班什么的就不用说了（<em>不知各位有没有这种感受呢~</em>）。</p>\n<p>下面以一个例子开始，这是某购物网站的搜索条件，如果让你实现这样的一个搜索接口，你会如何实现？（<em>当然你说借助搜索引擎，像 Elasticsearch 之类的，你完全可以实现。但我这里想说的是，如果要你自己实现呢？</em>）</p>\n<p><a href=\"https://github.com/jasonGeng88/blog/blob/master/201706/assets/redis_search_01.png\" target=\"_blank\"><img src=\"https://github.com/jasonGeng88/blog/raw/master/201706/assets/redis_search_01.png\" alt=\"\"></a></p>\n<p>从上图中可以看出，搜索总共分为6大类，每大类中又分了各个子类。这中间，各大类条件之间是取的交集，各子类中有单选、多选、以及自定义的情况，最终输出符合条件的结果集。</p>\n<p>好了，既然需求很明确了，我们就开始来实现。</p>\n<h2><a id=\"user-content-实现1\" class=\"anchor\" href=\"https://github.com/jasonGeng88/blog/blob/master/201706/redis-search.md?hmsr=toutiao.io&amp;utm_medium=toutiao.io&amp;utm_source=toutiao.io#%E5%AE%9E%E7%8E%B01\"></a>实现1</h2>\n<p>率先登场是小A同学，他是写 SQL 方面的“专家”。小A信心满满的说：“不就是一个查询接口吗？看着条件很多，但凭着我丰富的 SQL 经验，这点还是难不倒我的。”</p>\n<p>于是乎就写出了下面这段代码（这里以 MYSQL 为例）：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-595331f2a8bd5019872988\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" touchscreen minimize scroll-mouseover\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nselect ... from table_1\r\nleft join table_2\r\nleft join table_3\r\nleft join (select ... from table_x where ...) tmp_1\r\n...\r\nwhere ...\r\norder by ...\r\nlimit m,n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-595331f2a8bd5019872988-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-595331f2a8bd5019872988-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-595331f2a8bd5019872988-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-595331f2a8bd5019872988-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-595331f2a8bd5019872988-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-595331f2a8bd5019872988-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-595331f2a8bd5019872988-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-595331f2a8bd5019872988-8\">8</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-595331f2a8bd5019872988-1\"><span class=\"crayon-i\">select</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">from </span><span class=\"crayon-e\">table_1</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-595331f2a8bd5019872988-2\"><span class=\"crayon-e\">left </span><span class=\"crayon-e\">join </span><span class=\"crayon-e\">table_2</span></div><div class=\"crayon-line\" id=\"crayon-595331f2a8bd5019872988-3\"><span class=\"crayon-e\">left </span><span class=\"crayon-e\">join </span><span class=\"crayon-e\">table_3</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-595331f2a8bd5019872988-4\"><span class=\"crayon-e\">left </span><span class=\"crayon-e\">join</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-i\">select</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">from </span><span class=\"crayon-e\">table_x </span><span class=\"crayon-i\">where</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">tmp</span><span class=\"crayon-sy\">_</span>1</div><div class=\"crayon-line\" id=\"crayon-595331f2a8bd5019872988-5\"><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-595331f2a8bd5019872988-6\"><span class=\"crayon-i\">where</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span></div><div class=\"crayon-line\" id=\"crayon-595331f2a8bd5019872988-7\"><span class=\"crayon-e\">order </span><span class=\"crayon-i\">by</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-595331f2a8bd5019872988-8\"><span class=\"crayon-i\">limit</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">m</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">n</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0014 seconds] -->\r\n<p>代码在测试环境跑了一把，结果好像都匹配上了，于是准备上预发。这一上预发，问题就开始暴露出来。预发为了尽可能的逼真线上环境，所以数据量自然而然要比测试大的多。所以这么一个复杂的 SQL，它的执行效率可想而知。测试同学果断把小A的代码给打了回来。</p>\n<h2><a id=\"user-content-实现2\" class=\"anchor\" href=\"https://github.com/jasonGeng88/blog/blob/master/201706/redis-search.md?hmsr=toutiao.io&amp;utm_medium=toutiao.io&amp;utm_source=toutiao.io#%E5%AE%9E%E7%8E%B02\"></a>实现2</h2>\n<p>总结了小A失败的教训，小B开始对SQL进行了优化，先是通过了<code>explain</code>关键字进行SQL性能分析，对该加索引的地方都加上了索引。同时将一条复杂SQL拆分成了多条SQL，计算结果在程序内存中进行计算。</p>\n<p>伪代码如下：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-595331f2a8bdf594749220\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" touchscreen minimize scroll-mouseover\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$result_1 = query('select ... from table_1 where ...');\r\n$result_2 = query('select ... from table_2 where ...');\r\n$result_3 = query('select ... from table_3 where ...');\r\n...\r\n\r\n$result = array_intersect($result_1, $result_2, $result_3, ...);</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-595331f2a8bdf594749220-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-595331f2a8bdf594749220-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-595331f2a8bdf594749220-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-595331f2a8bdf594749220-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-595331f2a8bdf594749220-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-595331f2a8bdf594749220-6\">6</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-595331f2a8bdf594749220-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">result_1</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">query</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'select ... from table_1 where ...'</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-595331f2a8bdf594749220-2\"><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">result_2</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">query</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'select ... from table_2 where ...'</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-595331f2a8bdf594749220-3\"><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">result_3</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">query</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'select ... from table_3 where ...'</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-595331f2a8bdf594749220-4\"><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span></div><div class=\"crayon-line\" id=\"crayon-595331f2a8bdf594749220-5\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-595331f2a8bdf594749220-6\"><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">result</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">array_intersect</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">result_1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">result_2</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">result_3</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0013 seconds] -->\r\n<p>这种方案从性能上明显比第一种要好很多，可是在功能验收的时候，产品经理还是觉得查询速度不够快。小B自己也知道，每次查询都会向数据库查询多次，而且有些历史原因，部分条件是做不到单表查询的，所以查询等待的时间是避免不了的。</p>\n<h2><a id=\"user-content-实现3\" class=\"anchor\" href=\"https://github.com/jasonGeng88/blog/blob/master/201706/redis-search.md?hmsr=toutiao.io&amp;utm_medium=toutiao.io&amp;utm_source=toutiao.io#%E5%AE%9E%E7%8E%B03\"></a>实现3</h2>\n<p>小C从上面的方案中看到了优化的空间。他发现小B在思路上是没问题的，将复杂条件拆分，计算各个子维度的结果集，最后将所有的子结果集进行一个汇总合并，得到最终想要的结果。</p>\n<p>于是他突发奇想，能否事先将各个子维度的结果集给缓存起来，这要查询的时候直接去取想要的子集，而不用每次去查库计算。</p>\n<p>这里小C采用 <a href=\"https://redis.io/\">Redis</a> 来存储缓存数据，用它的主要原因是，它提供了多种数据结构，并且在 Redis 中进行集合的交并集操作是一件很容易的事情。</p>\n<p>具体方案，如图所示：</p>\n<p><a href=\"https://github.com/jasonGeng88/blog/blob/master/201706/assets/redis_search_02.png\" target=\"_blank\"><img src=\"https://github.com/jasonGeng88/blog/raw/master/201706/assets/redis_search_02.png\" alt=\"\"></a></p>\n<p>这里每个条件都事先将计算好的结果集ID存入对应的key中，选用的数据结构是集合（Set）。查询操作包括：</p>\n<ul>\n<li>子类单选：直接根据条件 key，获取对应结果集；</li>\n<li>子类多选：根据多个条件 Key，进行并集操作，获取对应结果集；</li>\n<li>最终结果：将获取的所有子类结果集进行交集操作，得到最终结果；</li>\n</ul>\n<p><em><strong>这其实就是所谓的<a href=\"https://zh.wikipedia.org/wiki/%E5%80%92%E6%8E%92%E7%B4%A2%E5%BC%95\">反向索引</a>。</strong></em></p>\n<p>这里会发现，漏了一个价格的条件。从需求中可知，价格条件是个区间，并且是无穷举的。所以上述的这种穷举条件的 Key-Value 方式是做不到的。这里我们采用 Redis 的另一种数据结构进行实现，有序集合（Sorted Set）：</p>\n<p><a href=\"https://github.com/jasonGeng88/blog/blob/master/201706/assets/redis_search_03.png\" target=\"_blank\"><img src=\"https://github.com/jasonGeng88/blog/raw/master/201706/assets/redis_search_03.png\" alt=\"\"></a></p>\n<p>将所有商品加入 Key 为价格的有序集合中，值为商品ID，每个值对应的分数为商品价格的数值。这样在 Redis 的有序集合中就可以通过<code>ZRANGEBYSCORE</code>命令，根据分数（价格）区间，获取相应结果集。</p>\n<p>至此，方案三的优化已全部结束，将数据的查询与计算通过缓存的手段，进行了分离。在每次查找时，只需要简单的查找 Redis 几次就能得出结果。查询速度上符合了验收的要求。</p>\n<h2><a id=\"user-content-扩展\" class=\"anchor\" href=\"https://github.com/jasonGeng88/blog/blob/master/201706/redis-search.md?hmsr=toutiao.io&amp;utm_medium=toutiao.io&amp;utm_source=toutiao.io#%E6%89%A9%E5%B1%95\"></a>扩展</h2>\n<h3><a id=\"user-content-分页\" class=\"anchor\" href=\"https://github.com/jasonGeng88/blog/blob/master/201706/redis-search.md?hmsr=toutiao.io&amp;utm_medium=toutiao.io&amp;utm_source=toutiao.io#%E5%88%86%E9%A1%B5\"></a>分页</h3>\n<p>这里你或许发现了一个严重的功能缺陷，列表查询怎么能没有分页。是的，我们马上来看 Redis 是如何实现分页的。</p>\n<p>分页主要涉及排序，这里简单起见，就以创建时间为例。</p>\n<p>如图所示：</p>\n<p><a href=\"https://github.com/jasonGeng88/blog/blob/master/201706/assets/redis_search_04.png\" target=\"_blank\"><img src=\"https://github.com/jasonGeng88/blog/raw/master/201706/assets/redis_search_04.png\" alt=\"\"></a></p>\n<p>图中蓝色部分是以创建时间为分值的商品有序集合，蓝色下方的结果集即为条件计算而得的结果，通过<code>ZINTERSTORE</code>命令，赋结果集权重为0，商品时间结果为1，取交集而得的结果集赋予创建时间分值的新有序集合。对新结果集的操作即能得到分页所需的各个数据：</p>\n<ul>\n<li>页面总数为：<code>ZCOUNT</code>命令</li>\n<li>当前页内容：<code>ZRANGE</code>命令</li>\n<li>若以倒序排列：<code>ZREVRANGE</code>命令</li>\n</ul>\n<h3><a id=\"user-content-数据更新\" class=\"anchor\" href=\"https://github.com/jasonGeng88/blog/blob/master/201706/redis-search.md?hmsr=toutiao.io&amp;utm_medium=toutiao.io&amp;utm_source=toutiao.io#%E6%95%B0%E6%8D%AE%E6%9B%B4%E6%96%B0\"></a>数据更新</h3>\n<p>关于索引数据更新的问题，有两种方式来进行。一种是通过商品数据的修改，来即时触发更新操作，一种是通过定时脚本来进行批量更新。这里要注意的是，关于索引内容的更新，如果暴力的删除 Key，再重新设置 Key。因为 Redis 中两个操作不会是原子性进行的，所以中间可能存在空白间隙，建议采用仅移除集合中失效元素，添加新元素的方式进行。</p>\n<h3><a id=\"user-content-性能优化\" class=\"anchor\" href=\"https://github.com/jasonGeng88/blog/blob/master/201706/redis-search.md?hmsr=toutiao.io&amp;utm_medium=toutiao.io&amp;utm_source=toutiao.io#%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96\"></a>性能优化</h3>\n<p>Redis 是内存级操作，所以单次的查询会很快。但是如果我们的实现中会进行多次的 Redis 操作，Redis 的多次连接时间可能是不必要时间消耗。通过使用<code>MULTI</code>命令，开启一个事务，将 Redis 的多次操作放在一个事务中，最后通过<code>EXEC</code>来进行原子性执行（<em><strong>注意：这里所谓的事务，只是将多个操作在一次连接中执行，如果执行过程中遇到失败，是不会回滚的</strong></em>）。</p>\n<h2><a id=\"user-content-总结\" class=\"anchor\" href=\"https://github.com/jasonGeng88/blog/blob/master/201706/redis-search.md?hmsr=toutiao.io&amp;utm_medium=toutiao.io&amp;utm_source=toutiao.io#%E6%80%BB%E7%BB%93\"></a>总结</h2>\n<p>这里只是一个采用 Redis 优化查询搜索的一个简单 Demo，和现有的开源搜索引擎相比，它更轻量，学习成本也相应低些。其次，它的一些思想与开源搜索引擎是类似的，如果再加上词语解析，也可以实现类似全文检索的功能。</p>\n<p>最后，未完，待续。。。</p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"111480\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"111480votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"111480\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 4 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i> 1 评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "publish_date": "2017/06/19", "comment_nums": "1", "remote_img_url": ["http://jbcdn2.b0.upaiyun.com/2013/08/redis-logo.png"], "title": "一步步实现 Redis 搜索引擎", "local_img_url": ["f"]},{"praise_nums": "6", "fav_nums": "2", "tags": "职场,游戏,程序员,职场", "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">本文作者： <a href=\"http://blog.jobbole.com\">伯乐在线</a> - <a href=\"http://www.jobbole.com/members/liuchang\">刘唱</a> 。未经作者许可，禁止转载！<br>欢迎加入伯乐在线 <a href=\"http://blog.jobbole.com/99322\" target=\"_blank\">专栏作者</a>。</div><p>【导读】：程序员是一个充满了躁动与焦虑的职业，新人的不断涌入和频繁的跳槽正在不断消磨人们对这个行业的安全感。而我有幸认识了这样一位工程师，他从 08 年就加入育碧上海工作室从事他所热爱的游戏开发。这九年的时间里，他见证了游戏行业的蓬勃发展，开发技术的日新月异，而育碧也见证了他由青涩到成熟，在游戏开发行业中渐渐闯出自己的一番天地。</p>\n<blockquote><p>育碧是全球领先的游戏制作、发行及分销商，创建于1986年。在全球拥有30个工作室，10000名员工。育碧上海工作室是育碧亚太区的核心研发中心。自1996年成立以来，约400位顶尖人才正不断推出高品质3A级端游、页游和手游产品。同时上海工作室也承担着育碧亚太网络数据中心的重要角色。</p></blockquote>\n<p>除了育碧旗下全球畅销游戏作品《刺客信条》、《波斯王子》、《雷曼》、《孤岛惊魂》和《看门狗》，游戏发烧友们一定还知道《我还活着》、《细胞分裂系列》和《彩虹六号：围攻》等等。这些游戏从设计，制作，不断打磨完善，到最终呈现在玩家面前，都离不开游戏开发工程师们的努力，其中就包括曹檬恺。这些脍炙人口的游戏，就是由他和育碧全球各工作室的同事一起，将一行行代码转化为精美的画面，生动的人物，炫酷的操作和流畅的剧情。</p>\n<p><img class=\"alignnone\" src=\"http://wx3.sinaimg.cn/mw690/63918611gy1fgn2pbhpw9j213r0mcwo9.jpg\" width=\"690\" height=\"388\"></p>\n<p>读书期间，曹檬恺就是热爱游戏的众多青年之一，在玩游戏的过程中，他逐渐对游戏开发产生了浓厚的兴趣。被《刺客信条》宣传视频深深震撼的他毅然决定加入育碧。九年时间里，不同的工作角色给了他与众不同的体验。兴趣和责任激励他不断开阔视野，充实自己的技术栈，由初出茅庐成长为技术负责人。</p>\n<p>当被问到有没有考虑过离开育碧的时候，他给了我一个否定答案。曹檬恺告诉我，跳槽并不是程序员的必由之路，选择一个适合自己的公司非常重要。在已过去的九年和未来的职业生涯中，能够和志同道合的人一起做自己热爱的事业，保持学习和成长的状态，体会游戏上线所带来的成就感，对于一名游戏开发工程师来说，是相当享受的一件事。</p>\n<p><img class=\"alignnone\" src=\"http://wx1.sinaimg.cn/mw690/63918611gy1fgn2pfmwczj213r0mc480.jpg\" width=\"690\" height=\"388\"></p>\n<p>作为“过来人”，对想进入游戏开发领域的新人，或是处于工作迷茫期不知如何做选择的人，曹檬恺分享了自己的经验：</p>\n<h3>兴趣是最好的老师，勇敢追求自己喜欢的事业</h3>\n<p>要坚持做一件事，仅靠毅力还不够，还需要兴趣作为不断探索钻研的动力。在曹檬恺看来，相较于其他类型的软件开发，游戏开发有其独特的魅力。它是创意与技术的结合：在工作中，每天都能接触到最前沿的图形技术，并将其运用到游戏当中，制作出生动有趣的作品。从游戏玩家到参与设计制作游戏，是一个很大的跨越。当真正参与到游戏项目中的时候，能够体会到普通游戏玩家所体会不到的乐趣。尤其是在育碧这种多文化背景的环境下，能与不同职位，来自不同国家工作室的同事们交流，感受思维的碰撞。</p>\n<p>很多人期待加入这个行业，但因为种种原因望而却步，他们缺乏的是把“想”变成“做”的过程。曹檬恺希望更多喜欢游戏的年轻人，以及处于观望状态中的朋友能勇敢迈出这一步，加入到游戏开发的队伍中来。</p>\n<h3>不局限于短期利益，放眼长远发展</h3>\n<p>无论是游戏行业还是其他软件开发行业，进步都不是一两天的功夫。选择了这个职业就等于选择了终身学习。多思考，多积累，由此不断提升自己。相比于一些短期的利益，一个能让人不断成长的工作环境才是至关重要的。</p>\n<p>曹檬恺说，很多人在工作一段时间以后就会感觉遇到了瓶颈，没有了提升的空间，这对个人感受和未来发展都很不利。而他在育碧的九年时间里能一直保持成长的状态主要来源于以下几方面。</p>\n<p>首先，从刚进入工作岗位到成长为团队的负责人，这个过程本身就体现了作为一名程序员良性并且长远的职业发展路径。同时，他的工作角色一直在变化之中，经历了由开发工具维护、引擎维护、功能开发、游戏玩法设计实现等等。不同的角色让他有机会涉猎包括传统软件开发、动画、AI、图形等各种类型的技术，开拓了视野，对自己本身的定位有了更好的认识。其次，游戏项目当中离不开组内所有成员的协作分工，除了每天会和不同职位的人打交道，大型团队中的分工细化也能让开发人员在某一个领域深入钻研，这是选择大公司大团队的一个明显优势。另外，随着各个工作室之间合作的加强，有机会接触到像《刺客信条》《孤岛惊魂》这些最知名的游戏，其代码经过了十几二十年的沉淀，从中可以学到很多东西，磨炼个人技术水平。</p>\n<h3>紧跟潮流，了解行业技术前沿</h3>\n<p>一个尊重技术、紧跟潮流的公司对开发人员有着非常积极的影响。个人的成长与公司产品的成长密不可分。如今的游戏行业，一方面，社交主导的手游正在兴起，另一方面，更高精尖的图形技术和 AI 技术也在不断运用到游戏设计中来。例如游戏中一个非常不起眼的 NPC，从一点移动到另一点的简单过程，也会运用到寻路等算法。又例如在图形技术中，从最早的DX9.0到目前的DX12。这些新技术的运用使玩家获得更丰富的游戏体验。而产品的成功，自然需要开发人员不断吸收新技术，并与现有的产品完美结合。</p>\n<p>除此之外，个人也要多了解游戏行业发展趋势，不仅要学习新技术，还要发现游戏的新玩法新创意，多关注国内外的论坛，大牛的博客，专业的游戏测评网站等等。</p>\n<h3>责任就是动力</h3>\n<p>有些人会觉得参与项目责任越大压力越大，但曹檬恺却认为责任就是动力。在一个项目当中，每个人都有着举足轻重的作用。一款游戏并非从一开始就全部设计完成，只需要工程师按部就班地去实现。在设计师提出需求以后，还要在实现过程中不断打磨，以期带给玩家最棒的游戏体验。在打磨过程中迸发出的新想法，根据个人经验理解所做的技术优化都会为游戏增色不少。</p>\n<p><img class=\"alignnone\" src=\"http://wx4.sinaimg.cn/mw690/63918611gy1fgn2pju4doj213q0myqam.jpg\" width=\"690\" height=\"399\"></p>\n<p>在育碧上海工作室，能接触到大 IP，参与大型游戏开发项目更是难得的机会。在承担其中的部分工作的同时还需要管理团队，这会让自己感受到肩上的责任，努力把任务完成好。当你或是整个项目组为了一款游戏做了很多付出，看到它最终被推向市场，获得玩家的肯定时，这种巨大的成就感是其他事情所不能比拟的。大项目中的技术沉淀也值得每一个技术人员深入探讨研究，从中学习有用的经验。</p>\n<h3>劳逸结合，丰富生活</h3>\n<p>一个轻松愉快的工作氛围能使人全身心投入工作，也能追求工作与生活的平衡。好的项目团队就像一个家，大家的目标都是相同的，为了把游戏做好。工作中要平等交流互相学习，工作之余，同事间也能一起参加各种活动，成为朋友，一起游游泳、踢踢球。朋友多了，运动多了，保持身心愉悦工作自然会越做越好。</p>\n<p>现在很多公司会强调加班文化。曹檬恺坦言，自己也会加班，但不是为了赶工完成任务，而是根据自身情况选择最佳状态完成工作。有些人晚上工作效率会更高，白天的时间会用来完成一些个人的学习，公司给员工更多自由其实对双方都是颇有益处的。</p>\n<p>除了技术上的提升，公司里多一些其他职场相关的培训也很有意义，例如和顶级游戏工作室学习工作方式，针对英语和演讲方面的训练，对自己未来的职业发展非常有帮助。</p>\n<p>最后，曹檬恺用三个词语概括了在育碧的这九年：<strong>笃定、学习和动力</strong>。他对工作的选择、职业的发展规划、学习的方式都为年轻的工程师们提供了宝贵的借鉴意义。</p>\n<p><img class=\"alignnone\" src=\"http://wx4.sinaimg.cn/mw690/63918611gy1fgn2pp75ryj213p0newq8.jpg\" width=\"690\" height=\"407\"></p>\n<p>在 IT 圈人员流动速度快、人心浮躁的大环境下，曹檬恺却对我说，他和同事们都非常享受现在的工作状态，希望继续留在育碧，专心于技术，做玩家喜爱的游戏。育碧上海工作室团队中不乏工作了十年，十五年甚至更长时间的老员工。他也期待更多热爱游戏热爱技术的人加入其中，为育碧注入新鲜的血液。不论你擅长是游戏逻辑编程，UI 编程还是手游，这里都会有你的一片天地。</p>\n\r\n        \r\n            <blockquote class=\"rewards\">\n        <p><strong>打赏支持我写出更多好文章，谢谢！</strong></p>\n        <a href=\"#rewardbox\" id=\"rewards-button\" class=\"fancybox\"><span class=\"btn-bluet-blue href-style\"><i class=\"fa fa-jpy\"></i> 打赏作者</span></a>\n    </blockquote>\n\n    <div id=\"rewardbox\">\n        <h4>打赏支持我写出更多好文章，谢谢！</h4>\n                <p>\n                        <img src=\"http://jbcdn2.b0.upaiyun.com/2016/07/acb658caeaa7401d5d7d20f28a1eab52.png\">\n            \n                    </p>\n    </div>\n\n    \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"109943\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"109943votetotal\">6</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"109943\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 2 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i>  评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n<div id=\"author-bio\">\r\n\t\r\n\t<h3 class=\"widget-title\">\r\n\t关于作者：<a target=\"_blank\" href=\"http://www.jobbole.com/members/liuchang\">刘唱</a>\r\n\t</h3>\r\n\t<div class=\"alignleft\">\r\n\t\t<a target=\"_blank\" href=\"http://www.jobbole.com/members/liuchang\">\r\n\t\t\t<img src=\"http://jbcdn2.b0.upaiyun.com/2016/06/5f17a18404975a50e3a341f2f8e27d59.jpg\">\r\n\t\t</a>\r\n\t</div>\r\n\r\n    <div class=\"author-bio-info\">\r\n\r\n        <span class=\"author-bio-info-block\">\r\n            数据挖掘研究生        </span>\r\n        <span class=\"author-bio-info-block\">\r\n            <a href=\"http://www.jobbole.com/members/liuchang\" target=\"_blank\"><i class=\"fa fa-user\"></i> 个人主页</a> ·\r\n            <a href=\"http://blog.jobbole.com/author/liuchang/\" target=\"_blank\"><i class=\"fa fa-file-text-o\"></i> 我的文章</a>\r\n\r\n             · <a title=\"声望值\" target=\"_blank\" href=\"http://www.jobbole.com/members/liuchang/reputation/\"><i class=\"fa fa-graduation-cap\"></i> 33</a> · <a title=\"我的网站\" target=\"_blank\" href=\"http://www.jianshu.com/u/04b72e40cddc\"><i class=\"fa fa-link\"></i></a> <a title=\"微博主页\" target=\"_blank\" href=\"http://weibo.com/2577872237\"><i class=\"fa fa-weibo\"></i></a> <a title=\"个人微信：learningDM\" target=\"_blank\" href=\"#\"><i class=\"fa fa-weixin\"></i></a>         </span>\r\n    </div>\r\n\t<div class=\"clear\"></div>\r\n</div>\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "publish_date": "2017/06/16", "comment_nums": 0, "remote_img_url": ["http://wx3.sinaimg.cn/mw690/63918611gy1fgn2pbhpw9j213r0mcwo9.jpg"], "title": "九年游戏开发经验谈", "local_img_url": ["f"]},{"praise_nums": "1", "fav_nums": "3", "tags": "IT技术,NULL,TSQL,数据库,无值", "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">原文出处： <a target=\"_blank\" href=\"http://www.cnblogs.com/ljhdo/p/5128417.html\">Vic Liu</a>   </div><p>在关系型数据库的世界中，无值和NULL值的区别是什么？一直被这个问题困扰着，甚至在写TSQL脚本时，心有戚戚焉，害怕因为自己的一知半解，挖了坑，贻害后来人，于是，本着上下求索，不达通幽不罢休的决心（开个玩笑），遂有此文。</p>\n<p>学习过关系型数据库的伙伴都知道，NULL是指不确定的值，在数据库中绝对是噩梦的存在；而空值，一般对字符串类型而言，指没有任何值的字符串类型，为字符类型的变量设置为空值：set @vs=”，空值跟无值不同。有人可能会问，无值是什么？无值，是指数据表中没有任何数据。无值和不确定值，单从字面意思上来看，两者之间的定义很清楚，一旦深究，这两者之间的关系，有时令人十分迷惑（confused），这是因为，在特定条件下，无值会转换为NULL值。</p>\n<h3>一，举个栗子，理解无值和NULL值的区别</h3>\n<p>比如，创建一个临时表，在不插入任何数据时，该数据表是空的，没有任何值，对其执行select命令，将不会返回任何数据值：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5952c8bbb7821715961441\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\ncreate table #temp\r\n(\r\nid int null\r\n)</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5952c8bbb7821715961441-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5952c8bbb7821715961441-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5952c8bbb7821715961441-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5952c8bbb7821715961441-4\">4</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5952c8bbb7821715961441-1\"><span class=\"crayon-e\">create </span><span class=\"crayon-v\">table</span><span class=\"crayon-h\"> </span><span class=\"crayon-p\">#temp</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5952c8bbb7821715961441-2\"><span class=\"crayon-sy\">(</span></div><div class=\"crayon-line\" id=\"crayon-5952c8bbb7821715961441-3\"><span class=\"crayon-e\">id </span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">null</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5952c8bbb7821715961441-4\"><span class=\"crayon-sy\">)</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0006 seconds] -->\r\n<p>创建一个标量类型的变量，在不初始化时，该变量的值是不确定的，其值是NULL：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5952c8bbb782c088876203\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\ndeclare @vs int</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5952c8bbb782c088876203-1\">1</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5952c8bbb782c088876203-1\"><span class=\"crayon-r\">declare</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">@</span><span class=\"crayon-e\">vs </span><span class=\"crayon-t\">int</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0003 seconds] -->\r\n<p>创建一个表类型变量，在不初始化时，该表变量没有任何数据，是无值的：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5952c8bbb7830971002191\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\ndeclare @vt as table\r\n(\r\nid int null\r\n)</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5952c8bbb7830971002191-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5952c8bbb7830971002191-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5952c8bbb7830971002191-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5952c8bbb7830971002191-4\">4</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5952c8bbb7830971002191-1\"><span class=\"crayon-r\">declare</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">@</span><span class=\"crayon-e\">vt </span><span class=\"crayon-st\">as</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">table</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5952c8bbb7830971002191-2\"><span class=\"crayon-sy\">(</span></div><div class=\"crayon-line\" id=\"crayon-5952c8bbb7830971002191-3\"><span class=\"crayon-e\">id </span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">null</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5952c8bbb7830971002191-4\"><span class=\"crayon-sy\">)</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0005 seconds] -->\r\n<p>总结一下，声明一个标量型变量，如果没有对变量进行初始化，其值是不确定的，是NULL值；对于表变量，临时表和基础表，如果没有插入任何数据，该表没有任何数据，是无值的。</p>\n<h3>二，无值和NULL值的转换</h3>\n<p>在开始本节之前，先为变量赋值，简单的一个select命令就可以完成变量的赋值：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5952c8bbb7834284279913\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nselect @vs=1</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5952c8bbb7834284279913-1\">1</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5952c8bbb7834284279913-1\"><span class=\"crayon-i\">select</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">@</span><span class=\"crayon-v\">vs</span><span class=\"crayon-o\">=</span><span class=\"crayon-cn\">1</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0005 seconds] -->\r\n<p>有些朋友思维比较活跃，立马会想到：“用select命令可以从表中取值为变量赋值”，对，但是，赋值方法不是我求索的重点，我关注的是从表中取值为变量赋值的结果。</p>\n<p><strong>1，从空表中为变量赋值</strong></p>\n<p>如果数据表是空表，没有任何值，那么数据库引擎不会执行赋值语句，变量保持原有值不变：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5952c8bbb7837823955828\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nselect @vs=id\r\nfrom #temp</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5952c8bbb7837823955828-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5952c8bbb7837823955828-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5952c8bbb7837823955828-1\"><span class=\"crayon-i\">select</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">@</span><span class=\"crayon-v\">vs</span><span class=\"crayon-o\">=</span><span class=\"crayon-e\">id</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5952c8bbb7837823955828-2\"><span class=\"crayon-v\">from</span><span class=\"crayon-h\"> </span><span class=\"crayon-p\">#temp</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0004 seconds] -->\r\n<p>但是，如果采用以下方式，那么数据库引擎会执行赋值语句，由于空表不返回任何值，数据库引擎会把无值转换为不确定值NULL：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5952c8bbb783a734509534\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nselect @vs=(select top 1 id\r\nfrom #temp)</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5952c8bbb783a734509534-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5952c8bbb783a734509534-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5952c8bbb783a734509534-1\"><span class=\"crayon-i\">select</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">@</span><span class=\"crayon-v\">vs</span><span class=\"crayon-o\">=</span><span class=\"crayon-sy\">(</span><span class=\"crayon-e\">select </span><span class=\"crayon-i\">top</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">id</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5952c8bbb783a734509534-2\"><span class=\"crayon-v\">from</span><span class=\"crayon-h\"> </span><span class=\"crayon-p\">#temp)</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0005 seconds] -->\r\n<p>诧异吗？无值和NULL值的转换，居然从不起眼的变量赋值开始。<strong>注意，当不返回任何值时，数据库引擎不确定返回值，就把无值转换为NULL值。</strong></p>\n<p><strong>2，从空表中计算聚合</strong></p>\n<p>空表是没有任何数据的表，计算聚合会产生怎样的结果？</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5952c8bbb783d340977699\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nselect count(0) as count_all\r\n    ,count(id) as count_id\r\n    ,max(id) as max_id\r\n    ,min(id) as min_id\r\n    ,avg(id) as avg_id\r\n    ,sum(id) as sum_id\r\nfrom #temp</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5952c8bbb783d340977699-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5952c8bbb783d340977699-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5952c8bbb783d340977699-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5952c8bbb783d340977699-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5952c8bbb783d340977699-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5952c8bbb783d340977699-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5952c8bbb783d340977699-7\">7</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5952c8bbb783d340977699-1\"><span class=\"crayon-e\">select </span><span class=\"crayon-e\">count</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">as</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">count</span><span class=\"crayon-sy\">_</span>all</div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5952c8bbb783d340977699-2\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">,</span><span class=\"crayon-e\">count</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">id</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">as</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">count</span><span class=\"crayon-sy\">_</span>id</div><div class=\"crayon-line\" id=\"crayon-5952c8bbb783d340977699-3\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">,</span><span class=\"crayon-e\">max</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">id</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">as</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">max</span><span class=\"crayon-sy\">_</span>id</div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5952c8bbb783d340977699-4\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">,</span><span class=\"crayon-e\">min</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">id</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">as</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">min</span><span class=\"crayon-sy\">_</span>id</div><div class=\"crayon-line\" id=\"crayon-5952c8bbb783d340977699-5\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">,</span><span class=\"crayon-e\">avg</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">id</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">as</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">avg</span><span class=\"crayon-sy\">_</span>id</div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5952c8bbb783d340977699-6\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">,</span><span class=\"crayon-e\">sum</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">id</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">as</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">sum_id</span></div><div class=\"crayon-line\" id=\"crayon-5952c8bbb783d340977699-7\"><span class=\"crayon-v\">from</span><span class=\"crayon-h\"> </span><span class=\"crayon-p\">#temp</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0016 seconds] -->\r\n<p>当统计数据行数时，返回的是0；当计算聚合函数（max，min，avg和sum）的聚合值时，由于无值可以聚合，数据库引擎不能确定这些聚合函数的返回值，因此，数据库引擎返回NULL值。</p>\n<p style=\"text-align: center\"><a href=\"http://jbcdn2.b0.upaiyun.com/2017/06/aa7d9f4278af95b35311f5d41c7b9fa2.png\"><img class=\"alignnone size-medium wp-image-111574\" src=\"http://jbcdn2.b0.upaiyun.com/2017/06/aa7d9f4278af95b35311f5d41c7b9fa2-300x39.png\" alt=\"628084-20170620110230601-1550885802\"></a></p>\n<h3>三，聚合函数忽略NULL值</h3>\n<p>一般情况下，除了count(0)，count(*)之外，聚合函数都会忽略NULL值，而统计非NULL值，如果读者有疑问，可以查看我的博客《<a id=\"cb_post_title_url\" class=\"postTitle2\" href=\"http://www.cnblogs.com/ljhdo/p/4950586.html\">TSQL 聚合函数忽略NULL值</a>》。如果只知聚合函数忽略NULL值，而不知空表也会产生结果为NULL的聚合值，轻易得出聚合函数不会返回NULL值的定论，那就很尴尬。楼主曾遇到过一次“意外”，在一次调试脚本代码的过程中，我遇到max聚合函数返回NULL值的情况，当时一脸懵逼，直接怀疑自己之前的所学。</p>\n<p>当聚合列值都是NULL值时，由于聚合函数忽略NULL值，因此，当计算聚合函数（max，min，avg和sum）的聚合值时，由于无值可以聚合，数据库引擎不能确定这些聚合函数的返回值，因此，数据库引擎返回NULL值。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5952c8bbb7841656109667\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\ninsert into #temp(id)\r\nvalues(null)\r\n\r\nselect count(0) as count_all\r\n    ,count(id) as count_id\r\n    ,max(id) as max_id\r\n    ,min(id) as min_id\r\n    ,avg(id) as avg_id\r\n    ,sum(id) as sum_id\r\nfrom #temp</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5952c8bbb7841656109667-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5952c8bbb7841656109667-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5952c8bbb7841656109667-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5952c8bbb7841656109667-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5952c8bbb7841656109667-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5952c8bbb7841656109667-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5952c8bbb7841656109667-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5952c8bbb7841656109667-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5952c8bbb7841656109667-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5952c8bbb7841656109667-10\">10</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5952c8bbb7841656109667-1\"><span class=\"crayon-e\">insert </span><span class=\"crayon-v\">into</span><span class=\"crayon-h\"> </span><span class=\"crayon-p\">#temp(id)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5952c8bbb7841656109667-2\"><span class=\"crayon-e\">values</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">null</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5952c8bbb7841656109667-3\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5952c8bbb7841656109667-4\"><span class=\"crayon-e\">select </span><span class=\"crayon-e\">count</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">as</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">count</span><span class=\"crayon-sy\">_</span>all</div><div class=\"crayon-line\" id=\"crayon-5952c8bbb7841656109667-5\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">,</span><span class=\"crayon-e\">count</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">id</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">as</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">count</span><span class=\"crayon-sy\">_</span>id</div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5952c8bbb7841656109667-6\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">,</span><span class=\"crayon-e\">max</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">id</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">as</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">max</span><span class=\"crayon-sy\">_</span>id</div><div class=\"crayon-line\" id=\"crayon-5952c8bbb7841656109667-7\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">,</span><span class=\"crayon-e\">min</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">id</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">as</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">min</span><span class=\"crayon-sy\">_</span>id</div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5952c8bbb7841656109667-8\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">,</span><span class=\"crayon-e\">avg</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">id</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">as</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">avg</span><span class=\"crayon-sy\">_</span>id</div><div class=\"crayon-line\" id=\"crayon-5952c8bbb7841656109667-9\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">,</span><span class=\"crayon-e\">sum</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">id</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">as</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">sum_id</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5952c8bbb7841656109667-10\"><span class=\"crayon-v\">from</span><span class=\"crayon-h\"> </span><span class=\"crayon-p\">#temp</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0019 seconds] -->\r\n<p>聚合函数（max,min,sum,avg和count）忽略null值，但不代表聚合函数不返回null值：如果数据表为空表，或聚合列值都是null，那么max,min,sum,avg聚合函数返回null值，而count 聚合函数返回0。聚合函数的共性：<span id=\"mt3\" class=\"sentence SentenceHover\">Null values are ignored。</span></p>\n<p><a href=\"http://jbcdn2.b0.upaiyun.com/2017/06/67f68fb73135e2a336466ab69fe7df28.png\"><img class=\"size-medium wp-image-111576 aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2017/06/67f68fb73135e2a336466ab69fe7df28-300x37.png\" alt=\"628084-20170620112538616-1090159798\"></a></p>\n<p>不再迷惑：<strong>当不返回任何值时，数据库引擎不确定返回值，就把无值转换为NULL值。</strong></p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"111541\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"111541votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"111541\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 3 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i> 1 评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "publish_date": "2017/06/21", "comment_nums": "1", "remote_img_url": ["http://jbcdn2.b0.upaiyun.com/2017/06/aa7d9f4278af95b35311f5d41c7b9fa2-300x39.png"], "title": "不再迷惑，无值和 NULL 值", "local_img_url": ["f"]},{"praise_nums": "1", "fav_nums": "2", "tags": "开发,Go,TensorFlow", "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">原文出处： <a ref=\"nofollow\" target=\"_blank\" href=\"https://pgaleone.eu/tensorflow/go/2017/05/29/understanding-tensorflow-using-go/\">P. Galeone</a>   译文出处：<a target=\"_blank\" href=\"http://www.iteye.com/news/32467\">雁惊寒</a>   </div><p><em>译者注：本文通过一个简单的Go绑定实例，让读者一步一步地学习到Tensorflow有关ID、作用域、类型等方面的知识。以下是译文。</em></p>\n<p>Tensorflow并不是机器学习方面专用的库，而是一个使用图来表示计算的通用计算库。它的核心是用C++实现的，并且还有不同语言的绑定。Go语言绑定是一个非常有用的工具，它与Python绑定不同，用户不仅可以通过Go语言使用Tensorflow，还可以了解Tensorflow的底层实现。</p>\n<p><strong>绑定</strong></p>\n<p>Tensorflow的开发者正式发布了：</p>\n<ul>\n<li>C++源代码：真正的Tensorflow核心，实现了具体的高级和低级操作。</li>\n<li>Python绑定和Python库：这个绑定是由C++实现自动生成的，这样我们可以使用Python来调用C++函数。此外，这个库将调用融合到了绑定中，以便定义更高级别的API。</li>\n<li>Java绑定。</li>\n<li>Go绑定。</li>\n</ul>\n<p>作为一个Go开发者而不是一个Java爱好者，我开始关注Go绑定，以便了解他们创建了什么样的任务。</p>\n<p><strong>Go绑定</strong></p>\n<div><img class=\"aligncenter\" src=\"http://dl2.iteye.com/upload/attachment/0125/3210/5d4bd576-2c19-330c-aee5-8eb9da01eb3e.png\"></div>\n<div style=\"text-align: center\">地鼠与Tensorflow的徽标</div>\n<p>首先要注意的是，Go API缺少对Variable的支持：该API旨在使用已经训练过的模型，而不是从头开始训练模型。安装Tensorflow for Go的时候已经明确说明了：</p>\n<blockquote><p>TensorFlow提供了可用于Go程序的API。这些API特别适合于加载用Python创建并需要在Go程序中执行的模型。</p></blockquote>\n<p>如果我们对培训ML模型不感兴趣，万岁！相反，如果你对培训模型感兴趣，那就有一个建议：</p>\n<blockquote><p>作为一个真正的Go开发者，保持简单！使用Python定义并训练模型；你可以随时使用Go来加载并使用训练过的模型！</p></blockquote>\n<p>简而言之，go绑定可用于<strong>导入和定义</strong>常量图；在这种情况下，常量指的是没有经过训练的过程，因此没有可训练的变量。</p>\n<p>现在，开始用Go来深入学习Tensorflow吧：让我们来创建第一个应用程序。</p>\n<p>在下文中，我假设读者已经准备好Go环境，并按照<a href=\"https://github.com/tensorflow/tensorflow/blob/master/tensorflow/go/README.md\" target=\"_blank\">README</a>中的说明编译并安装了Tensorflow绑定。</p>\n<p><strong>理解Tensorflow结构</strong></p>\n<p>让我们来重复一下什么是Tensorflow：</p>\n<blockquote><p>TensorFlow™是一款使用数据流图进行数值计算的开源软件库。图中的节点表示数学运算，而图的边表示在节点之间传递的多维数据数组（张量）。</p></blockquote>\n<p>我们可以把Tensorflow视为一种描述性语言，这有点像SQL，你可以在其中描述你想要的内容，并让底层引擎（数据库）解析你的查询、检查句法和语义错误、将其转换为内部表示形式、进行优化并计算出结果：所有这一切都会给你正确的结果。</p>\n<p>因此，当我们使用任何一个API时，我们真正做的是描述一个图：当我们把图放到Session中并显式地在Session中运行图时，图的计算就开始了。</p>\n<p>知道了这一点之后，让我们试着来定义一个计算图并在一个Session中进行计算吧。<a href=\"https://godoc.org/github.com/tensorflow/tensorflow/tensorflow/go\" target=\"_blank\">API文档</a>为我们提供了tensorflow（简写为 tf）和op包中所有方法的列表。</p>\n<p>我们可以看到，这两个包包含了我们需要定义和计算图形的所有内容。</p>\n<p>前者包含了构建一个基本的“空”结构（就像Graph本身）的功能，后者是包含由C++实现自动生成绑定的最重要的包。</p>\n<p>然而，假设我们要计算A与x的矩阵乘法，其中</p>\n<div><img class=\"aligncenter\" src=\"http://dl2.iteye.com/upload/attachment/0125/3212/b2aca1f7-5bfc-3c34-a4a3-6e1e640db759.png\"></div>\n<p>我假设读者已经熟悉了tensorflow图定义的基本思想，并且知道占位符是什么以及它们如何工作。下面的代码是对Tensorflow Python绑定的第一次尝试。我们来调用这个文件attempt1.go</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5952d146781d7311287988\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" touchscreen minimize scroll-mouseover\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\npackage main  \r\n  \r\nimport (  \r\n    \"fmt\"  \r\n    tf \"github.com/tensorflow/tensorflow/tensorflow/go\"  \r\n    \"github.com/tensorflow/tensorflow/tensorflow/go/op\"  \r\n)  \r\n  \r\nfunc main() {  \r\n    // 这里，我们打算要: 创建图  \r\n  \r\n    // 我们要定义两个占位符用于在运行的时候传入  \r\n    // 第一个占位符 A 将是一个 [2, 2] 的整数张量  \r\n    // 第二个占位符 x 将是一个 [2, 1] 的整数张量  \r\n  \r\n    // 然后，我们要计算 Y = Ax  \r\n  \r\n    // 创建图的第一个节点： 一个空的节点，位于图的根  \r\n    root := op.NewScope()  \r\n  \r\n    // 定义两个占位符  \r\n    A := op.Placeholder(root, tf.Int64, op.PlaceholderShape(tf.MakeShape(2, 2)))  \r\n    x := op.Placeholder(root, tf.Int64, op.PlaceholderShape(tf.MakeShape(2, 1)))  \r\n  \r\n    // 定义接收A和x作为输入参数的操作节点  \r\n    product := op.MatMul(root, A, x)  \r\n  \r\n    // 每次我们把一个`Scope`穿给操作符的时候，把操作放在作用域的下面。  \r\n    // 这样，我们有了一个空的作用域（由NewScope创建）：空的作用域是图的根，因此可以用“/”来表示。  \r\n  \r\n    // 现在，我们让tensorflow按照我们的定义来创建图。  \r\n    // 把作用域和OP结合起来，创建具体的图。  \r\n  \r\n    graph, err := root.Finalize()  \r\n    if err != nil {  \r\n        // 这里没办法处理这个错误：  \r\n        // 如果我们错误的定义了图，我们必须手工修改这个定义。  \r\n  \r\n        // 这就跟SQL查询一样：如果查询语句在语法上有问题，我们只能重新写  \r\n        panic(err.Error())  \r\n    }  \r\n  \r\n    // 如果在这里，图在语法上是正确的。  \r\n    // 我们就可以把它放到一个Session里，并执行。  \r\n  \r\n    var sess *tf.Session  \r\n    sess, err = tf.NewSession(graph, &amp;tf.SessionOptions{})  \r\n    if err != nil {  \r\n        panic(err.Error())  \r\n    }  \r\n  \r\n    // 要使用占位符，我们必须创建一个Tensors，这个Tensors包含要反馈到网络的数值  \r\n    var matrix, column *tf.Tensor  \r\n  \r\n    // A = [ [1, 2], [-1, -2] ]  \r\n    if matrix, err = tf.NewTensor([2][2]int64{ {1, 2}, {-1, -2} }); err != nil {  \r\n        panic(err.Error())  \r\n    }  \r\n    // x = [ [10], [100] ]  \r\n    if column, err = tf.NewTensor([2][1]int64{ {10}, {100} }); err != nil {  \r\n        panic(err.Error())  \r\n    }  \r\n  \r\n    var results []*tf.Tensor  \r\n    if results, err = sess.Run(map[tf.Output]*tf.Tensor{  \r\n        A: matrix,  \r\n        x: column,  \r\n    }, []tf.Output{product}, nil); err != nil {  \r\n        panic(err.Error())  \r\n    }  \r\n    for _, result := range results {  \r\n        fmt.Println(result.Value().([][]int64))  \r\n    }  \r\n}</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5952d146781d7311287988-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5952d146781d7311287988-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5952d146781d7311287988-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5952d146781d7311287988-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5952d146781d7311287988-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5952d146781d7311287988-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5952d146781d7311287988-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5952d146781d7311287988-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5952d146781d7311287988-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5952d146781d7311287988-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5952d146781d7311287988-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5952d146781d7311287988-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5952d146781d7311287988-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5952d146781d7311287988-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5952d146781d7311287988-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5952d146781d7311287988-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-5952d146781d7311287988-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5952d146781d7311287988-18\">18</div><div class=\"crayon-num\" data-line=\"crayon-5952d146781d7311287988-19\">19</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5952d146781d7311287988-20\">20</div><div class=\"crayon-num\" data-line=\"crayon-5952d146781d7311287988-21\">21</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5952d146781d7311287988-22\">22</div><div class=\"crayon-num\" data-line=\"crayon-5952d146781d7311287988-23\">23</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5952d146781d7311287988-24\">24</div><div class=\"crayon-num\" data-line=\"crayon-5952d146781d7311287988-25\">25</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5952d146781d7311287988-26\">26</div><div class=\"crayon-num\" data-line=\"crayon-5952d146781d7311287988-27\">27</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5952d146781d7311287988-28\">28</div><div class=\"crayon-num\" data-line=\"crayon-5952d146781d7311287988-29\">29</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5952d146781d7311287988-30\">30</div><div class=\"crayon-num\" data-line=\"crayon-5952d146781d7311287988-31\">31</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5952d146781d7311287988-32\">32</div><div class=\"crayon-num\" data-line=\"crayon-5952d146781d7311287988-33\">33</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5952d146781d7311287988-34\">34</div><div class=\"crayon-num\" data-line=\"crayon-5952d146781d7311287988-35\">35</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5952d146781d7311287988-36\">36</div><div class=\"crayon-num\" data-line=\"crayon-5952d146781d7311287988-37\">37</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5952d146781d7311287988-38\">38</div><div class=\"crayon-num\" data-line=\"crayon-5952d146781d7311287988-39\">39</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5952d146781d7311287988-40\">40</div><div class=\"crayon-num\" data-line=\"crayon-5952d146781d7311287988-41\">41</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5952d146781d7311287988-42\">42</div><div class=\"crayon-num\" data-line=\"crayon-5952d146781d7311287988-43\">43</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5952d146781d7311287988-44\">44</div><div class=\"crayon-num\" data-line=\"crayon-5952d146781d7311287988-45\">45</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5952d146781d7311287988-46\">46</div><div class=\"crayon-num\" data-line=\"crayon-5952d146781d7311287988-47\">47</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5952d146781d7311287988-48\">48</div><div class=\"crayon-num\" data-line=\"crayon-5952d146781d7311287988-49\">49</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5952d146781d7311287988-50\">50</div><div class=\"crayon-num\" data-line=\"crayon-5952d146781d7311287988-51\">51</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5952d146781d7311287988-52\">52</div><div class=\"crayon-num\" data-line=\"crayon-5952d146781d7311287988-53\">53</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5952d146781d7311287988-54\">54</div><div class=\"crayon-num\" data-line=\"crayon-5952d146781d7311287988-55\">55</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5952d146781d7311287988-56\">56</div><div class=\"crayon-num\" data-line=\"crayon-5952d146781d7311287988-57\">57</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5952d146781d7311287988-58\">58</div><div class=\"crayon-num\" data-line=\"crayon-5952d146781d7311287988-59\">59</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5952d146781d7311287988-60\">60</div><div class=\"crayon-num\" data-line=\"crayon-5952d146781d7311287988-61\">61</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5952d146781d7311287988-62\">62</div><div class=\"crayon-num\" data-line=\"crayon-5952d146781d7311287988-63\">63</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5952d146781d7311287988-64\">64</div><div class=\"crayon-num\" data-line=\"crayon-5952d146781d7311287988-65\">65</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5952d146781d7311287988-66\">66</div><div class=\"crayon-num\" data-line=\"crayon-5952d146781d7311287988-67\">67</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5952d146781d7311287988-68\">68</div><div class=\"crayon-num\" data-line=\"crayon-5952d146781d7311287988-69\">69</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5952d146781d7311287988-70\">70</div><div class=\"crayon-num\" data-line=\"crayon-5952d146781d7311287988-71\">71</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5952d146781d7311287988-72\">72</div><div class=\"crayon-num\" data-line=\"crayon-5952d146781d7311287988-73\">73</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5952d146781d7311287988-74\">74</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5952d146781d7311287988-1\"><span class=\"crayon-t\">package</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">main  </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5952d146781d7311287988-2\"><span class=\"crayon-e\">  </span></div><div class=\"crayon-line\" id=\"crayon-5952d146781d7311287988-3\"><span class=\"crayon-e\">import</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-h\">  </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5952d146781d7311287988-4\"><span class=\"crayon-h\">    </span><span class=\"crayon-s\">\"fmt\"</span><span class=\"crayon-h\">  </span></div><div class=\"crayon-line\" id=\"crayon-5952d146781d7311287988-5\"><span class=\"crayon-h\">    </span><span class=\"crayon-i\">tf</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"github.com/tensorflow/tensorflow/tensorflow/go\"</span><span class=\"crayon-h\">  </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5952d146781d7311287988-6\"><span class=\"crayon-h\">    </span><span class=\"crayon-s\">\"github.com/tensorflow/tensorflow/tensorflow/go/op\"</span><span class=\"crayon-h\">  </span></div><div class=\"crayon-line\" id=\"crayon-5952d146781d7311287988-7\"><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">  </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5952d146781d7311287988-8\"><span class=\"crayon-h\">  </span></div><div class=\"crayon-line\" id=\"crayon-5952d146781d7311287988-9\"><span class=\"crayon-e\">func </span><span class=\"crayon-e\">main</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span><span class=\"crayon-h\">  </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5952d146781d7311287988-10\"><span class=\"crayon-h\">    </span><span class=\"crayon-c\">// 这里，我们打算要: 创建图  </span></div><div class=\"crayon-line\" id=\"crayon-5952d146781d7311287988-11\"><span class=\"crayon-h\">  </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5952d146781d7311287988-12\"><span class=\"crayon-h\">    </span><span class=\"crayon-c\">// 我们要定义两个占位符用于在运行的时候传入  </span></div><div class=\"crayon-line\" id=\"crayon-5952d146781d7311287988-13\"><span class=\"crayon-h\">    </span><span class=\"crayon-c\">// 第一个占位符 A 将是一个 [2, 2] 的整数张量  </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5952d146781d7311287988-14\"><span class=\"crayon-h\">    </span><span class=\"crayon-c\">// 第二个占位符 x 将是一个 [2, 1] 的整数张量  </span></div><div class=\"crayon-line\" id=\"crayon-5952d146781d7311287988-15\"><span class=\"crayon-h\">  </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5952d146781d7311287988-16\"><span class=\"crayon-h\">    </span><span class=\"crayon-c\">// 然后，我们要计算 Y = Ax  </span></div><div class=\"crayon-line\" id=\"crayon-5952d146781d7311287988-17\"><span class=\"crayon-h\">  </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5952d146781d7311287988-18\"><span class=\"crayon-h\">    </span><span class=\"crayon-c\">// 创建图的第一个节点： 一个空的节点，位于图的根  </span></div><div class=\"crayon-line\" id=\"crayon-5952d146781d7311287988-19\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">root</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">:</span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">op</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">NewScope</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">  </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5952d146781d7311287988-20\"><span class=\"crayon-h\">  </span></div><div class=\"crayon-line\" id=\"crayon-5952d146781d7311287988-21\"><span class=\"crayon-h\">    </span><span class=\"crayon-c\">// 定义两个占位符  </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5952d146781d7311287988-22\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">A</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">:</span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">op</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">Placeholder</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">root</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">tf</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">Int64</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">op</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">PlaceholderShape</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">tf</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">MakeShape</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">  </span></div><div class=\"crayon-line\" id=\"crayon-5952d146781d7311287988-23\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">x</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">:</span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">op</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">Placeholder</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">root</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">tf</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">Int64</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">op</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">PlaceholderShape</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">tf</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">MakeShape</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">  </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5952d146781d7311287988-24\"><span class=\"crayon-h\">  </span></div><div class=\"crayon-line\" id=\"crayon-5952d146781d7311287988-25\"><span class=\"crayon-h\">    </span><span class=\"crayon-c\">// 定义接收A和x作为输入参数的操作节点  </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5952d146781d7311287988-26\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">product</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">:</span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">op</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">MatMul</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">root</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">A</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">x</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">  </span></div><div class=\"crayon-line\" id=\"crayon-5952d146781d7311287988-27\"><span class=\"crayon-h\">  </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5952d146781d7311287988-28\"><span class=\"crayon-h\">    </span><span class=\"crayon-c\">// 每次我们把一个`Scope`穿给操作符的时候，把操作放在作用域的下面。  </span></div><div class=\"crayon-line\" id=\"crayon-5952d146781d7311287988-29\"><span class=\"crayon-h\">    </span><span class=\"crayon-c\">// 这样，我们有了一个空的作用域（由NewScope创建）：空的作用域是图的根，因此可以用“/”来表示。  </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5952d146781d7311287988-30\"><span class=\"crayon-h\">  </span></div><div class=\"crayon-line\" id=\"crayon-5952d146781d7311287988-31\"><span class=\"crayon-h\">    </span><span class=\"crayon-c\">// 现在，我们让tensorflow按照我们的定义来创建图。  </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5952d146781d7311287988-32\"><span class=\"crayon-h\">    </span><span class=\"crayon-c\">// 把作用域和OP结合起来，创建具体的图。  </span></div><div class=\"crayon-line\" id=\"crayon-5952d146781d7311287988-33\"><span class=\"crayon-h\">  </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5952d146781d7311287988-34\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">graph</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">err</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">:</span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">root</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">Finalize</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">  </span></div><div class=\"crayon-line\" id=\"crayon-5952d146781d7311287988-35\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">err</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">!=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">nil</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span><span class=\"crayon-h\">  </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5952d146781d7311287988-36\"><span class=\"crayon-h\">        </span><span class=\"crayon-c\">// 这里没办法处理这个错误：  </span></div><div class=\"crayon-line\" id=\"crayon-5952d146781d7311287988-37\"><span class=\"crayon-h\">        </span><span class=\"crayon-c\">// 如果我们错误的定义了图，我们必须手工修改这个定义。  </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5952d146781d7311287988-38\"><span class=\"crayon-h\">  </span></div><div class=\"crayon-line\" id=\"crayon-5952d146781d7311287988-39\"><span class=\"crayon-h\">        </span><span class=\"crayon-c\">// 这就跟SQL查询一样：如果查询语句在语法上有问题，我们只能重新写  </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5952d146781d7311287988-40\"><span class=\"crayon-h\">        </span><span class=\"crayon-e\">panic</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">err</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">Error</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">  </span></div><div class=\"crayon-line\" id=\"crayon-5952d146781d7311287988-41\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span><span class=\"crayon-h\">  </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5952d146781d7311287988-42\"><span class=\"crayon-h\">  </span></div><div class=\"crayon-line\" id=\"crayon-5952d146781d7311287988-43\"><span class=\"crayon-h\">    </span><span class=\"crayon-c\">// 如果在这里，图在语法上是正确的。  </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5952d146781d7311287988-44\"><span class=\"crayon-h\">    </span><span class=\"crayon-c\">// 我们就可以把它放到一个Session里，并执行。  </span></div><div class=\"crayon-line\" id=\"crayon-5952d146781d7311287988-45\"><span class=\"crayon-h\">  </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5952d146781d7311287988-46\"><span class=\"crayon-h\">    </span><span class=\"crayon-t\">var</span><span class=\"crayon-h\"> </span><span class=\"crayon-e \">sess *</span><span class=\"crayon-v\">tf</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">Session  </span></div><div class=\"crayon-line\" id=\"crayon-5952d146781d7311287988-47\"><span class=\"crayon-e\">    </span><span class=\"crayon-v\">sess</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">err</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">tf</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">NewSession</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">graph</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&amp;</span><span class=\"crayon-v\">tf</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">SessionOptions</span><span class=\"crayon-sy\">{</span><span class=\"crayon-sy\">}</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">  </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5952d146781d7311287988-48\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">err</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">!=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">nil</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span><span class=\"crayon-h\">  </span></div><div class=\"crayon-line\" id=\"crayon-5952d146781d7311287988-49\"><span class=\"crayon-h\">        </span><span class=\"crayon-e\">panic</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">err</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">Error</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">  </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5952d146781d7311287988-50\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span><span class=\"crayon-h\">  </span></div><div class=\"crayon-line\" id=\"crayon-5952d146781d7311287988-51\"><span class=\"crayon-h\">  </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5952d146781d7311287988-52\"><span class=\"crayon-h\">    </span><span class=\"crayon-c\">// 要使用占位符，我们必须创建一个Tensors，这个Tensors包含要反馈到网络的数值  </span></div><div class=\"crayon-line\" id=\"crayon-5952d146781d7311287988-53\"><span class=\"crayon-h\">    </span><span class=\"crayon-t\">var</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">matrix</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-e \">column *</span><span class=\"crayon-v\">tf</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">Tensor</span><span class=\"crayon-h\">  </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5952d146781d7311287988-54\"><span class=\"crayon-h\">  </span></div><div class=\"crayon-line\" id=\"crayon-5952d146781d7311287988-55\"><span class=\"crayon-h\">    </span><span class=\"crayon-c\">// A = [ [1, 2], [-1, -2] ]  </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5952d146781d7311287988-56\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">matrix</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">err</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">tf</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">NewTensor</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">]</span><span class=\"crayon-e\">int64</span><span class=\"crayon-sy\">{</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">}</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">}</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">}</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">err</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">!=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">nil</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span><span class=\"crayon-h\">  </span></div><div class=\"crayon-line\" id=\"crayon-5952d146781d7311287988-57\"><span class=\"crayon-h\">        </span><span class=\"crayon-e\">panic</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">err</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">Error</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">  </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5952d146781d7311287988-58\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span><span class=\"crayon-h\">  </span></div><div class=\"crayon-line\" id=\"crayon-5952d146781d7311287988-59\"><span class=\"crayon-h\">    </span><span class=\"crayon-c\">// x = [ [10], [100] ]  </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5952d146781d7311287988-60\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">column</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">err</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">tf</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">NewTensor</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">]</span><span class=\"crayon-e\">int64</span><span class=\"crayon-sy\">{</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span><span class=\"crayon-cn\">10</span><span class=\"crayon-sy\">}</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span><span class=\"crayon-cn\">100</span><span class=\"crayon-sy\">}</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">}</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">err</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">!=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">nil</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span><span class=\"crayon-h\">  </span></div><div class=\"crayon-line\" id=\"crayon-5952d146781d7311287988-61\"><span class=\"crayon-h\">        </span><span class=\"crayon-e\">panic</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">err</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">Error</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">  </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5952d146781d7311287988-62\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span><span class=\"crayon-h\">  </span></div><div class=\"crayon-line\" id=\"crayon-5952d146781d7311287988-63\"><span class=\"crayon-h\">  </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5952d146781d7311287988-64\"><span class=\"crayon-h\">    </span><span class=\"crayon-t\">var</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">results</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">]</span><span class=\"crayon-o\">*</span><span class=\"crayon-v\">tf</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">Tensor  </span></div><div class=\"crayon-line\" id=\"crayon-5952d146781d7311287988-65\"><span class=\"crayon-e\">    </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">results</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">err</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">sess</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">Run</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">map</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">tf</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">Output</span><span class=\"crayon-sy\">]</span><span class=\"crayon-o\">*</span><span class=\"crayon-v\">tf</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">Tensor</span><span class=\"crayon-sy\">{</span><span class=\"crayon-h\">  </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5952d146781d7311287988-66\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">A</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">matrix</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\">  </span></div><div class=\"crayon-line\" id=\"crayon-5952d146781d7311287988-67\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">x</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">column</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\">  </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5952d146781d7311287988-68\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">]</span><span class=\"crayon-v\">tf</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">Output</span><span class=\"crayon-sy\">{</span><span class=\"crayon-v\">product</span><span class=\"crayon-sy\">}</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">nil</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">err</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">!=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">nil</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span><span class=\"crayon-h\">  </span></div><div class=\"crayon-line\" id=\"crayon-5952d146781d7311287988-69\"><span class=\"crayon-h\">        </span><span class=\"crayon-e\">panic</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">err</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">Error</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">  </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5952d146781d7311287988-70\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span><span class=\"crayon-h\">  </span></div><div class=\"crayon-line\" id=\"crayon-5952d146781d7311287988-71\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">for</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">_</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">result</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">:</span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">range</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">results</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span><span class=\"crayon-h\">  </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5952d146781d7311287988-72\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">fmt</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">Println</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">result</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">Value</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">]</span><span class=\"crayon-v\">int64</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">  </span></div><div class=\"crayon-line\" id=\"crayon-5952d146781d7311287988-73\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span><span class=\"crayon-h\">  </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5952d146781d7311287988-74\"><span class=\"crayon-sy\">}</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0227 seconds] -->\r\n<p>代码注释的很详细，希望读者能阅读每一行注释。</p>\n<p>现在，Tensorflow-Python用户期望该代码进行编译并正常工作。我们来看看它是否正确：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5952d146781e8241711600\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" touchscreen minimize scroll-mouseover\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\ngo run attempt1.go</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5952d146781e8241711600-1\">1</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5952d146781e8241711600-1\"><span class=\"crayon-e\">go </span><span class=\"crayon-e\">run </span><span class=\"crayon-v\">attempt1</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">go</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0004 seconds] -->\r\n<p>这是他看到的结果：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5952d146781ef208236055\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" touchscreen minimize scroll-mouseover\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\npanic: failed to add operation \"Placeholder\": Duplicate node name in graph: 'Placeholder'</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5952d146781ef208236055-1\">1</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5952d146781ef208236055-1\"><span class=\"crayon-v\">panic</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">failed </span><span class=\"crayon-st\">to</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">add </span><span class=\"crayon-i\">operation</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"Placeholder\"</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Duplicate </span><span class=\"crayon-e\">node </span><span class=\"crayon-e\">name </span><span class=\"crayon-st\">in</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">graph</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'Placeholder'</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0007 seconds] -->\r\n<p>等等，这里发生了什么？ 显然，存在两个名称都为“Placeholder”的操作。</p>\n<p><strong>第一节课： 节点ID</strong></p>\n<p>每当我们调用一个方法来定义一个操作时，Python API都会生成不同的节点，无论是否已经被调用过。下面的代码返回3。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5952d146781f3113906922\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" touchscreen minimize scroll-mouseover\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nimport tensorflow as tf  \r\na = tf.placeholder(tf.int32, shape=())  \r\nb = tf.placeholder(tf.int32, shape=())  \r\nadd = tf.add(a,b)  \r\nsess = tf.InteractiveSession()  \r\nprint(sess.run(add, feed_dict={a: 1,b: 2}))</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5952d146781f3113906922-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5952d146781f3113906922-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5952d146781f3113906922-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5952d146781f3113906922-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5952d146781f3113906922-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5952d146781f3113906922-6\">6</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5952d146781f3113906922-1\"><span class=\"crayon-e\">import </span><span class=\"crayon-e\">tensorflow </span><span class=\"crayon-st\">as</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">tf</span><span class=\"crayon-h\">  </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5952d146781f3113906922-2\"><span class=\"crayon-v\">a</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">tf</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">placeholder</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">tf</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">int32</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">shape</span><span class=\"crayon-o\">=</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">  </span></div><div class=\"crayon-line\" id=\"crayon-5952d146781f3113906922-3\"><span class=\"crayon-v\">b</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">tf</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">placeholder</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">tf</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">int32</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">shape</span><span class=\"crayon-o\">=</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">  </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5952d146781f3113906922-4\"><span class=\"crayon-v\">add</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">tf</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">add</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">a</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">b</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">  </span></div><div class=\"crayon-line\" id=\"crayon-5952d146781f3113906922-5\"><span class=\"crayon-v\">sess</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">tf</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">InteractiveSession</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">  </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5952d146781f3113906922-6\"><span class=\"crayon-e\">print</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">sess</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">run</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">add</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">feed_dict</span><span class=\"crayon-o\">=</span><span class=\"crayon-sy\">{</span><span class=\"crayon-v\">a</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">b</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">}</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0113 seconds] -->\r\n<p>我们可以通过打印占位符的名称来验证此程序是否创建了两个不同的节点：print(a.name，b.name)生成Placeholder:0 Placeholder_1:0，因此，b占位符是Placeholder_1:0，而a占位符是Placeholder:0。</p>\n<p>在Go中，相反，之前的程序会执行失败，因为A和x都命名为Placeholder。我们可以得出这样的结论：</p>\n<p><strong>Go API不会在每次调用函数来定义操作的时候自动生成新的名字：操作的名字是固定的，我们无法修改。</strong></p>\n<p><strong>提问时间：</strong></p>\n<ul>\n<li>关于Tensorflow架构，我们学到了哪些东西？图中的每个节点都必须具有唯一的名称。每个节点都用名称来标识。</li>\n<li>节点的名称与用名字来定义的操作相同吗？是的，但还有更好的答案，不完全是，节点的名称只是操作的一部分。</li>\n</ul>\n<p>为了详细说明第二个答案，我们来解决节点名重复的问题。</p>\n<p><strong>第二节课： 作用域</strong></p>\n<p>正如我们刚刚看到的那样，每定义一个操作时，Python API都会自动创建一个新的名称。在底层，Python API调用类Scope的C++方法WithOpName。以下是方法的文档及其签名，保存在<a href=\"https://github.com/tensorflow/tensorflow/blob/a5b1fb8e56ceda0ee2794ee05f5a7642157875c5/tensorflow/cc/framework/scope.h\" target=\"_blank\">scope.h</a>中：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5952d146781f8485257720\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" touchscreen minimize scroll-mouseover\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n/// Return a new scope. All ops created within the returned scope will have\r\n/// names of the form &amp;lt;name&amp;gt;/&amp;lt;op_name&amp;gt;[_&amp;lt;suffix].\r\nScope WithOpName(const string&amp;amp; op_name) const;</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5952d146781f8485257720-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5952d146781f8485257720-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5952d146781f8485257720-3\">3</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5952d146781f8485257720-1\"><span class=\"crayon-c\">/// Return a new scope. All ops created within the returned scope will have</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5952d146781f8485257720-2\"><span class=\"crayon-c\">/// names of the form &amp;lt;name&amp;gt;/&amp;lt;op_name&amp;gt;[_&amp;lt;suffix].</span></div><div class=\"crayon-line\" id=\"crayon-5952d146781f8485257720-3\"><span class=\"crayon-e\">Scope </span><span class=\"crayon-e\">WithOpName</span><span class=\"crayon-sy\">(</span><span class=\"crayon-m\">const</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">string</span><span class=\"crayon-o\">&amp;</span><span class=\"crayon-v\">amp</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">op_name</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-m\">const</span><span class=\"crayon-sy\">;</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0028 seconds] -->\r\n<p>我们注意到，这个用于命名节点的方法返回了一个Scope，因此，节点名实际上是一个Scope。Scope是从根 /（空的图）到op_name的<strong>完整路径</strong>。</p>\n<p>当我们尝试添加一个具有与/到op_name相同路径的节点时，WithOpName方法会添加一个后缀_&lt;suffix&gt;（其中&lt;suffix&gt;是一个计数器），因此它将成为同一范围内的重复的节点。</p>\n<p>知道了这一点之后，为了解决重复节点名的问题，我们期望在Scope类型中找到WithOpName方法。可悲的是，这种方法并不存在。</p>\n<p>相反，查看<a href=\"https://godoc.org/github.com/tensorflow/tensorflow/tensorflow/go/op#Scope\" target=\"_blank\">Scope类型的文档</a>，我们可以看到唯一的一个方法：SubScope，它返回一个新的Scope。</p>\n<p>文档里是这么说的：</p>\n<blockquote><p>SubScope返回一个新的Scope，这将导致添加到图中的所有操作都将以“namespace”为命名空间。如果命名空间与作用域内现有的命名空间冲突，则会添加一个后缀。</p></blockquote>\n<p>使用后缀的冲突管理与C++的WithOpName不同：WithOpName是在操作名之后添加后缀，但还是在同一作用域内（因此占位符变为了Placeholder_1），而Go的SubScope是在作用域名称后添加后缀。</p>\n<p>这种差异会产生完全不同的图，但它们在计算上是等效的。</p>\n<p>我们来改变占位符的定义，以此来定义两个不同的节点，此外，我们来打印一下作用域的名称。</p>\n<p>让我们创建文件attempt2.go，把这几行从：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5952d146781fc536925585\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" touchscreen minimize scroll-mouseover\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nA := op.Placeholder(root, tf.Int64, op.PlaceholderShape(tf.MakeShape(2, 2)))  \r\nx := op.Placeholder(root, tf.Int64, op.PlaceholderShape(tf.MakeShape(2, 1)))</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5952d146781fc536925585-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5952d146781fc536925585-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5952d146781fc536925585-1\"><span class=\"crayon-v\">A</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">:</span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">op</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">Placeholder</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">root</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">tf</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">Int64</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">op</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">PlaceholderShape</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">tf</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">MakeShape</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">  </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5952d146781fc536925585-2\"><span class=\"crayon-v\">x</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">:</span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">op</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">Placeholder</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">root</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">tf</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">Int64</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">op</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">PlaceholderShape</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">tf</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">MakeShape</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0015 seconds] -->\r\n<p>改成：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5952d14678201828749613\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" touchscreen minimize scroll-mouseover\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n// define 2 subscopes of the root subscopes, called \"input\". In this  \r\n// way we expect to have a input/ and a input_1/ scope under the root scope  \r\nA := op.Placeholder(root.SubScope(\"input\"), tf.Int64, op.PlaceholderShape(tf.MakeShape(2, 2)))  \r\nx := op.Placeholder(root.SubScope(\"input\"), tf.Int64, op.PlaceholderShape(tf.MakeShape(2, 1)))  \r\nfmt.Println(A.Op.Name(), x.Op.Name())</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5952d14678201828749613-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5952d14678201828749613-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5952d14678201828749613-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5952d14678201828749613-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5952d14678201828749613-5\">5</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5952d14678201828749613-1\"><span class=\"crayon-c\">// define 2 subscopes of the root subscopes, called \"input\". In this  </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5952d14678201828749613-2\"><span class=\"crayon-c\">// way we expect to have a input/ and a input_1/ scope under the root scope  </span></div><div class=\"crayon-line\" id=\"crayon-5952d14678201828749613-3\"><span class=\"crayon-v\">A</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">:</span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">op</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">Placeholder</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">root</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">SubScope</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"input\"</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">tf</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">Int64</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">op</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">PlaceholderShape</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">tf</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">MakeShape</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">  </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5952d14678201828749613-4\"><span class=\"crayon-v\">x</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">:</span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">op</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">Placeholder</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">root</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">SubScope</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"input\"</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">tf</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">Int64</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">op</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">PlaceholderShape</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">tf</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">MakeShape</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">  </span></div><div class=\"crayon-line\" id=\"crayon-5952d14678201828749613-5\"><span class=\"crayon-v\">fmt</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">Println</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">A</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">Op</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">Name</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">x</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">Op</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">Name</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0043 seconds] -->\r\n<p>编译并运行：go run attempt2.go，输出结果：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5952d14678205139321838\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" touchscreen minimize scroll-mouseover\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\ninput/Placeholder input_1/Placeholder</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5952d14678205139321838-1\">1</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5952d14678205139321838-1\"><span class=\"crayon-v\">input</span><span class=\"crayon-o\">/</span><span class=\"crayon-e\">Placeholder </span><span class=\"crayon-v\">input_1</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">Placeholder</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0005 seconds] -->\r\n<p><strong>提问时间：</strong></p>\n<p>关于Tensorflow的架构，我们学到了什么？节点完全是由被定义的作用域来标识的。作用域是我们从图的根到达节点的路径。有两种定义节点的方法：在不同的作用域（Go语言）中定义操作或更改操作名称。</p>\n<p>我们解决了重复节点名称的问题，但另一个问题显示在我们的终端上。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5952d14678208369969637\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" touchscreen minimize scroll-mouseover\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\npanic: failed to add operation \"MatMul\": Value for attr 'T' of int64 is not in the list of allowed values: half, float, double, int32, complex64, complex128</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5952d14678208369969637-1\">1</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5952d14678208369969637-1\"><span class=\"crayon-v\">panic</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">failed </span><span class=\"crayon-st\">to</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">add </span><span class=\"crayon-i\">operation</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"MatMul\"</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Value </span><span class=\"crayon-st\">for</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">attr</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'T'</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">of </span><span class=\"crayon-e\">int64 </span><span class=\"crayon-st\">is</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">not</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">in</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">the </span><span class=\"crayon-e\">list </span><span class=\"crayon-e\">of </span><span class=\"crayon-e\">allowed </span><span class=\"crayon-v\">values</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">half</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">float</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">double</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">int32</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">complex64</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">complex128</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0013 seconds] -->\r\n<p>为什么MatMul节点会出现错误？我们只是想增加两个tf.int64矩阵！从这段错误提示来看，int64是MatMul唯一不接受的类型。</p>\n<blockquote><p>int64类型的attr ‘T’的值不在允许的值列表中：half，float，double，int32，complex64，complex128</p></blockquote>\n<p>这个列表是什么？为什么我们可以做两个int32类型矩阵的乘法，而不是int64？</p>\n<p>我们来解决这个问题，了解为什么会出现这种情况。</p>\n<p><strong>第三节课：Tensorflow的类型系统</strong></p>\n<p>我们来看一下<a href=\"https://github.com/tensorflow/tensorflow/blob/r1.2/tensorflow/core/ops/math_ops.cc#L1048\" target=\"_blank\">源代码</a>，寻找MatMul操作的C++声明：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5952d1467820c220705581\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" touchscreen minimize scroll-mouseover\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nREGISTER_OP(\"MatMul\")  \r\n    .Input(\"a: T\")  \r\n    .Input(\"b: T\")  \r\n    .Output(\"product: T\")  \r\n    .Attr(\"transpose_a: bool = false\")  \r\n    .Attr(\"transpose_b: bool = false\")  \r\n    .Attr(\"T: {half, float, double, int32, complex64, complex128}\")  \r\n    .SetShapeFn(shape_inference::MatMulShape)  \r\n    .Doc(R\"doc(  \r\nMultiply the matrix \"a\" by the matrix \"b\".  \r\nThe inputs must be two-dimensional matrices and the inner dimension of  \r\n\"a\" (after being transposed if transpose_a is true) must match the  \r\nouter dimension of \"b\" (after being transposed if transposed_b is  \r\ntrue).  \r\n*Note*: The default kernel implementation for MatMul on GPUs uses  \r\ncublas.  \r\ntranspose_a: If true, \"a\" is transposed before multiplication.  \r\ntranspose_b: If true, \"b\" is transposed before multiplication.  \r\n)doc\");</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5952d1467820c220705581-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5952d1467820c220705581-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5952d1467820c220705581-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5952d1467820c220705581-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5952d1467820c220705581-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5952d1467820c220705581-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5952d1467820c220705581-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5952d1467820c220705581-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5952d1467820c220705581-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5952d1467820c220705581-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5952d1467820c220705581-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5952d1467820c220705581-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5952d1467820c220705581-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5952d1467820c220705581-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5952d1467820c220705581-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5952d1467820c220705581-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-5952d1467820c220705581-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5952d1467820c220705581-18\">18</div><div class=\"crayon-num\" data-line=\"crayon-5952d1467820c220705581-19\">19</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5952d1467820c220705581-1\"><span class=\"crayon-e\">REGISTER_OP</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"MatMul\"</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">  </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5952d1467820c220705581-2\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">Input</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"a: T\"</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">  </span></div><div class=\"crayon-line\" id=\"crayon-5952d1467820c220705581-3\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">Input</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"b: T\"</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">  </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5952d1467820c220705581-4\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">Output</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"product: T\"</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">  </span></div><div class=\"crayon-line\" id=\"crayon-5952d1467820c220705581-5\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">Attr</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"transpose_a: bool = false\"</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">  </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5952d1467820c220705581-6\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">Attr</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"transpose_b: bool = false\"</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">  </span></div><div class=\"crayon-line\" id=\"crayon-5952d1467820c220705581-7\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">Attr</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"T: {half, float, double, int32, complex64, complex128}\"</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">  </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5952d1467820c220705581-8\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">SetShapeFn</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">shape_inference</span><span class=\"crayon-o\">::</span><span class=\"crayon-v\">MatMulShape</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">  </span></div><div class=\"crayon-line\" id=\"crayon-5952d1467820c220705581-9\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">Doc</span><span class=\"crayon-sy\">(</span><span class=\"crayon-i\">R</span><span class=\"crayon-s\">\"doc(  </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5952d1467820c220705581-10\"><span class=\"crayon-s\">Multiply the matrix \"</span><span class=\"crayon-i\">a</span><span class=\"crayon-s\">\" by the matrix \"</span><span class=\"crayon-i\">b</span><span class=\"crayon-s\">\".  </span></div><div class=\"crayon-line\" id=\"crayon-5952d1467820c220705581-11\"><span class=\"crayon-s\">The inputs must be two-dimensional matrices and the inner dimension of  </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5952d1467820c220705581-12\"><span class=\"crayon-s\">\"</span><span class=\"crayon-i\">a</span><span class=\"crayon-s\">\" (after being transposed if transpose_a is true) must match the  </span></div><div class=\"crayon-line\" id=\"crayon-5952d1467820c220705581-13\"><span class=\"crayon-s\">outer dimension of \"</span><span class=\"crayon-i\">b</span><span class=\"crayon-s\">\" (after being transposed if transposed_b is  </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5952d1467820c220705581-14\"><span class=\"crayon-s\">true).  </span></div><div class=\"crayon-line\" id=\"crayon-5952d1467820c220705581-15\"><span class=\"crayon-s\">*Note*: The default kernel implementation for MatMul on GPUs uses  </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5952d1467820c220705581-16\"><span class=\"crayon-s\">cublas.  </span></div><div class=\"crayon-line\" id=\"crayon-5952d1467820c220705581-17\"><span class=\"crayon-s\">transpose_a: If true, \"</span><span class=\"crayon-i\">a</span><span class=\"crayon-s\">\" is transposed before multiplication.  </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5952d1467820c220705581-18\"><span class=\"crayon-s\">transpose_b: If true, \"</span><span class=\"crayon-i\">b</span><span class=\"crayon-s\">\" is transposed before multiplication.  </span></div><div class=\"crayon-line\" id=\"crayon-5952d1467820c220705581-19\"><span class=\"crayon-s\">)doc\"</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0028 seconds] -->\r\n<p>该行定义了MatMul操作的接口：特别注意到代码里使用了REGISTER_OP宏来声明了op的：</p>\n<ul>\n<li>名称：MatMul</li>\n<li>参数：a，b</li>\n<li>属性（可选参数）：transpose_a，transpose_b</li>\n<li>模板T支持的类型：half，float，double，int32，complex64，complex128</li>\n<li>输出形状：自动推断</li>\n<li>说明文档</li>\n</ul>\n<p>这个宏调用不包含任何C++代码，但它告诉我们，在定义一个操作时，尽管它使用了模板，但是我们必须为指定的类型T（或属性）指定一个类型列表中的类型。实际上，属性.Attr(“T: {half, float, double, int32, complex64, complex128}”)是将类型T约束为该列表的一个值。</p>\n<p>我们可以从教程中阅读到，即使在使用模板T时，我们也必须对每个支持的重载显式地注册内核。内核是以CUDA方式对C/C++函数进行的引用，这些函数将会并行执行。</p>\n<p>因此，MatMul的作者决定仅支持上面列出的类型，而不支持int64。有两个可能的原因：</p>\n<ul>\n<li>疏忽了：这很有可能，因为Tensorflow的作者是人类！</li>\n<li>对尚未完全支持int64操作的设备兼容，因此内核的这种具体实现不足以在每个支持的硬件上运行。</li>\n</ul>\n<p>回到刚才的错误提示：修改方法是显而易见的。我们必须将参数以支持的类型传递给MatMul。</p>\n<p>我们来创建attempt3.go，把所有引用int64的行改为int32。</p>\n<p>有一点需要注意：Go绑定有自己的一组类型，与Go的类型的一一对应。当我们将值输入到图中时，我们必须关注映射关系。从图形中获取值时，必须做同样的事情。</p>\n<p>执行go run attempt3.go。结果：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5952d14678211845929044\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" touchscreen minimize scroll-mouseover\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\ninput/Placeholder input_1/Placeholder  \r\n[[210] [-210]]</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5952d14678211845929044-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5952d14678211845929044-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5952d14678211845929044-1\"><span class=\"crayon-v\">input</span><span class=\"crayon-o\">/</span><span class=\"crayon-e\">Placeholder </span><span class=\"crayon-v\">input_1</span><span class=\"crayon-o\">/</span><span class=\"crayon-i\">Placeholder</span><span class=\"crayon-h\">  </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5952d14678211845929044-2\"><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">210</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">210</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">]</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0007 seconds] -->\r\n<p>万岁！</p>\n<p><strong>提问时间</strong></p>\n<p>关于Tensorflow的架构，我们学到了什么？每个操作都与自己的一组内核相关联。被视为描述性语言的Tensorflow是一种强大的类型语言。它不仅要遵守C++类型规则，而且还要在op的注册阶段只实现某些指定类型的能力。</p>\n<p><strong>结论</strong></p>\n<p>使用Go来定义并执行一个图，使我们有机会更好地了解Tensorflow的底层结构。使用试错法，我们解决了这个简单的问题，我们一步一步地学到了有关图、节点和类型系统这些新东西。</p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"111491\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"111491votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"111491\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 2 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i>  评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "publish_date": "2017/06/17", "comment_nums": 0, "remote_img_url": ["http://jbcdn2.b0.upaiyun.com/2017/03/86a72531c8845e07f09b2d42649f2253.jpg"], "title": "使用 Go 语言来理解 Tensorflow", "local_img_url": ["f"]},{"praise_nums": "1", "fav_nums": "4", "tags": "IT技术,开源,英语", "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">原文出处： <a ref=\"nofollow\" target=\"_blank\" href=\"https://opensource.com/article/17/1/non-native-speakers-take-open-source-communities\">opensource.com</a>   译文出处：<a target=\"_blank\" href=\"https://linux.cn/article-8619-1.html\">Linux中国/zhousiyu325</a>   </div><p>大多数的开源项目的主要语言都是英语，但是开源项目的用户和贡献者却遍布全球。非英语母语的人在参与这个生态系统时会面临许多沟通和文化上的挑战。</p>\n<p>在这篇文章中，作为不以英语为母语的 OpenStack 的贡献者的我们将会分享一些所面临挑战——如何去克服它们，还有一些好的方案，它们能够减轻不以英语为母语且刚开始从事的人的焦虑。我们的总部在日本、巴西和中国，每天都会与世界各地的大型 OpenStack 社区合作。</p>\n<p>OpenStack 的官方语言是英语，这意味着我们是作为非英语为母语的人士来进行交流。</p>\n<h3 id=\"toc_1\">挑战</h3>\n<p>非英语为母语的人士在开源社区工作时会面临具体沟通挑战：它们与有限的语言技能和文化差异有关。</p>\n<h4 id=\"toc_2\">语言技能</h4>\n<p>让我们来关注在阅读、写作、听力和口语背后的具体语言技能。</p>\n<p><strong>阅读</strong>：这是最简单也是最重要的技能。最简单是因为：如果你不明白写了什么，你有机会再次阅读它，或者需要的话可以多次阅读。如果你遇到了一个不常见的短语、表达式或者缩写，你可以使用一个词典或者翻译器。在另一方面，它是最重要的技能是因为：对大多数开源项目而言，主要的交流方式都是邮件列表和 IRC。</p>\n<p><strong>写作</strong>：英语语法是一个问题，尤其是对句子结构不同的语言而言。这可能会在用电子邮件进行通信和通过 IRC 频道进行通信时产生问题。对一些人来说，写出又长又漂亮的句子比较困难，而普遍依赖于简单句子，这是因为这些易于书写和理解。</p>\n<p><strong>听力</strong>：这对非英语为母语的人来说比阅读和写作更加困难。通常，英语为母语的人之间的对话在非常快的，这就使得那些仍然处于刚从事阶段的人很难理解他们的讨论，同时也限制了他们参与到讨论当中。此外，试图理解一个遍布全球的社区的各种口音也增加了复杂性。有意思的是，美国人的发音往往比其他的容易理解。</p>\n<p><strong>口语</strong>：口语比听力更加的困难，因为参与者的词汇量可能会比较有限。而且，英语的音素和语法通常与那些母语不是英语的人的母语相差很大，这就使得互动更加的难以理解。</p>\n<h4 id=\"toc_3\">文化差异</h4>\n<p>在开源社区与其他人交流时，每种文化都有它自己不同的规范。例如，日本人通常不会明确的说好的或者不，他们认为这是尊重别人的一种方式，可以避免彼此间的争论。这通常与其他的文化大不一样，可能会对所表达的内容造成误解。</p>\n<p>在中国文化中，人们倾向于只是说好的，而不是说不，或者试图商讨。在一个像 OpenStack 这样的分布于全球的社区里，这通常会导致在表达意见时缺乏自信。另外，中国人喜欢首先列出事实，然后在后面给出结论，而这会对来自其他文化中的人造成困惑，因为这不是他们所期望的。</p>\n<p>例如，巴西人可能会认为讨论是以类似的方式进行的；然而，其他文化的反应会很直接和简短，这听起来可能会有点粗鲁。</p>\n<h3 id=\"toc_4\">克服障碍</h3>\n<p>语言技能方面的挑战要比文化差异方面的挑战容易克服。文化差异需要被受到尊重，然而英语技能却总是可以被改善的。</p>\n<p>为了刷新你的语言技能，你应该尽可能多地接触该语言。不要担心你的局限，只管尽自己所能，你终将会得到改善。</p>\n<p>尽可能多的阅读，因为这有助于你积累词汇。通过日常的聊天和邮件列表进行交流也很有帮助。一些工具，如实时字典和翻译器，对这些平台非常有用。</p>\n<p>与别人或者你自己交谈可以帮助你更自如地频繁地说话。进行一对一的对话来表达你的想法比在更大的群体中讨论更容易。</p>\n<h3 id=\"toc_5\">新手的融入</h3>\n<p>来自新手和母语者的一些举措可能会对学习过程产生积极的影响。</p>\n<h4 id=\"toc_6\">新手</h4>\n<p>说出和写下你的意见，并且提出你的问题；参与其中总是一个练习你的英语的很好的机会。不要害怕。</p>\n<p>对于会议，确保你提前准备过，这样你将会对会议主题比较熟悉，而且会对自己要表达的意见更加的自信。</p>\n<p>与英语为母语的人结交朋友，多和他们讨论来提高你的英语技能。</p>\n<p>用英语写博客和技术文章也是不错的主意。</p>\n<h4 id=\"toc_7\">给英语为母语的人士的建议</h4>\n<p>请说话慢一点儿，同时使用一些简单的单词和句子。如果你发现了非英语为母语的人使用英语中的一些错误请不要嘲笑他们，尝试鼓励新来的人表达自己的意见，让他们非常舒适地表达意见。</p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"111506\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"111506votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"111506\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 4 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i>  评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "publish_date": "2017/06/19", "comment_nums": 0, "remote_img_url": ["http://jbcdn2.b0.upaiyun.com/2017/05/b94146f42c8e0ca2b0f04ed89b59053c.jpg"], "title": "给非英语母语的人从事开源项目的若干建议", "local_img_url": ["f"]},{"praise_nums": "2", "fav_nums": "1", "tags": "IT技术,Bash", "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">原文出处： <a ref=\"nofollow\" target=\"_blank\" href=\"https://opensource.com/article/17/5/how-i-learned-bash-scripting\">Sandra Mccann</a>   译文出处：<a target=\"_blank\" href=\"https://linux.cn/article-8617-1.html\">Linux中国/xllc</a>   </div><p>我前几天写了一个脚本。对于一些人来说，这句话听起来没什么了不起的。而对于另一些人来说，这句话意义重大。要知道，我不是一个程序员，而是一个作家。</p>\n<h3 id=\"toc_1\">我需要解决什么？</h3>\n<p>我的问题相当简单：我需要将工程文件进行分类。这些文件可以从一个网站 URL 以 .zip 的格式下载。当我正手工将它们拷贝到我的电脑桌面，并移动到一个已按照我文件分类的需要进行了结构化的目录时，一位作家同事给我提了建议：<em>“不就是写个脚本的事吗？”</em></p>\n<p>我心想：<em>“就写个脚本？”</em>——说得好像这是世界上最容易做的事情一样。</p>\n<h3 id=\"toc_2\">Google 是如何解救我的？</h3>\n<p>同事的问题促使我思考，并且经过思考后，我进行了 Google 搜索。</p>\n<p><strong>Linux 上使用的是什么脚本编程语言？</strong></p>\n<p>这是我第一个 Google 搜索的准则。也许很多人心里会想：“她太笨了！”是的，我很笨。不过，这的确使我走上了一条解决问题的道路。最常见的搜索结果是 Bash 。嗯，我听说过 Bash 。呃，我要分类的文件中有一个里面就有 Bash，那无处不在的 <code>#!/bin/bash</code> 。我重新看了下那个文件，我知道它的用途，因为我需要将它分类。</p>\n<p>这引导我进行了下一个 Google 搜索。</p>\n<p><strong>如何从一个 URL 下载 zip 文件？</strong></p>\n<p>那确实是我的基本任务。我有一个带有 .zip 文件的 URL ，它包含有所有我需要分类的文件，所以我寻求万能的 Google 的帮助。搜索到的精华内容和其它一些结果引导我使用 Curl 。但最重要的是：我不仅找到了 Curl ，其中一条置顶的搜索结果还展示了一个使用 Curl 去下载并解压 .zip 文件的 Bash 脚本。这超出了我本来想寻求的答案，但那也使我意识到在 Google 搜索具体的请求可以得到我写这个脚本需要的信息。所以，在这个收获的推动下，我写了最简单的脚本：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5952da18b2b2c664885790\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" touchscreen minimize scroll-mouseover\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n#!/bin/sh\r\ncurl http://rather.long.url | tar -xz -C my_directory --strip-components=1</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5952da18b2b2c664885790-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5952da18b2b2c664885790-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5952da18b2b2c664885790-1\"><span class=\"crayon-p\">#!/bin/sh</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5952da18b2b2c664885790-2\"><span class=\"crayon-e\">curl </span><span class=\"crayon-v\">http</span><span class=\"crayon-o\">:</span><span class=\"crayon-c\">//rather.long.url | tar -xz -C my_directory --strip-components=1</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0004 seconds] -->\r\n<p>我迫不及待地运行看看。但我发现一个问题： URL 是会变的，根据我要访问的文件的分组不同而不同。我有新的问题需要解决，这使我进行了下一轮搜索。</p>\n<p><strong>参数如何传递给 Bash 脚本？</strong></p>\n<p>我需要以不同的 URL 和不同的最终目录来运行此脚本。 Google 向我展示了如何使用 <code>$1</code>、<code>$2</code> 等等来替换我在命令行中运行脚本时输入的内容。比如：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5952da18b2b37202899574\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" touchscreen minimize scroll-mouseover\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nbash myscript.sh http://rather.long.url my_directory</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5952da18b2b37202899574-1\">1</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5952da18b2b37202899574-1\"><span class=\"crayon-e\">bash </span><span class=\"crayon-v\">myscript</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">sh </span><span class=\"crayon-v\">http</span><span class=\"crayon-o\">:</span><span class=\"crayon-c\">//rather.long.url my_directory</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0004 seconds] -->\r\n<p>这就好多了。一切如我所愿，灵活，实用。最重要的是我只要输入一条简短的命令就可以节省 30 分钟无聊的复制、粘贴工作。这个早上的时间花得值得。</p>\n<p>然后我发现还有一个问题：我很健忘，并且我知道我几个月才运行一次这个脚本。这留给我两个疑问：</p>\n<ul>\n<li>我要如何记得运行脚本时输入什么（URL 先，还是目录先）？</li>\n<li>如果我被货车撞了，其它作家如何知道该怎样运行我的脚本？</li>\n</ul>\n<p>我需要一个使用说明 —— 如果我使用不正确，则脚本会提示。比如：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5952da18b2b3b846034372\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" touchscreen minimize scroll-mouseover\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nusage: bash yaml-fetch.sh &lt;'snapshot_url'&gt; &lt;directory&gt;</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5952da18b2b3b846034372-1\">1</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5952da18b2b3b846034372-1\"><span class=\"crayon-v\">usage</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">bash </span><span class=\"crayon-v\">yaml</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">fetch</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">sh</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-s\">'snapshot_url'</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-v\">directory</span><span class=\"crayon-o\">&gt;</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0006 seconds] -->\r\n<p>否则，则直接运行脚本。我的下一个搜索是：</p>\n<p><strong>如何在 Bash 脚本里使用 “if/then/else”?</strong></p>\n<p>幸运的是，我已经知道编程中 <code>if/then/else</code> 的存在。我只要找出如何使用它的方法。在这个过程中，我也学到了如何在 Bash 脚本里使用 <code>echo</code> 打印。我的最终成果如下：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5952da18b2b3f093671028\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" touchscreen minimize scroll-mouseover\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n#!/bin/sh\r\nURL=$1\r\nDIRECTORY=$2\r\nif [ $# -eq 0 ];\r\n then\r\n echo \"usage: bash yaml-fetch.sh &lt;'snapshot_url'&gt; &lt;directory&gt;\".\r\n else\r\n# 如果目录不存在则创建它\r\n echo 'create directory'\r\n mkdir $DIRECTORY\r\n # 下载并解压 yaml 文件\r\n echo 'fetch and untar the yaml files'\r\n curl $URL | tar -xz -C $DIRECTORY --strip-components=1\r\nfi</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5952da18b2b3f093671028-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5952da18b2b3f093671028-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5952da18b2b3f093671028-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5952da18b2b3f093671028-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5952da18b2b3f093671028-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5952da18b2b3f093671028-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5952da18b2b3f093671028-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5952da18b2b3f093671028-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5952da18b2b3f093671028-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5952da18b2b3f093671028-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5952da18b2b3f093671028-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5952da18b2b3f093671028-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5952da18b2b3f093671028-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5952da18b2b3f093671028-14\">14</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5952da18b2b3f093671028-1\"><span class=\"crayon-p\">#!/bin/sh</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5952da18b2b3f093671028-2\"><span class=\"crayon-v\">URL</span><span class=\"crayon-o\">=</span><span class=\"crayon-sy\">$</span><span class=\"crayon-cn\">1</span></div><div class=\"crayon-line\" id=\"crayon-5952da18b2b3f093671028-3\"><span class=\"crayon-v\">DIRECTORY</span><span class=\"crayon-o\">=</span><span class=\"crayon-sy\">$</span><span class=\"crayon-cn\">2</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5952da18b2b3f093671028-4\"><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">$</span><span class=\"crayon-p\"># -eq 0 ];</span></div><div class=\"crayon-line\" id=\"crayon-5952da18b2b3f093671028-5\"><span class=\"crayon-h\"> </span><span class=\"crayon-st\">then</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5952da18b2b3f093671028-6\"><span class=\"crayon-h\"> </span><span class=\"crayon-i\">echo</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"usage: bash yaml-fetch.sh &lt;'snapshot_url'&gt; &lt;directory&gt;\"</span><span class=\"crayon-sy\">.</span></div><div class=\"crayon-line\" id=\"crayon-5952da18b2b3f093671028-7\"><span class=\"crayon-h\"> </span><span class=\"crayon-st\">else</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5952da18b2b3f093671028-8\"><span class=\"crayon-p\"># 如果目录不存在则创建它</span></div><div class=\"crayon-line\" id=\"crayon-5952da18b2b3f093671028-9\"><span class=\"crayon-h\"> </span><span class=\"crayon-i\">echo</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'create directory'</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5952da18b2b3f093671028-10\"><span class=\"crayon-h\"> </span><span class=\"crayon-i\">mkdir</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">DIRECTORY</span></div><div class=\"crayon-line\" id=\"crayon-5952da18b2b3f093671028-11\"><span class=\"crayon-h\"> </span><span class=\"crayon-p\"># 下载并解压 yaml 文件</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5952da18b2b3f093671028-12\"><span class=\"crayon-h\"> </span><span class=\"crayon-i\">echo</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'fetch and untar the yaml files'</span></div><div class=\"crayon-line\" id=\"crayon-5952da18b2b3f093671028-13\"><span class=\"crayon-h\"> </span><span class=\"crayon-i\">curl</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">URL</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">tar</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">xz</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">C</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">DIRECTORY</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">--</span><span class=\"crayon-v\">strip</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">components</span><span class=\"crayon-o\">=</span><span class=\"crayon-cn\">1</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5952da18b2b3f093671028-14\"><span class=\"crayon-v\">fi</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0016 seconds] -->\r\n<p></p>\n<h3 id=\"toc_3\">Google 和脚本编程如何颠覆我的世界？</h3>\n<p>好吧，这稍微有点夸大，不过现在是 21 世纪，学习新东西（特别是稍微简单的东西）比以前简单多了。我所学到的（除了如何写一个简短的、自动分类的 Bash 脚本之外）是如果我有疑问，那么有很大可能性是其它人在之前也有过相同的疑问。当我困惑时，我可以问下一个问题，再下一个问题。最后，我不仅拥有了脚本，还拥有了可以一直拥有并可以简化其它任务的新技能，这是我之前所没有的。</p>\n<p>别止步于第一个脚本（或者编程的第一步）。这是一个技能，和其它的技能并无不同，有大量的信息可以在这一路上帮助你。你无需阅读大量的书或参加一个月的课程。你可以像婴儿学步那样简单地开始写脚本，然后掌握技能并建立自信。人们总有写成千上万行代码的需求，并对它进行分支、合并、修复错误。但是，通过简单的脚本或其它方式来自动化、简单化任务的需求也一样强烈。这样的一个小脚本和小小的自信就能够让你启程脚本编程之路。</p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"111509\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"111509votetotal\">2</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"111509\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 1 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i> 1 评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "publish_date": "2017/06/19", "comment_nums": "1", "remote_img_url": ["http://jbcdn2.b0.upaiyun.com/2017/05/77d80105fd15f2465894827e23cc4842.jpeg"], "title": "我是如何开始踏上 bash 脚本编程之路的？", "local_img_url": ["f"]}